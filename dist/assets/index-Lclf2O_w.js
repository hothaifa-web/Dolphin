function Kj(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(n,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();function sy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dd={exports:{}},Qr={},Ad={exports:{}},Me={};var rg;function Gj(){if(rg)return Me;rg=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function w(D,G,xe){this.props=D,this.context=G,this.refs=N,this.updater=xe||b}w.prototype.isReactComponent={},w.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function S(){}S.prototype=w.prototype;function _(D,G,xe){this.props=D,this.context=G,this.refs=N,this.updater=xe||b}var T=_.prototype=new S;T.constructor=_,j(T,w.prototype),T.isPureReactComponent=!0;var O=Array.isArray,E=Object.prototype.hasOwnProperty,$={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function L(D,G,xe){var ge,Se={},we=null,K=null;if(G!=null)for(ge in G.ref!==void 0&&(K=G.ref),G.key!==void 0&&(we=""+G.key),G)E.call(G,ge)&&!z.hasOwnProperty(ge)&&(Se[ge]=G[ge]);var F=arguments.length-2;if(F===1)Se.children=xe;else if(1<F){for(var ne=Array(F),Q=0;Q<F;Q++)ne[Q]=arguments[Q+2];Se.children=ne}if(D&&D.defaultProps)for(ge in F=D.defaultProps,F)Se[ge]===void 0&&(Se[ge]=F[ge]);return{$$typeof:t,type:D,key:we,ref:K,props:Se,_owner:$.current}}function M(D,G){return{$$typeof:t,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Z(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(xe){return G[xe]})}var re=/\/+/g;function ee(D,G){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):G.toString(36)}function de(D,G,xe,ge,Se){var we=typeof D;(we==="undefined"||we==="boolean")&&(D=null);var K=!1;if(D===null)K=!0;else switch(we){case"string":case"number":K=!0;break;case"object":switch(D.$$typeof){case t:case e:K=!0}}if(K)return K=D,Se=Se(K),D=ge===""?"."+ee(K,0):ge,O(Se)?(xe="",D!=null&&(xe=D.replace(re,"$&/")+"/"),de(Se,G,xe,"",function(Q){return Q})):Se!=null&&(R(Se)&&(Se=M(Se,xe+(!Se.key||K&&K.key===Se.key?"":(""+Se.key).replace(re,"$&/")+"/")+D)),G.push(Se)),1;if(K=0,ge=ge===""?".":ge+":",O(D))for(var F=0;F<D.length;F++){we=D[F];var ne=ge+ee(we,F);K+=de(we,G,xe,ne,Se)}else if(ne=y(D),typeof ne=="function")for(D=ne.call(D),F=0;!(we=D.next()).done;)we=we.value,ne=ge+ee(we,F++),K+=de(we,G,xe,ne,Se);else if(we==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return K}function he(D,G,xe){if(D==null)return D;var ge=[],Se=0;return de(D,ge,"","",function(we){return G.call(xe,we,Se++)}),ge}function V(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(xe){(D._status===0||D._status===-1)&&(D._status=1,D._result=xe)},function(xe){(D._status===0||D._status===-1)&&(D._status=2,D._result=xe)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var X={current:null},B={transition:null},q={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:B,ReactCurrentOwner:$};function se(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:he,forEach:function(D,G,xe){he(D,function(){G.apply(this,arguments)},xe)},count:function(D){var G=0;return he(D,function(){G++}),G},toArray:function(D){return he(D,function(G){return G})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Me.Component=w,Me.Fragment=s,Me.Profiler=o,Me.PureComponent=_,Me.StrictMode=n,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Me.act=se,Me.cloneElement=function(D,G,xe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ge=j({},D.props),Se=D.key,we=D.ref,K=D._owner;if(G!=null){if(G.ref!==void 0&&(we=G.ref,K=$.current),G.key!==void 0&&(Se=""+G.key),D.type&&D.type.defaultProps)var F=D.type.defaultProps;for(ne in G)E.call(G,ne)&&!z.hasOwnProperty(ne)&&(ge[ne]=G[ne]===void 0&&F!==void 0?F[ne]:G[ne])}var ne=arguments.length-2;if(ne===1)ge.children=xe;else if(1<ne){F=Array(ne);for(var Q=0;Q<ne;Q++)F[Q]=arguments[Q+2];ge.children=F}return{$$typeof:t,type:D.type,key:Se,ref:we,props:ge,_owner:K}},Me.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},Me.createElement=L,Me.createFactory=function(D){var G=L.bind(null,D);return G.type=D,G},Me.createRef=function(){return{current:null}},Me.forwardRef=function(D){return{$$typeof:d,render:D}},Me.isValidElement=R,Me.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:V}},Me.memo=function(D,G){return{$$typeof:f,type:D,compare:G===void 0?null:G}},Me.startTransition=function(D){var G=B.transition;B.transition={};try{D()}finally{B.transition=G}},Me.unstable_act=se,Me.useCallback=function(D,G){return X.current.useCallback(D,G)},Me.useContext=function(D){return X.current.useContext(D)},Me.useDebugValue=function(){},Me.useDeferredValue=function(D){return X.current.useDeferredValue(D)},Me.useEffect=function(D,G){return X.current.useEffect(D,G)},Me.useId=function(){return X.current.useId()},Me.useImperativeHandle=function(D,G,xe){return X.current.useImperativeHandle(D,G,xe)},Me.useInsertionEffect=function(D,G){return X.current.useInsertionEffect(D,G)},Me.useLayoutEffect=function(D,G){return X.current.useLayoutEffect(D,G)},Me.useMemo=function(D,G){return X.current.useMemo(D,G)},Me.useReducer=function(D,G,xe){return X.current.useReducer(D,G,xe)},Me.useRef=function(D){return X.current.useRef(D)},Me.useState=function(D){return X.current.useState(D)},Me.useSyncExternalStore=function(D,G,xe){return X.current.useSyncExternalStore(D,G,xe)},Me.useTransition=function(){return X.current.useTransition()},Me.version="18.3.1",Me}var og;function oh(){return og||(og=1,Ad.exports=Gj()),Ad.exports}var ag;function Qj(){if(ag)return Qr;ag=1;var t=oh(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,f){var p,g={},y=null,b=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(p in h)n.call(h,p)&&!l.hasOwnProperty(p)&&(g[p]=h[p]);if(d&&d.defaultProps)for(p in h=d.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:e,type:d,key:y,ref:b,props:g,_owner:o.current}}return Qr.Fragment=s,Qr.jsx=c,Qr.jsxs=c,Qr}var lg;function Xj(){return lg||(lg=1,Dd.exports=Qj()),Dd.exports}var r=Xj(),C=oh();const te=sy(C),Jj=Kj({__proto__:null,default:te},[C]);var Ha={},Rd={exports:{}},Ut={},Id={exports:{}},Ld={};var cg;function Zj(){return cg||(cg=1,(function(t){function e(B,q){var se=B.length;B.push(q);e:for(;0<se;){var D=se-1>>>1,G=B[D];if(0<o(G,q))B[D]=q,B[se]=G,se=D;else break e}}function s(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var q=B[0],se=B.pop();if(se!==q){B[0]=se;e:for(var D=0,G=B.length,xe=G>>>1;D<xe;){var ge=2*(D+1)-1,Se=B[ge],we=ge+1,K=B[we];if(0>o(Se,se))we<G&&0>o(K,Se)?(B[D]=K,B[we]=se,D=we):(B[D]=Se,B[ge]=se,D=ge);else if(we<G&&0>o(K,se))B[D]=K,B[we]=se,D=we;else break e}}return q}function o(B,q){var se=B.sortIndex-q.sortIndex;return se!==0?se:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,g=null,y=3,b=!1,j=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var q=s(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=B)n(f),q.sortIndex=q.expirationTime,e(h,q);else break;q=s(f)}}function O(B){if(N=!1,T(B),!j)if(s(h)!==null)j=!0,V(E);else{var q=s(f);q!==null&&X(O,q.startTime-B)}}function E(B,q){j=!1,N&&(N=!1,S(L),L=-1),b=!0;var se=y;try{for(T(q),g=s(h);g!==null&&(!(g.expirationTime>q)||B&&!Z());){var D=g.callback;if(typeof D=="function"){g.callback=null,y=g.priorityLevel;var G=D(g.expirationTime<=q);q=t.unstable_now(),typeof G=="function"?g.callback=G:g===s(h)&&n(h),T(q)}else n(h);g=s(h)}if(g!==null)var xe=!0;else{var ge=s(f);ge!==null&&X(O,ge.startTime-q),xe=!1}return xe}finally{g=null,y=se,b=!1}}var $=!1,z=null,L=-1,M=5,R=-1;function Z(){return!(t.unstable_now()-R<M)}function re(){if(z!==null){var B=t.unstable_now();R=B;var q=!0;try{q=z(!0,B)}finally{q?ee():($=!1,z=null)}}else $=!1}var ee;if(typeof _=="function")ee=function(){_(re)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,he=de.port2;de.port1.onmessage=re,ee=function(){he.postMessage(null)}}else ee=function(){w(re,0)};function V(B){z=B,$||($=!0,ee())}function X(B,q){L=w(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){j||b||(j=!0,V(E))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var se=y;y=q;try{return B()}finally{y=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var se=y;y=B;try{return q()}finally{y=se}},t.unstable_scheduleCallback=function(B,q,se){var D=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?D+se:D):se=D,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=se+G,B={id:p++,callback:q,priorityLevel:B,startTime:se,expirationTime:G,sortIndex:-1},se>D?(B.sortIndex=se,e(f,B),s(h)===null&&B===s(f)&&(N?(S(L),L=-1):N=!0,X(O,se-D))):(B.sortIndex=G,e(h,B),j||b||(j=!0,V(E))),B},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(B){var q=y;return function(){var se=y;y=q;try{return B.apply(this,arguments)}finally{y=se}}}})(Ld)),Ld}var dg;function e1(){return dg||(dg=1,Id.exports=Zj()),Id.exports}var ug;function t1(){if(ug)return Ut;ug=1;var t=oh(),e=e1();function s(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function l(i,a){c(i,a),c(i+"Capture",a)}function c(i,a){for(o[i]=a,i=0;i<a.length;i++)n.add(a[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(i){return h.call(g,i)?!0:h.call(p,i)?!1:f.test(i)?g[i]=!0:(p[i]=!0,!1)}function b(i,a,u,m){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,a,u,m){if(a===null||typeof a>"u"||b(i,a,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function N(i,a,u,m,x,v,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=v,this.removeEmptyString=k}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){w[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];w[a]=new N(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){w[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){w[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){w[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){w[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){w[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){w[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){w[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function _(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(S,_);w[a]=new N(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(S,_);w[a]=new N(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(S,_);w[a]=new N(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){w[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),w.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){w[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function T(i,a,u,m){var x=w.hasOwnProperty(a)?w[a]:null;(x!==null?x.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(j(a,u,x,m)&&(u=null),m||x===null?y(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):x.mustUseProperty?i[x.propertyName]=u===null?x.type===3?!1:"":u:(a=x.attributeName,m=x.attributeNamespace,u===null?i.removeAttribute(a):(x=x.type,u=x===3||x===4&&u===!0?"":""+u,m?i.setAttributeNS(m,a,u):i.setAttribute(a,u))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),$=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),Z=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),B=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var se=Object.assign,D;function G(i){if(D===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);D=a&&a[1]||""}return`
`+D+i}var xe=!1;function ge(i,a){if(!i||xe)return"";xe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var m=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){m=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){m=Y}i()}}catch(Y){if(Y&&m&&typeof Y.stack=="string"){for(var x=Y.stack.split(`
`),v=m.stack.split(`
`),k=x.length-1,P=v.length-1;1<=k&&0<=P&&x[k]!==v[P];)P--;for(;1<=k&&0<=P;k--,P--)if(x[k]!==v[P]){if(k!==1||P!==1)do if(k--,P--,0>P||x[k]!==v[P]){var A=`
`+x[k].replace(" at new "," at ");return i.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",i.displayName)),A}while(1<=k&&0<=P);break}}}finally{xe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?G(i):""}function Se(i){switch(i.tag){case 5:return G(i.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return i=ge(i.type,!1),i;case 11:return i=ge(i.type.render,!1),i;case 1:return i=ge(i.type,!0),i;default:return""}}function we(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case $:return"Portal";case M:return"Profiler";case L:return"StrictMode";case ee:return"Suspense";case de:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Z:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case re:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case he:return a=i.displayName||null,a!==null?a:we(i.type)||"Memo";case V:a=i._payload,i=i._init;try{return we(i(a))}catch{}}return null}function K(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function F(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ne(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Q(i){var a=ne(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return x.call(this)},set:function(k){m=""+k,v.call(this,k)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function W(i){i._valueTracker||(i._valueTracker=Q(i))}function J(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),m="";return i&&(m=ne(i)?i.checked?"true":"false":i.value),i=m,i!==u?(a.setValue(i),!0):!1}function ie(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ue(i,a){var u=a.checked;return se({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ke(i,a){var u=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;u=F(a.value!=null?a.value:u),i._wrapperState={initialChecked:m,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ye(i,a){a=a.checked,a!=null&&T(i,"checked",a,!1)}function Re(i,a){ye(i,a);var u=F(a.value),m=a.type;if(u!=null)m==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Yt(i,a.type,u):a.hasOwnProperty("defaultValue")&&Yt(i,a.type,F(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Ke(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Yt(i,a,u){(a!=="number"||ie(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Kt=Array.isArray;function ps(i,a,u,m){if(i=i.options,a){a={};for(var x=0;x<u.length;x++)a["$"+u[x]]=!0;for(u=0;u<i.length;u++)x=a.hasOwnProperty("$"+i[u].value),i[u].selected!==x&&(i[u].selected=x),x&&m&&(i[u].defaultSelected=!0)}else{for(u=""+F(u),a=null,x=0;x<i.length;x++){if(i[x].value===u){i[x].selected=!0,m&&(i[x].defaultSelected=!0);return}a!==null||i[x].disabled||(a=i[x])}a!==null&&(a.selected=!0)}}function pi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(s(91));return se({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function pf(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(s(92));if(Kt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:F(u)}}function gf(i,a){var u=F(a.value),m=F(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),m!=null&&(i.defaultValue=""+m)}function xf(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function yf(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wl(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?yf(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Lo,vf=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,m,x){MSApp.execUnsafeLocalFunction(function(){return i(a,u,m,x)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Lo.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function hr(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jb=["Webkit","ms","Moz","O"];Object.keys(fr).forEach(function(i){Jb.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),fr[a]=fr[i]})});function bf(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||fr.hasOwnProperty(i)&&fr[i]?(""+a).trim():a+"px"}function wf(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var m=u.indexOf("--")===0,x=bf(u,a[u],m);u==="float"&&(u="cssFloat"),m?i.setProperty(u,x):i[u]=x}}var Zb=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(i,a){if(a){if(Zb[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(s(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(s(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(s(61))}if(a.style!=null&&typeof a.style!="object")throw Error(s(62))}}function ql(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function Kl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gl=null,gi=null,xi=null;function jf(i){if(i=Rr(i)){if(typeof Gl!="function")throw Error(s(280));var a=i.stateNode;a&&(a=oa(a),Gl(i.stateNode,i.type,a))}}function Nf(i){gi?xi?xi.push(i):xi=[i]:gi=i}function Sf(){if(gi){var i=gi,a=xi;if(xi=gi=null,jf(i),a)for(i=0;i<a.length;i++)jf(a[i])}}function kf(i,a){return i(a)}function Cf(){}var Ql=!1;function _f(i,a,u){if(Ql)return i(a,u);Ql=!0;try{return kf(i,a,u)}finally{Ql=!1,(gi!==null||xi!==null)&&(Cf(),Sf())}}function mr(i,a){var u=i.stateNode;if(u===null)return null;var m=oa(u);if(m===null)return null;u=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var Xl=!1;if(d)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{Xl=!1}function ew(i,a,u,m,x,v,k,P,A){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(u,Y)}catch(ae){this.onError(ae)}}var gr=!1,Fo=null,Vo=!1,Jl=null,tw={onError:function(i){gr=!0,Fo=i}};function sw(i,a,u,m,x,v,k,P,A){gr=!1,Fo=null,ew.apply(tw,arguments)}function nw(i,a,u,m,x,v,k,P,A){if(sw.apply(this,arguments),gr){if(gr){var Y=Fo;gr=!1,Fo=null}else throw Error(s(198));Vo||(Vo=!0,Jl=Y)}}function Ln(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Pf(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Mf(i){if(Ln(i)!==i)throw Error(s(188))}function iw(i){var a=i.alternate;if(!a){if(a=Ln(i),a===null)throw Error(s(188));return a!==i?null:i}for(var u=i,m=a;;){var x=u.return;if(x===null)break;var v=x.alternate;if(v===null){if(m=x.return,m!==null){u=m;continue}break}if(x.child===v.child){for(v=x.child;v;){if(v===u)return Mf(x),i;if(v===m)return Mf(x),a;v=v.sibling}throw Error(s(188))}if(u.return!==m.return)u=x,m=v;else{for(var k=!1,P=x.child;P;){if(P===u){k=!0,u=x,m=v;break}if(P===m){k=!0,m=x,u=v;break}P=P.sibling}if(!k){for(P=v.child;P;){if(P===u){k=!0,u=v,m=x;break}if(P===m){k=!0,m=v,u=x;break}P=P.sibling}if(!k)throw Error(s(189))}}if(u.alternate!==m)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:a}function Tf(i){return i=iw(i),i!==null?Ef(i):null}function Ef(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ef(i);if(a!==null)return a;i=i.sibling}return null}var Of=e.unstable_scheduleCallback,Df=e.unstable_cancelCallback,rw=e.unstable_shouldYield,ow=e.unstable_requestPaint,it=e.unstable_now,aw=e.unstable_getCurrentPriorityLevel,Zl=e.unstable_ImmediatePriority,Af=e.unstable_UserBlockingPriority,zo=e.unstable_NormalPriority,lw=e.unstable_LowPriority,Rf=e.unstable_IdlePriority,Bo=null,_s=null;function cw(i){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(Bo,i,void 0,(i.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:hw,dw=Math.log,uw=Math.LN2;function hw(i){return i>>>=0,i===0?32:31-(dw(i)/uw|0)|0}var $o=64,Uo=4194304;function xr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Wo(i,a){var u=i.pendingLanes;if(u===0)return 0;var m=0,x=i.suspendedLanes,v=i.pingedLanes,k=u&268435455;if(k!==0){var P=k&~x;P!==0?m=xr(P):(v&=k,v!==0&&(m=xr(v)))}else k=u&~x,k!==0?m=xr(k):v!==0&&(m=xr(v));if(m===0)return 0;if(a!==0&&a!==m&&(a&x)===0&&(x=m&-m,v=a&-a,x>=v||x===16&&(v&4194240)!==0))return a;if((m&4)!==0&&(m|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)u=31-gs(a),x=1<<u,m|=i[u],a&=~x;return m}function fw(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mw(i,a){for(var u=i.suspendedLanes,m=i.pingedLanes,x=i.expirationTimes,v=i.pendingLanes;0<v;){var k=31-gs(v),P=1<<k,A=x[k];A===-1?((P&u)===0||(P&m)!==0)&&(x[k]=fw(P,a)):A<=a&&(i.expiredLanes|=P),v&=~P}}function ec(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function If(){var i=$o;return $o<<=1,($o&4194240)===0&&($o=64),i}function tc(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function yr(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-gs(a),i[a]=u}function pw(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<u;){var x=31-gs(u),v=1<<x;a[x]=0,m[x]=-1,i[x]=-1,u&=~v}}function sc(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var m=31-gs(u),x=1<<m;x&a|i[m]&a&&(i[m]|=a),u&=~x}}var Fe=0;function Lf(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ff,nc,Vf,zf,Bf,ic=!1,Ho=[],sn=null,nn=null,rn=null,vr=new Map,br=new Map,on=[],gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(i,a){switch(i){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":vr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(a.pointerId)}}function wr(i,a,u,m,x,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:m,nativeEvent:v,targetContainers:[x]},a!==null&&(a=Rr(a),a!==null&&nc(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),i)}function xw(i,a,u,m,x){switch(a){case"focusin":return sn=wr(sn,i,a,u,m,x),!0;case"dragenter":return nn=wr(nn,i,a,u,m,x),!0;case"mouseover":return rn=wr(rn,i,a,u,m,x),!0;case"pointerover":var v=x.pointerId;return vr.set(v,wr(vr.get(v)||null,i,a,u,m,x)),!0;case"gotpointercapture":return v=x.pointerId,br.set(v,wr(br.get(v)||null,i,a,u,m,x)),!0}return!1}function Uf(i){var a=Fn(i.target);if(a!==null){var u=Ln(a);if(u!==null){if(a=u.tag,a===13){if(a=Pf(u),a!==null){i.blockedOn=a,Bf(i.priority,function(){Vf(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qo(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=oc(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);Yl=m,u.target.dispatchEvent(m),Yl=null}else return a=Rr(u),a!==null&&nc(a),i.blockedOn=u,!1;a.shift()}return!0}function Wf(i,a,u){qo(i)&&u.delete(a)}function yw(){ic=!1,sn!==null&&qo(sn)&&(sn=null),nn!==null&&qo(nn)&&(nn=null),rn!==null&&qo(rn)&&(rn=null),vr.forEach(Wf),br.forEach(Wf)}function jr(i,a){i.blockedOn===a&&(i.blockedOn=null,ic||(ic=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yw)))}function Nr(i){function a(x){return jr(x,i)}if(0<Ho.length){jr(Ho[0],i);for(var u=1;u<Ho.length;u++){var m=Ho[u];m.blockedOn===i&&(m.blockedOn=null)}}for(sn!==null&&jr(sn,i),nn!==null&&jr(nn,i),rn!==null&&jr(rn,i),vr.forEach(a),br.forEach(a),u=0;u<on.length;u++)m=on[u],m.blockedOn===i&&(m.blockedOn=null);for(;0<on.length&&(u=on[0],u.blockedOn===null);)Uf(u),u.blockedOn===null&&on.shift()}var yi=O.ReactCurrentBatchConfig,Yo=!0;function vw(i,a,u,m){var x=Fe,v=yi.transition;yi.transition=null;try{Fe=1,rc(i,a,u,m)}finally{Fe=x,yi.transition=v}}function bw(i,a,u,m){var x=Fe,v=yi.transition;yi.transition=null;try{Fe=4,rc(i,a,u,m)}finally{Fe=x,yi.transition=v}}function rc(i,a,u,m){if(Yo){var x=oc(i,a,u,m);if(x===null)Nc(i,a,m,Ko,u),$f(i,m);else if(xw(x,i,a,u,m))m.stopPropagation();else if($f(i,m),a&4&&-1<gw.indexOf(i)){for(;x!==null;){var v=Rr(x);if(v!==null&&Ff(v),v=oc(i,a,u,m),v===null&&Nc(i,a,m,Ko,u),v===x)break;x=v}x!==null&&m.stopPropagation()}else Nc(i,a,m,null,u)}}var Ko=null;function oc(i,a,u,m){if(Ko=null,i=Kl(m),i=Fn(i),i!==null)if(a=Ln(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Pf(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Ko=i,null}function Hf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aw()){case Zl:return 1;case Af:return 4;case zo:case lw:return 16;case Rf:return 536870912;default:return 16}default:return 16}}var an=null,ac=null,Go=null;function qf(){if(Go)return Go;var i,a=ac,u=a.length,m,x="value"in an?an.value:an.textContent,v=x.length;for(i=0;i<u&&a[i]===x[i];i++);var k=u-i;for(m=1;m<=k&&a[u-m]===x[v-m];m++);return Go=x.slice(i,1<m?1-m:void 0)}function Qo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Xo(){return!0}function Yf(){return!1}function Gt(i){function a(u,m,x,v,k){this._reactName=u,this._targetInst=x,this.type=m,this.nativeEvent=v,this.target=k,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(u=i[P],this[P]=u?u(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Xo:Yf,this.isPropagationStopped=Yf,this}return se(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),a}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Gt(vi),Sr=se({},vi,{view:0,detail:0}),ww=Gt(Sr),cc,dc,kr,Jo=se({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==kr&&(kr&&i.type==="mousemove"?(cc=i.screenX-kr.screenX,dc=i.screenY-kr.screenY):dc=cc=0,kr=i),cc)},movementY:function(i){return"movementY"in i?i.movementY:dc}}),Kf=Gt(Jo),jw=se({},Jo,{dataTransfer:0}),Nw=Gt(jw),Sw=se({},Sr,{relatedTarget:0}),uc=Gt(Sw),kw=se({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cw=Gt(kw),_w=se({},vi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Pw=Gt(_w),Mw=se({},vi,{data:0}),Gf=Gt(Mw),Tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dw(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Ow[i])?!!a[i]:!1}function hc(){return Dw}var Aw=se({},Sr,{key:function(i){if(i.key){var a=Tw[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Qo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ew[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hc,charCode:function(i){return i.type==="keypress"?Qo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rw=Gt(Aw),Iw=se({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=Gt(Iw),Lw=se({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hc}),Fw=Gt(Lw),Vw=se({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zw=Gt(Vw),Bw=se({},Jo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$w=Gt(Bw),Uw=[9,13,27,32],fc=d&&"CompositionEvent"in window,Cr=null;d&&"documentMode"in document&&(Cr=document.documentMode);var Ww=d&&"TextEvent"in window&&!Cr,Xf=d&&(!fc||Cr&&8<Cr&&11>=Cr),Jf=" ",Zf=!1;function em(i,a){switch(i){case"keyup":return Uw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var bi=!1;function Hw(i,a){switch(i){case"compositionend":return tm(a);case"keypress":return a.which!==32?null:(Zf=!0,Jf);case"textInput":return i=a.data,i===Jf&&Zf?null:i;default:return null}}function qw(i,a){if(bi)return i==="compositionend"||!fc&&em(i,a)?(i=qf(),Go=ac=an=null,bi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xf&&a.locale!=="ko"?null:a.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Yw[i.type]:a==="textarea"}function nm(i,a,u,m){Nf(m),a=na(a,"onChange"),0<a.length&&(u=new lc("onChange","change",null,u,m),i.push({event:u,listeners:a}))}var _r=null,Pr=null;function Kw(i){wm(i,0)}function Zo(i){var a=ki(i);if(J(a))return i}function Gw(i,a){if(i==="change")return a}var im=!1;if(d){var mc;if(d){var pc="oninput"in document;if(!pc){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),pc=typeof rm.oninput=="function"}mc=pc}else mc=!1;im=mc&&(!document.documentMode||9<document.documentMode)}function om(){_r&&(_r.detachEvent("onpropertychange",am),Pr=_r=null)}function am(i){if(i.propertyName==="value"&&Zo(Pr)){var a=[];nm(a,Pr,i,Kl(i)),_f(Kw,a)}}function Qw(i,a,u){i==="focusin"?(om(),_r=a,Pr=u,_r.attachEvent("onpropertychange",am)):i==="focusout"&&om()}function Xw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zo(Pr)}function Jw(i,a){if(i==="click")return Zo(a)}function Zw(i,a){if(i==="input"||i==="change")return Zo(a)}function ej(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var xs=typeof Object.is=="function"?Object.is:ej;function Mr(i,a){if(xs(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),m=Object.keys(a);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var x=u[m];if(!h.call(a,x)||!xs(i[x],a[x]))return!1}return!0}function lm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cm(i,a){var u=lm(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=a&&m>=a)return{node:u,offset:a-i};i=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=lm(u)}}function dm(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dm(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function um(){for(var i=window,a=ie();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=ie(i.document)}return a}function gc(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function tj(i){var a=um(),u=i.focusedElem,m=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&dm(u.ownerDocument.documentElement,u)){if(m!==null&&gc(u)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var x=u.textContent.length,v=Math.min(m.start,x);m=m.end===void 0?v:Math.min(m.end,x),!i.extend&&v>m&&(x=m,m=v,v=x),x=cm(u,v);var k=cm(u,m);x&&k&&(i.rangeCount!==1||i.anchorNode!==x.node||i.anchorOffset!==x.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),i.removeAllRanges(),v>m?(i.addRange(a),i.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var sj=d&&"documentMode"in document&&11>=document.documentMode,wi=null,xc=null,Tr=null,yc=!1;function hm(i,a,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;yc||wi==null||wi!==ie(m)||(m=wi,"selectionStart"in m&&gc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Tr&&Mr(Tr,m)||(Tr=m,m=na(xc,"onSelect"),0<m.length&&(a=new lc("onSelect","select",null,a,u),i.push({event:a,listeners:m}),a.target=wi)))}function ea(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var ji={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},vc={},fm={};d&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function ta(i){if(vc[i])return vc[i];if(!ji[i])return i;var a=ji[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in fm)return vc[i]=a[u];return i}var mm=ta("animationend"),pm=ta("animationiteration"),gm=ta("animationstart"),xm=ta("transitionend"),ym=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(i,a){ym.set(i,a),l(a,[i])}for(var bc=0;bc<vm.length;bc++){var wc=vm[bc],nj=wc.toLowerCase(),ij=wc[0].toUpperCase()+wc.slice(1);ln(nj,"on"+ij)}ln(mm,"onAnimationEnd"),ln(pm,"onAnimationIteration"),ln(gm,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(xm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function bm(i,a,u){var m=i.type||"unknown-event";i.currentTarget=u,nw(m,a,void 0,i),i.currentTarget=null}function wm(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],x=m.event;m=m.listeners;e:{var v=void 0;if(a)for(var k=m.length-1;0<=k;k--){var P=m[k],A=P.instance,Y=P.currentTarget;if(P=P.listener,A!==v&&x.isPropagationStopped())break e;bm(x,P,Y),v=A}else for(k=0;k<m.length;k++){if(P=m[k],A=P.instance,Y=P.currentTarget,P=P.listener,A!==v&&x.isPropagationStopped())break e;bm(x,P,Y),v=A}}}if(Vo)throw i=Jl,Vo=!1,Jl=null,i}function He(i,a){var u=a[Mc];u===void 0&&(u=a[Mc]=new Set);var m=i+"__bubble";u.has(m)||(jm(a,i,2,!1),u.add(m))}function jc(i,a,u){var m=0;a&&(m|=4),jm(u,i,m,a)}var sa="_reactListening"+Math.random().toString(36).slice(2);function Or(i){if(!i[sa]){i[sa]=!0,n.forEach(function(u){u!=="selectionchange"&&(rj.has(u)||jc(u,!1,i),jc(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[sa]||(a[sa]=!0,jc("selectionchange",!1,a))}}function jm(i,a,u,m){switch(Hf(a)){case 1:var x=vw;break;case 4:x=bw;break;default:x=rc}u=x.bind(null,a,u,i),x=void 0,!Xl||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),m?x!==void 0?i.addEventListener(a,u,{capture:!0,passive:x}):i.addEventListener(a,u,!0):x!==void 0?i.addEventListener(a,u,{passive:x}):i.addEventListener(a,u,!1)}function Nc(i,a,u,m,x){var v=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var P=m.stateNode.containerInfo;if(P===x||P.nodeType===8&&P.parentNode===x)break;if(k===4)for(k=m.return;k!==null;){var A=k.tag;if((A===3||A===4)&&(A=k.stateNode.containerInfo,A===x||A.nodeType===8&&A.parentNode===x))return;k=k.return}for(;P!==null;){if(k=Fn(P),k===null)return;if(A=k.tag,A===5||A===6){m=v=k;continue e}P=P.parentNode}}m=m.return}_f(function(){var Y=v,ae=Kl(u),le=[];e:{var oe=ym.get(i);if(oe!==void 0){var fe=lc,pe=i;switch(i){case"keypress":if(Qo(u)===0)break e;case"keydown":case"keyup":fe=Rw;break;case"focusin":pe="focus",fe=uc;break;case"focusout":pe="blur",fe=uc;break;case"beforeblur":case"afterblur":fe=uc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Fw;break;case mm:case pm:case gm:fe=Cw;break;case xm:fe=zw;break;case"scroll":fe=ww;break;case"wheel":fe=$w;break;case"copy":case"cut":case"paste":fe=Pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Qf}var ve=(a&4)!==0,rt=!ve&&i==="scroll",U=ve?oe!==null?oe+"Capture":null:oe;ve=[];for(var I=Y,H;I!==null;){H=I;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,U!==null&&(ce=mr(I,U),ce!=null&&ve.push(Dr(I,ce,H)))),rt)break;I=I.return}0<ve.length&&(oe=new fe(oe,pe,null,u,ae),le.push({event:oe,listeners:ve}))}}if((a&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",oe&&u!==Yl&&(pe=u.relatedTarget||u.fromElement)&&(Fn(pe)||pe[Ls]))break e;if((fe||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,fe?(pe=u.relatedTarget||u.toElement,fe=Y,pe=pe?Fn(pe):null,pe!==null&&(rt=Ln(pe),pe!==rt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(fe=null,pe=Y),fe!==pe)){if(ve=Kf,ce="onMouseLeave",U="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(ve=Qf,ce="onPointerLeave",U="onPointerEnter",I="pointer"),rt=fe==null?oe:ki(fe),H=pe==null?oe:ki(pe),oe=new ve(ce,I+"leave",fe,u,ae),oe.target=rt,oe.relatedTarget=H,ce=null,Fn(ae)===Y&&(ve=new ve(U,I+"enter",pe,u,ae),ve.target=H,ve.relatedTarget=rt,ce=ve),rt=ce,fe&&pe)t:{for(ve=fe,U=pe,I=0,H=ve;H;H=Ni(H))I++;for(H=0,ce=U;ce;ce=Ni(ce))H++;for(;0<I-H;)ve=Ni(ve),I--;for(;0<H-I;)U=Ni(U),H--;for(;I--;){if(ve===U||U!==null&&ve===U.alternate)break t;ve=Ni(ve),U=Ni(U)}ve=null}else ve=null;fe!==null&&Nm(le,oe,fe,ve,!1),pe!==null&&rt!==null&&Nm(le,rt,pe,ve,!0)}}e:{if(oe=Y?ki(Y):window,fe=oe.nodeName&&oe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&oe.type==="file")var be=Gw;else if(sm(oe))if(im)be=Zw;else{be=Xw;var je=Qw}else(fe=oe.nodeName)&&fe.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(be=Jw);if(be&&(be=be(i,Y))){nm(le,be,u,ae);break e}je&&je(i,oe,Y),i==="focusout"&&(je=oe._wrapperState)&&je.controlled&&oe.type==="number"&&Yt(oe,"number",oe.value)}switch(je=Y?ki(Y):window,i){case"focusin":(sm(je)||je.contentEditable==="true")&&(wi=je,xc=Y,Tr=null);break;case"focusout":Tr=xc=wi=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,hm(le,u,ae);break;case"selectionchange":if(sj)break;case"keydown":case"keyup":hm(le,u,ae)}var Ne;if(fc)e:{switch(i){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else bi?em(i,u)&&(_e="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(_e="onCompositionStart");_e&&(Xf&&u.locale!=="ko"&&(bi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&bi&&(Ne=qf()):(an=ae,ac="value"in an?an.value:an.textContent,bi=!0)),je=na(Y,_e),0<je.length&&(_e=new Gf(_e,i,null,u,ae),le.push({event:_e,listeners:je}),Ne?_e.data=Ne:(Ne=tm(u),Ne!==null&&(_e.data=Ne)))),(Ne=Ww?Hw(i,u):qw(i,u))&&(Y=na(Y,"onBeforeInput"),0<Y.length&&(ae=new Gf("onBeforeInput","beforeinput",null,u,ae),le.push({event:ae,listeners:Y}),ae.data=Ne))}wm(le,a)})}function Dr(i,a,u){return{instance:i,listener:a,currentTarget:u}}function na(i,a){for(var u=a+"Capture",m=[];i!==null;){var x=i,v=x.stateNode;x.tag===5&&v!==null&&(x=v,v=mr(i,u),v!=null&&m.unshift(Dr(i,v,x)),v=mr(i,a),v!=null&&m.push(Dr(i,v,x))),i=i.return}return m}function Ni(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Nm(i,a,u,m,x){for(var v=a._reactName,k=[];u!==null&&u!==m;){var P=u,A=P.alternate,Y=P.stateNode;if(A!==null&&A===m)break;P.tag===5&&Y!==null&&(P=Y,x?(A=mr(u,v),A!=null&&k.unshift(Dr(u,A,P))):x||(A=mr(u,v),A!=null&&k.push(Dr(u,A,P)))),u=u.return}k.length!==0&&i.push({event:a,listeners:k})}var oj=/\r\n?/g,aj=/\u0000|\uFFFD/g;function Sm(i){return(typeof i=="string"?i:""+i).replace(oj,`
`).replace(aj,"")}function ia(i,a,u){if(a=Sm(a),Sm(i)!==a&&u)throw Error(s(425))}function ra(){}var Sc=null,kc=null;function Cc(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,lj=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,cj=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(i){return km.resolve(null).then(i).catch(dj)}:_c;function dj(i){setTimeout(function(){throw i})}function Pc(i,a){var u=a,m=0;do{var x=u.nextSibling;if(i.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(m===0){i.removeChild(x),Nr(a);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=x}while(u);Nr(a)}function cn(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Cm(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Ps="__reactFiber$"+Si,Ar="__reactProps$"+Si,Ls="__reactContainer$"+Si,Mc="__reactEvents$"+Si,uj="__reactListeners$"+Si,hj="__reactHandles$"+Si;function Fn(i){var a=i[Ps];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Ls]||u[Ps]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Cm(i);i!==null;){if(u=i[Ps])return u;i=Cm(i)}return a}i=u,u=i.parentNode}return null}function Rr(i){return i=i[Ps]||i[Ls],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ki(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(s(33))}function oa(i){return i[Ar]||null}var Tc=[],Ci=-1;function dn(i){return{current:i}}function qe(i){0>Ci||(i.current=Tc[Ci],Tc[Ci]=null,Ci--)}function Ue(i,a){Ci++,Tc[Ci]=i.current,i.current=a}var un={},kt=dn(un),Ft=dn(!1),Vn=un;function _i(i,a){var u=i.type.contextTypes;if(!u)return un;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var x={},v;for(v in u)x[v]=a[v];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=x),x}function Vt(i){return i=i.childContextTypes,i!=null}function aa(){qe(Ft),qe(kt)}function _m(i,a,u){if(kt.current!==un)throw Error(s(168));Ue(kt,a),Ue(Ft,u)}function Pm(i,a,u){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var x in m)if(!(x in a))throw Error(s(108,K(i)||"Unknown",x));return se({},u,m)}function la(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||un,Vn=kt.current,Ue(kt,i),Ue(Ft,Ft.current),!0}function Mm(i,a,u){var m=i.stateNode;if(!m)throw Error(s(169));u?(i=Pm(i,a,Vn),m.__reactInternalMemoizedMergedChildContext=i,qe(Ft),qe(kt),Ue(kt,i)):qe(Ft),Ue(Ft,u)}var Fs=null,ca=!1,Ec=!1;function Tm(i){Fs===null?Fs=[i]:Fs.push(i)}function fj(i){ca=!0,Tm(i)}function hn(){if(!Ec&&Fs!==null){Ec=!0;var i=0,a=Fe;try{var u=Fs;for(Fe=1;i<u.length;i++){var m=u[i];do m=m(!0);while(m!==null)}Fs=null,ca=!1}catch(x){throw Fs!==null&&(Fs=Fs.slice(i+1)),Of(Zl,hn),x}finally{Fe=a,Ec=!1}}return null}var Pi=[],Mi=0,da=null,ua=0,ts=[],ss=0,zn=null,Vs=1,zs="";function Bn(i,a){Pi[Mi++]=ua,Pi[Mi++]=da,da=i,ua=a}function Em(i,a,u){ts[ss++]=Vs,ts[ss++]=zs,ts[ss++]=zn,zn=i;var m=Vs;i=zs;var x=32-gs(m)-1;m&=~(1<<x),u+=1;var v=32-gs(a)+x;if(30<v){var k=x-x%5;v=(m&(1<<k)-1).toString(32),m>>=k,x-=k,Vs=1<<32-gs(a)+x|u<<x|m,zs=v+i}else Vs=1<<v|u<<x|m,zs=i}function Oc(i){i.return!==null&&(Bn(i,1),Em(i,1,0))}function Dc(i){for(;i===da;)da=Pi[--Mi],Pi[Mi]=null,ua=Pi[--Mi],Pi[Mi]=null;for(;i===zn;)zn=ts[--ss],ts[ss]=null,zs=ts[--ss],ts[ss]=null,Vs=ts[--ss],ts[ss]=null}var Qt=null,Xt=null,Ge=!1,ys=null;function Om(i,a){var u=os(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function Dm(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Qt=i,Xt=cn(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Qt=i,Xt=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=zn!==null?{id:Vs,overflow:zs}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=os(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Qt=i,Xt=null,!0):!1;default:return!1}}function Ac(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Rc(i){if(Ge){var a=Xt;if(a){var u=a;if(!Dm(i,a)){if(Ac(i))throw Error(s(418));a=cn(u.nextSibling);var m=Qt;a&&Dm(i,a)?Om(m,u):(i.flags=i.flags&-4097|2,Ge=!1,Qt=i)}}else{if(Ac(i))throw Error(s(418));i.flags=i.flags&-4097|2,Ge=!1,Qt=i}}}function Am(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Qt=i}function ha(i){if(i!==Qt)return!1;if(!Ge)return Am(i),Ge=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Cc(i.type,i.memoizedProps)),a&&(a=Xt)){if(Ac(i))throw Rm(),Error(s(418));for(;a;)Om(i,a),a=cn(a.nextSibling)}if(Am(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Xt=cn(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Xt=null}}else Xt=Qt?cn(i.stateNode.nextSibling):null;return!0}function Rm(){for(var i=Xt;i;)i=cn(i.nextSibling)}function Ti(){Xt=Qt=null,Ge=!1}function Ic(i){ys===null?ys=[i]:ys.push(i)}var mj=O.ReactCurrentBatchConfig;function Ir(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(s(309));var m=u.stateNode}if(!m)throw Error(s(147,i));var x=m,v=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(k){var P=x.refs;k===null?delete P[v]:P[v]=k},a._stringRef=v,a)}if(typeof i!="string")throw Error(s(284));if(!u._owner)throw Error(s(290,i))}return i}function fa(i,a){throw i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Im(i){var a=i._init;return a(i._payload)}function Lm(i){function a(U,I){if(i){var H=U.deletions;H===null?(U.deletions=[I],U.flags|=16):H.push(I)}}function u(U,I){if(!i)return null;for(;I!==null;)a(U,I),I=I.sibling;return null}function m(U,I){for(U=new Map;I!==null;)I.key!==null?U.set(I.key,I):U.set(I.index,I),I=I.sibling;return U}function x(U,I){return U=bn(U,I),U.index=0,U.sibling=null,U}function v(U,I,H){return U.index=H,i?(H=U.alternate,H!==null?(H=H.index,H<I?(U.flags|=2,I):H):(U.flags|=2,I)):(U.flags|=1048576,I)}function k(U){return i&&U.alternate===null&&(U.flags|=2),U}function P(U,I,H,ce){return I===null||I.tag!==6?(I=_d(H,U.mode,ce),I.return=U,I):(I=x(I,H),I.return=U,I)}function A(U,I,H,ce){var be=H.type;return be===z?ae(U,I,H.props.children,ce,H.key):I!==null&&(I.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Im(be)===I.type)?(ce=x(I,H.props),ce.ref=Ir(U,I,H),ce.return=U,ce):(ce=La(H.type,H.key,H.props,null,U.mode,ce),ce.ref=Ir(U,I,H),ce.return=U,ce)}function Y(U,I,H,ce){return I===null||I.tag!==4||I.stateNode.containerInfo!==H.containerInfo||I.stateNode.implementation!==H.implementation?(I=Pd(H,U.mode,ce),I.return=U,I):(I=x(I,H.children||[]),I.return=U,I)}function ae(U,I,H,ce,be){return I===null||I.tag!==7?(I=Gn(H,U.mode,ce,be),I.return=U,I):(I=x(I,H),I.return=U,I)}function le(U,I,H){if(typeof I=="string"&&I!==""||typeof I=="number")return I=_d(""+I,U.mode,H),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return H=La(I.type,I.key,I.props,null,U.mode,H),H.ref=Ir(U,null,I),H.return=U,H;case $:return I=Pd(I,U.mode,H),I.return=U,I;case V:var ce=I._init;return le(U,ce(I._payload),H)}if(Kt(I)||q(I))return I=Gn(I,U.mode,H,null),I.return=U,I;fa(U,I)}return null}function oe(U,I,H,ce){var be=I!==null?I.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return be!==null?null:P(U,I,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return H.key===be?A(U,I,H,ce):null;case $:return H.key===be?Y(U,I,H,ce):null;case V:return be=H._init,oe(U,I,be(H._payload),ce)}if(Kt(H)||q(H))return be!==null?null:ae(U,I,H,ce,null);fa(U,H)}return null}function fe(U,I,H,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return U=U.get(H)||null,P(I,U,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case E:return U=U.get(ce.key===null?H:ce.key)||null,A(I,U,ce,be);case $:return U=U.get(ce.key===null?H:ce.key)||null,Y(I,U,ce,be);case V:var je=ce._init;return fe(U,I,H,je(ce._payload),be)}if(Kt(ce)||q(ce))return U=U.get(H)||null,ae(I,U,ce,be,null);fa(I,ce)}return null}function pe(U,I,H,ce){for(var be=null,je=null,Ne=I,_e=I=0,yt=null;Ne!==null&&_e<H.length;_e++){Ne.index>_e?(yt=Ne,Ne=null):yt=Ne.sibling;var Ie=oe(U,Ne,H[_e],ce);if(Ie===null){Ne===null&&(Ne=yt);break}i&&Ne&&Ie.alternate===null&&a(U,Ne),I=v(Ie,I,_e),je===null?be=Ie:je.sibling=Ie,je=Ie,Ne=yt}if(_e===H.length)return u(U,Ne),Ge&&Bn(U,_e),be;if(Ne===null){for(;_e<H.length;_e++)Ne=le(U,H[_e],ce),Ne!==null&&(I=v(Ne,I,_e),je===null?be=Ne:je.sibling=Ne,je=Ne);return Ge&&Bn(U,_e),be}for(Ne=m(U,Ne);_e<H.length;_e++)yt=fe(Ne,U,_e,H[_e],ce),yt!==null&&(i&&yt.alternate!==null&&Ne.delete(yt.key===null?_e:yt.key),I=v(yt,I,_e),je===null?be=yt:je.sibling=yt,je=yt);return i&&Ne.forEach(function(wn){return a(U,wn)}),Ge&&Bn(U,_e),be}function ve(U,I,H,ce){var be=q(H);if(typeof be!="function")throw Error(s(150));if(H=be.call(H),H==null)throw Error(s(151));for(var je=be=null,Ne=I,_e=I=0,yt=null,Ie=H.next();Ne!==null&&!Ie.done;_e++,Ie=H.next()){Ne.index>_e?(yt=Ne,Ne=null):yt=Ne.sibling;var wn=oe(U,Ne,Ie.value,ce);if(wn===null){Ne===null&&(Ne=yt);break}i&&Ne&&wn.alternate===null&&a(U,Ne),I=v(wn,I,_e),je===null?be=wn:je.sibling=wn,je=wn,Ne=yt}if(Ie.done)return u(U,Ne),Ge&&Bn(U,_e),be;if(Ne===null){for(;!Ie.done;_e++,Ie=H.next())Ie=le(U,Ie.value,ce),Ie!==null&&(I=v(Ie,I,_e),je===null?be=Ie:je.sibling=Ie,je=Ie);return Ge&&Bn(U,_e),be}for(Ne=m(U,Ne);!Ie.done;_e++,Ie=H.next())Ie=fe(Ne,U,_e,Ie.value,ce),Ie!==null&&(i&&Ie.alternate!==null&&Ne.delete(Ie.key===null?_e:Ie.key),I=v(Ie,I,_e),je===null?be=Ie:je.sibling=Ie,je=Ie);return i&&Ne.forEach(function(Yj){return a(U,Yj)}),Ge&&Bn(U,_e),be}function rt(U,I,H,ce){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case E:e:{for(var be=H.key,je=I;je!==null;){if(je.key===be){if(be=H.type,be===z){if(je.tag===7){u(U,je.sibling),I=x(je,H.props.children),I.return=U,U=I;break e}}else if(je.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===V&&Im(be)===je.type){u(U,je.sibling),I=x(je,H.props),I.ref=Ir(U,je,H),I.return=U,U=I;break e}u(U,je);break}else a(U,je);je=je.sibling}H.type===z?(I=Gn(H.props.children,U.mode,ce,H.key),I.return=U,U=I):(ce=La(H.type,H.key,H.props,null,U.mode,ce),ce.ref=Ir(U,I,H),ce.return=U,U=ce)}return k(U);case $:e:{for(je=H.key;I!==null;){if(I.key===je)if(I.tag===4&&I.stateNode.containerInfo===H.containerInfo&&I.stateNode.implementation===H.implementation){u(U,I.sibling),I=x(I,H.children||[]),I.return=U,U=I;break e}else{u(U,I);break}else a(U,I);I=I.sibling}I=Pd(H,U.mode,ce),I.return=U,U=I}return k(U);case V:return je=H._init,rt(U,I,je(H._payload),ce)}if(Kt(H))return pe(U,I,H,ce);if(q(H))return ve(U,I,H,ce);fa(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,I!==null&&I.tag===6?(u(U,I.sibling),I=x(I,H),I.return=U,U=I):(u(U,I),I=_d(H,U.mode,ce),I.return=U,U=I),k(U)):u(U,I)}return rt}var Ei=Lm(!0),Fm=Lm(!1),ma=dn(null),pa=null,Oi=null,Lc=null;function Fc(){Lc=Oi=pa=null}function Vc(i){var a=ma.current;qe(ma),i._currentValue=a}function zc(i,a,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===u)break;i=i.return}}function Di(i,a){pa=i,Lc=Oi=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(zt=!0),i.firstContext=null)}function ns(i){var a=i._currentValue;if(Lc!==i)if(i={context:i,memoizedValue:a,next:null},Oi===null){if(pa===null)throw Error(s(308));Oi=i,pa.dependencies={lanes:0,firstContext:i}}else Oi=Oi.next=i;return a}var $n=null;function Bc(i){$n===null?$n=[i]:$n.push(i)}function Vm(i,a,u,m){var x=a.interleaved;return x===null?(u.next=u,Bc(a)):(u.next=x.next,x.next=u),a.interleaved=u,Bs(i,m)}function Bs(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var fn=!1;function $c(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function $s(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function mn(i,a,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(De&2)!==0){var x=m.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),m.pending=a,Bs(i,u)}return x=m.interleaved,x===null?(a.next=a,Bc(m)):(a.next=x.next,x.next=a),m.interleaved=a,Bs(i,u)}function ga(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,u|=m,a.lanes=u,sc(i,u)}}function Bm(i,a){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var x=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?x=v=k:v=v.next=k,u=u.next}while(u!==null);v===null?x=v=a:v=v.next=a}else x=v=a;u={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:v,shared:m.shared,effects:m.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function xa(i,a,u,m){var x=i.updateQueue;fn=!1;var v=x.firstBaseUpdate,k=x.lastBaseUpdate,P=x.shared.pending;if(P!==null){x.shared.pending=null;var A=P,Y=A.next;A.next=null,k===null?v=Y:k.next=Y,k=A;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,P=ae.lastBaseUpdate,P!==k&&(P===null?ae.firstBaseUpdate=Y:P.next=Y,ae.lastBaseUpdate=A))}if(v!==null){var le=x.baseState;k=0,ae=Y=A=null,P=v;do{var oe=P.lane,fe=P.eventTime;if((m&oe)===oe){ae!==null&&(ae=ae.next={eventTime:fe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var pe=i,ve=P;switch(oe=a,fe=u,ve.tag){case 1:if(pe=ve.payload,typeof pe=="function"){le=pe.call(fe,le,oe);break e}le=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ve.payload,oe=typeof pe=="function"?pe.call(fe,le,oe):pe,oe==null)break e;le=se({},le,oe);break e;case 2:fn=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,oe=x.effects,oe===null?x.effects=[P]:oe.push(P))}else fe={eventTime:fe,lane:oe,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ae===null?(Y=ae=fe,A=le):ae=ae.next=fe,k|=oe;if(P=P.next,P===null){if(P=x.shared.pending,P===null)break;oe=P,P=oe.next,oe.next=null,x.lastBaseUpdate=oe,x.shared.pending=null}}while(!0);if(ae===null&&(A=le),x.baseState=A,x.firstBaseUpdate=Y,x.lastBaseUpdate=ae,a=x.shared.interleaved,a!==null){x=a;do k|=x.lane,x=x.next;while(x!==a)}else v===null&&(x.shared.lanes=0);Hn|=k,i.lanes=k,i.memoizedState=le}}function $m(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],x=m.callback;if(x!==null){if(m.callback=null,m=u,typeof x!="function")throw Error(s(191,x));x.call(m)}}}var Lr={},Ms=dn(Lr),Fr=dn(Lr),Vr=dn(Lr);function Un(i){if(i===Lr)throw Error(s(174));return i}function Uc(i,a){switch(Ue(Vr,a),Ue(Fr,i),Ue(Ms,Lr),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Wl(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Wl(a,i)}qe(Ms),Ue(Ms,a)}function Ai(){qe(Ms),qe(Fr),qe(Vr)}function Um(i){Un(Vr.current);var a=Un(Ms.current),u=Wl(a,i.type);a!==u&&(Ue(Fr,i),Ue(Ms,u))}function Wc(i){Fr.current===i&&(qe(Ms),qe(Fr))}var Xe=dn(0);function ya(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hc=[];function qc(){for(var i=0;i<Hc.length;i++)Hc[i]._workInProgressVersionPrimary=null;Hc.length=0}var va=O.ReactCurrentDispatcher,Yc=O.ReactCurrentBatchConfig,Wn=0,Je=null,ut=null,gt=null,ba=!1,zr=!1,Br=0,pj=0;function Ct(){throw Error(s(321))}function Kc(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!xs(i[u],a[u]))return!1;return!0}function Gc(i,a,u,m,x,v){if(Wn=v,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,va.current=i===null||i.memoizedState===null?vj:bj,i=u(m,x),zr){v=0;do{if(zr=!1,Br=0,25<=v)throw Error(s(301));v+=1,gt=ut=null,a.updateQueue=null,va.current=wj,i=u(m,x)}while(zr)}if(va.current=Na,a=ut!==null&&ut.next!==null,Wn=0,gt=ut=Je=null,ba=!1,a)throw Error(s(300));return i}function Qc(){var i=Br!==0;return Br=0,i}function Ts(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Je.memoizedState=gt=i:gt=gt.next=i,gt}function is(){if(ut===null){var i=Je.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var a=gt===null?Je.memoizedState:gt.next;if(a!==null)gt=a,ut=i;else{if(i===null)throw Error(s(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?Je.memoizedState=gt=i:gt=gt.next=i}return gt}function $r(i,a){return typeof a=="function"?a(i):a}function Xc(i){var a=is(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var m=ut,x=m.baseQueue,v=u.pending;if(v!==null){if(x!==null){var k=x.next;x.next=v.next,v.next=k}m.baseQueue=x=v,u.pending=null}if(x!==null){v=x.next,m=m.baseState;var P=k=null,A=null,Y=v;do{var ae=Y.lane;if((Wn&ae)===ae)A!==null&&(A=A.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),m=Y.hasEagerState?Y.eagerState:i(m,Y.action);else{var le={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};A===null?(P=A=le,k=m):A=A.next=le,Je.lanes|=ae,Hn|=ae}Y=Y.next}while(Y!==null&&Y!==v);A===null?k=m:A.next=P,xs(m,a.memoizedState)||(zt=!0),a.memoizedState=m,a.baseState=k,a.baseQueue=A,u.lastRenderedState=m}if(i=u.interleaved,i!==null){x=i;do v=x.lane,Je.lanes|=v,Hn|=v,x=x.next;while(x!==i)}else x===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Jc(i){var a=is(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var m=u.dispatch,x=u.pending,v=a.memoizedState;if(x!==null){u.pending=null;var k=x=x.next;do v=i(v,k.action),k=k.next;while(k!==x);xs(v,a.memoizedState)||(zt=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,m]}function Wm(){}function Hm(i,a){var u=Je,m=is(),x=a(),v=!xs(m.memoizedState,x);if(v&&(m.memoizedState=x,zt=!0),m=m.queue,Zc(Km.bind(null,u,m,i),[i]),m.getSnapshot!==a||v||gt!==null&&gt.memoizedState.tag&1){if(u.flags|=2048,Ur(9,Ym.bind(null,u,m,x,a),void 0,null),xt===null)throw Error(s(349));(Wn&30)!==0||qm(u,a,x)}return x}function qm(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Je.updateQueue,a===null?(a={lastEffect:null,stores:null},Je.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Ym(i,a,u,m){a.value=u,a.getSnapshot=m,Gm(a)&&Qm(i)}function Km(i,a,u){return u(function(){Gm(a)&&Qm(i)})}function Gm(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!xs(i,u)}catch{return!0}}function Qm(i){var a=Bs(i,1);a!==null&&js(a,i,1,-1)}function Xm(i){var a=Ts();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:i},a.queue=i,i=i.dispatch=yj.bind(null,Je,i),[a.memoizedState,i]}function Ur(i,a,u,m){return i={tag:i,create:a,destroy:u,deps:m,next:null},a=Je.updateQueue,a===null?(a={lastEffect:null,stores:null},Je.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,a.lastEffect=i)),i}function Jm(){return is().memoizedState}function wa(i,a,u,m){var x=Ts();Je.flags|=i,x.memoizedState=Ur(1|a,u,void 0,m===void 0?null:m)}function ja(i,a,u,m){var x=is();m=m===void 0?null:m;var v=void 0;if(ut!==null){var k=ut.memoizedState;if(v=k.destroy,m!==null&&Kc(m,k.deps)){x.memoizedState=Ur(a,u,v,m);return}}Je.flags|=i,x.memoizedState=Ur(1|a,u,v,m)}function Zm(i,a){return wa(8390656,8,i,a)}function Zc(i,a){return ja(2048,8,i,a)}function ep(i,a){return ja(4,2,i,a)}function tp(i,a){return ja(4,4,i,a)}function sp(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function np(i,a,u){return u=u!=null?u.concat([i]):null,ja(4,4,sp.bind(null,a,i),u)}function ed(){}function ip(i,a){var u=is();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&Kc(a,m[1])?m[0]:(u.memoizedState=[i,a],i)}function rp(i,a){var u=is();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&Kc(a,m[1])?m[0]:(i=i(),u.memoizedState=[i,a],i)}function op(i,a,u){return(Wn&21)===0?(i.baseState&&(i.baseState=!1,zt=!0),i.memoizedState=u):(xs(u,a)||(u=If(),Je.lanes|=u,Hn|=u,i.baseState=!0),a)}function gj(i,a){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var m=Yc.transition;Yc.transition={};try{i(!1),a()}finally{Fe=u,Yc.transition=m}}function ap(){return is().memoizedState}function xj(i,a,u){var m=yn(i);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},lp(i))cp(a,u);else if(u=Vm(i,a,u,m),u!==null){var x=Rt();js(u,i,m,x),dp(u,a,m)}}function yj(i,a,u){var m=yn(i),x={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(lp(i))cp(a,x);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var k=a.lastRenderedState,P=v(k,u);if(x.hasEagerState=!0,x.eagerState=P,xs(P,k)){var A=a.interleaved;A===null?(x.next=x,Bc(a)):(x.next=A.next,A.next=x),a.interleaved=x;return}}catch{}u=Vm(i,a,x,m),u!==null&&(x=Rt(),js(u,i,m,x),dp(u,a,m))}}function lp(i){var a=i.alternate;return i===Je||a!==null&&a===Je}function cp(i,a){zr=ba=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function dp(i,a,u){if((u&4194240)!==0){var m=a.lanes;m&=i.pendingLanes,u|=m,a.lanes=u,sc(i,u)}}var Na={readContext:ns,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},vj={readContext:ns,useCallback:function(i,a){return Ts().memoizedState=[i,a===void 0?null:a],i},useContext:ns,useEffect:Zm,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,wa(4194308,4,sp.bind(null,a,i),u)},useLayoutEffect:function(i,a){return wa(4194308,4,i,a)},useInsertionEffect:function(i,a){return wa(4,2,i,a)},useMemo:function(i,a){var u=Ts();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var m=Ts();return a=u!==void 0?u(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=xj.bind(null,Je,i),[m.memoizedState,i]},useRef:function(i){var a=Ts();return i={current:i},a.memoizedState=i},useState:Xm,useDebugValue:ed,useDeferredValue:function(i){return Ts().memoizedState=i},useTransition:function(){var i=Xm(!1),a=i[0];return i=gj.bind(null,i[1]),Ts().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var m=Je,x=Ts();if(Ge){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),xt===null)throw Error(s(349));(Wn&30)!==0||qm(m,a,u)}x.memoizedState=u;var v={value:u,getSnapshot:a};return x.queue=v,Zm(Km.bind(null,m,v,i),[i]),m.flags|=2048,Ur(9,Ym.bind(null,m,v,u,a),void 0,null),u},useId:function(){var i=Ts(),a=xt.identifierPrefix;if(Ge){var u=zs,m=Vs;u=(m&~(1<<32-gs(m)-1)).toString(32)+u,a=":"+a+"R"+u,u=Br++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=pj++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},bj={readContext:ns,useCallback:ip,useContext:ns,useEffect:Zc,useImperativeHandle:np,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:rp,useReducer:Xc,useRef:Jm,useState:function(){return Xc($r)},useDebugValue:ed,useDeferredValue:function(i){var a=is();return op(a,ut.memoizedState,i)},useTransition:function(){var i=Xc($r)[0],a=is().memoizedState;return[i,a]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:ap,unstable_isNewReconciler:!1},wj={readContext:ns,useCallback:ip,useContext:ns,useEffect:Zc,useImperativeHandle:np,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:rp,useReducer:Jc,useRef:Jm,useState:function(){return Jc($r)},useDebugValue:ed,useDeferredValue:function(i){var a=is();return ut===null?a.memoizedState=i:op(a,ut.memoizedState,i)},useTransition:function(){var i=Jc($r)[0],a=is().memoizedState;return[i,a]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:ap,unstable_isNewReconciler:!1};function vs(i,a){if(i&&i.defaultProps){a=se({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function td(i,a,u,m){a=i.memoizedState,u=u(m,a),u=u==null?a:se({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Sa={isMounted:function(i){return(i=i._reactInternals)?Ln(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var m=Rt(),x=yn(i),v=$s(m,x);v.payload=a,u!=null&&(v.callback=u),a=mn(i,v,x),a!==null&&(js(a,i,x,m),ga(a,i,x))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var m=Rt(),x=yn(i),v=$s(m,x);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=mn(i,v,x),a!==null&&(js(a,i,x,m),ga(a,i,x))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Rt(),m=yn(i),x=$s(u,m);x.tag=2,a!=null&&(x.callback=a),a=mn(i,x,m),a!==null&&(js(a,i,m,u),ga(a,i,m))}};function up(i,a,u,m,x,v,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,v,k):a.prototype&&a.prototype.isPureReactComponent?!Mr(u,m)||!Mr(x,v):!0}function hp(i,a,u){var m=!1,x=un,v=a.contextType;return typeof v=="object"&&v!==null?v=ns(v):(x=Vt(a)?Vn:kt.current,m=a.contextTypes,v=(m=m!=null)?_i(i,x):un),a=new a(u,v),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Sa,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=x,i.__reactInternalMemoizedMaskedChildContext=v),a}function fp(i,a,u,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,m),a.state!==i&&Sa.enqueueReplaceState(a,a.state,null)}function sd(i,a,u,m){var x=i.stateNode;x.props=u,x.state=i.memoizedState,x.refs={},$c(i);var v=a.contextType;typeof v=="object"&&v!==null?x.context=ns(v):(v=Vt(a)?Vn:kt.current,x.context=_i(i,v)),x.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(td(i,a,v,u),x.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&Sa.enqueueReplaceState(x,x.state,null),xa(i,u,x,m),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308)}function Ri(i,a){try{var u="",m=a;do u+=Se(m),m=m.return;while(m);var x=u}catch(v){x=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:a,stack:x,digest:null}}function nd(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function id(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var jj=typeof WeakMap=="function"?WeakMap:Map;function mp(i,a,u){u=$s(-1,u),u.tag=3,u.payload={element:null};var m=a.value;return u.callback=function(){Ea||(Ea=!0,vd=m),id(i,a)},u}function pp(i,a,u){u=$s(-1,u),u.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var x=a.value;u.payload=function(){return m(x)},u.callback=function(){id(i,a)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){id(i,a),typeof m!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),u}function gp(i,a,u){var m=i.pingCache;if(m===null){m=i.pingCache=new jj;var x=new Set;m.set(a,x)}else x=m.get(a),x===void 0&&(x=new Set,m.set(a,x));x.has(u)||(x.add(u),i=Ij.bind(null,i,a,u),a.then(i,i))}function xp(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function yp(i,a,u,m,x){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=$s(-1,1),a.tag=2,mn(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=x,i)}var Nj=O.ReactCurrentOwner,zt=!1;function At(i,a,u,m){a.child=i===null?Fm(a,null,u,m):Ei(a,i.child,u,m)}function vp(i,a,u,m,x){u=u.render;var v=a.ref;return Di(a,x),m=Gc(i,a,u,m,v,x),u=Qc(),i!==null&&!zt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~x,Us(i,a,x)):(Ge&&u&&Oc(a),a.flags|=1,At(i,a,m,x),a.child)}function bp(i,a,u,m,x){if(i===null){var v=u.type;return typeof v=="function"&&!Cd(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,wp(i,a,v,m,x)):(i=La(u.type,null,m,a,a.mode,x),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,(i.lanes&x)===0){var k=v.memoizedProps;if(u=u.compare,u=u!==null?u:Mr,u(k,m)&&i.ref===a.ref)return Us(i,a,x)}return a.flags|=1,i=bn(v,m),i.ref=a.ref,i.return=a,a.child=i}function wp(i,a,u,m,x){if(i!==null){var v=i.memoizedProps;if(Mr(v,m)&&i.ref===a.ref)if(zt=!1,a.pendingProps=m=v,(i.lanes&x)!==0)(i.flags&131072)!==0&&(zt=!0);else return a.lanes=i.lanes,Us(i,a,x)}return rd(i,a,u,m,x)}function jp(i,a,u){var m=a.pendingProps,x=m.children,v=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Li,Jt),Jt|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Ue(Li,Jt),Jt|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=v!==null?v.baseLanes:u,Ue(Li,Jt),Jt|=m}else v!==null?(m=v.baseLanes|u,a.memoizedState=null):m=u,Ue(Li,Jt),Jt|=m;return At(i,a,x,u),a.child}function Np(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function rd(i,a,u,m,x){var v=Vt(u)?Vn:kt.current;return v=_i(a,v),Di(a,x),u=Gc(i,a,u,m,v,x),m=Qc(),i!==null&&!zt?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~x,Us(i,a,x)):(Ge&&m&&Oc(a),a.flags|=1,At(i,a,u,x),a.child)}function Sp(i,a,u,m,x){if(Vt(u)){var v=!0;la(a)}else v=!1;if(Di(a,x),a.stateNode===null)Ca(i,a),hp(a,u,m),sd(a,u,m,x),m=!0;else if(i===null){var k=a.stateNode,P=a.memoizedProps;k.props=P;var A=k.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=ns(Y):(Y=Vt(u)?Vn:kt.current,Y=_i(a,Y));var ae=u.getDerivedStateFromProps,le=typeof ae=="function"||typeof k.getSnapshotBeforeUpdate=="function";le||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==m||A!==Y)&&fp(a,k,m,Y),fn=!1;var oe=a.memoizedState;k.state=oe,xa(a,m,k,x),A=a.memoizedState,P!==m||oe!==A||Ft.current||fn?(typeof ae=="function"&&(td(a,u,ae,m),A=a.memoizedState),(P=fn||up(a,u,P,m,oe,A,Y))?(le||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=A),k.props=m,k.state=A,k.context=Y,m=P):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{k=a.stateNode,zm(i,a),P=a.memoizedProps,Y=a.type===a.elementType?P:vs(a.type,P),k.props=Y,le=a.pendingProps,oe=k.context,A=u.contextType,typeof A=="object"&&A!==null?A=ns(A):(A=Vt(u)?Vn:kt.current,A=_i(a,A));var fe=u.getDerivedStateFromProps;(ae=typeof fe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==le||oe!==A)&&fp(a,k,m,A),fn=!1,oe=a.memoizedState,k.state=oe,xa(a,m,k,x);var pe=a.memoizedState;P!==le||oe!==pe||Ft.current||fn?(typeof fe=="function"&&(td(a,u,fe,m),pe=a.memoizedState),(Y=fn||up(a,u,Y,m,oe,pe,A)||!1)?(ae||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,pe,A),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,pe,A)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=pe),k.props=m,k.state=pe,k.context=A,m=Y):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),m=!1)}return od(i,a,u,m,v,x)}function od(i,a,u,m,x,v){Np(i,a);var k=(a.flags&128)!==0;if(!m&&!k)return x&&Mm(a,u,!1),Us(i,a,v);m=a.stateNode,Nj.current=a;var P=k&&typeof u.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&k?(a.child=Ei(a,i.child,null,v),a.child=Ei(a,null,P,v)):At(i,a,P,v),a.memoizedState=m.state,x&&Mm(a,u,!0),a.child}function kp(i){var a=i.stateNode;a.pendingContext?_m(i,a.pendingContext,a.pendingContext!==a.context):a.context&&_m(i,a.context,!1),Uc(i,a.containerInfo)}function Cp(i,a,u,m,x){return Ti(),Ic(x),a.flags|=256,At(i,a,u,m),a.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ld(i){return{baseLanes:i,cachePool:null,transitions:null}}function _p(i,a,u){var m=a.pendingProps,x=Xe.current,v=!1,k=(a.flags&128)!==0,P;if((P=k)||(P=i!==null&&i.memoizedState===null?!1:(x&2)!==0),P?(v=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(x|=1),Ue(Xe,x&1),i===null)return Rc(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(k=m.children,i=m.fallback,v?(m=a.mode,v=a.child,k={mode:"hidden",children:k},(m&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=k):v=Fa(k,m,0,null),i=Gn(i,m,u,null),v.return=a,i.return=a,v.sibling=i,a.child=v,a.child.memoizedState=ld(u),a.memoizedState=ad,i):cd(a,k));if(x=i.memoizedState,x!==null&&(P=x.dehydrated,P!==null))return Sj(i,a,k,m,P,x,u);if(v){v=m.fallback,k=a.mode,x=i.child,P=x.sibling;var A={mode:"hidden",children:m.children};return(k&1)===0&&a.child!==x?(m=a.child,m.childLanes=0,m.pendingProps=A,a.deletions=null):(m=bn(x,A),m.subtreeFlags=x.subtreeFlags&14680064),P!==null?v=bn(P,v):(v=Gn(v,k,u,null),v.flags|=2),v.return=a,m.return=a,m.sibling=v,a.child=m,m=v,v=a.child,k=i.child.memoizedState,k=k===null?ld(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},v.memoizedState=k,v.childLanes=i.childLanes&~u,a.memoizedState=ad,m}return v=i.child,i=v.sibling,m=bn(v,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=u),m.return=a,m.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=m,a.memoizedState=null,m}function cd(i,a){return a=Fa({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function ka(i,a,u,m){return m!==null&&Ic(m),Ei(a,i.child,null,u),i=cd(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Sj(i,a,u,m,x,v,k){if(u)return a.flags&256?(a.flags&=-257,m=nd(Error(s(422))),ka(i,a,k,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(v=m.fallback,x=a.mode,m=Fa({mode:"visible",children:m.children},x,0,null),v=Gn(v,x,k,null),v.flags|=2,m.return=a,v.return=a,m.sibling=v,a.child=m,(a.mode&1)!==0&&Ei(a,i.child,null,k),a.child.memoizedState=ld(k),a.memoizedState=ad,v);if((a.mode&1)===0)return ka(i,a,k,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var P=m.dgst;return m=P,v=Error(s(419)),m=nd(v,m,void 0),ka(i,a,k,m)}if(P=(k&i.childLanes)!==0,zt||P){if(m=xt,m!==null){switch(k&-k){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|k))!==0?0:x,x!==0&&x!==v.retryLane&&(v.retryLane=x,Bs(i,x),js(m,i,x,-1))}return kd(),m=nd(Error(s(421))),ka(i,a,k,m)}return x.data==="$?"?(a.flags|=128,a.child=i.child,a=Lj.bind(null,i),x._reactRetry=a,null):(i=v.treeContext,Xt=cn(x.nextSibling),Qt=a,Ge=!0,ys=null,i!==null&&(ts[ss++]=Vs,ts[ss++]=zs,ts[ss++]=zn,Vs=i.id,zs=i.overflow,zn=a),a=cd(a,m.children),a.flags|=4096,a)}function Pp(i,a,u){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),zc(i.return,a,u)}function dd(i,a,u,m,x){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:x}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=m,v.tail=u,v.tailMode=x)}function Mp(i,a,u){var m=a.pendingProps,x=m.revealOrder,v=m.tail;if(At(i,a,m.children,u),m=Xe.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pp(i,u,a);else if(i.tag===19)Pp(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ue(Xe,m),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(u=a.child,x=null;u!==null;)i=u.alternate,i!==null&&ya(i)===null&&(x=u),u=u.sibling;u=x,u===null?(x=a.child,a.child=null):(x=u.sibling,u.sibling=null),dd(a,!1,x,u,v);break;case"backwards":for(u=null,x=a.child,a.child=null;x!==null;){if(i=x.alternate,i!==null&&ya(i)===null){a.child=x;break}i=x.sibling,x.sibling=u,u=x,x=i}dd(a,!0,u,null,v);break;case"together":dd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ca(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Us(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Hn|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,u=bn(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=bn(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function kj(i,a,u){switch(a.tag){case 3:kp(a),Ti();break;case 5:Um(a);break;case 1:Vt(a.type)&&la(a);break;case 4:Uc(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,x=a.memoizedProps.value;Ue(ma,m._currentValue),m._currentValue=x;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(Ue(Xe,Xe.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?_p(i,a,u):(Ue(Xe,Xe.current&1),i=Us(i,a,u),i!==null?i.sibling:null);Ue(Xe,Xe.current&1);break;case 19:if(m=(u&a.childLanes)!==0,(i.flags&128)!==0){if(m)return Mp(i,a,u);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ue(Xe,Xe.current),m)break;return null;case 22:case 23:return a.lanes=0,jp(i,a,u)}return Us(i,a,u)}var Tp,ud,Ep,Op;Tp=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ud=function(){},Ep=function(i,a,u,m){var x=i.memoizedProps;if(x!==m){i=a.stateNode,Un(Ms.current);var v=null;switch(u){case"input":x=ue(i,x),m=ue(i,m),v=[];break;case"select":x=se({},x,{value:void 0}),m=se({},m,{value:void 0}),v=[];break;case"textarea":x=pi(i,x),m=pi(i,m),v=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=ra)}Hl(u,m);var k;u=null;for(Y in x)if(!m.hasOwnProperty(Y)&&x.hasOwnProperty(Y)&&x[Y]!=null)if(Y==="style"){var P=x[Y];for(k in P)P.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(o.hasOwnProperty(Y)?v||(v=[]):(v=v||[]).push(Y,null));for(Y in m){var A=m[Y];if(P=x?.[Y],m.hasOwnProperty(Y)&&A!==P&&(A!=null||P!=null))if(Y==="style")if(P){for(k in P)!P.hasOwnProperty(k)||A&&A.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in A)A.hasOwnProperty(k)&&P[k]!==A[k]&&(u||(u={}),u[k]=A[k])}else u||(v||(v=[]),v.push(Y,u)),u=A;else Y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,P=P?P.__html:void 0,A!=null&&P!==A&&(v=v||[]).push(Y,A)):Y==="children"?typeof A!="string"&&typeof A!="number"||(v=v||[]).push(Y,""+A):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(o.hasOwnProperty(Y)?(A!=null&&Y==="onScroll"&&He("scroll",i),v||P===A||(v=[])):(v=v||[]).push(Y,A))}u&&(v=v||[]).push("style",u);var Y=v;(a.updateQueue=Y)&&(a.flags|=4)}},Op=function(i,a,u,m){u!==m&&(a.flags|=4)};function Wr(i,a){if(!Ge)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function _t(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(a)for(var x=i.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=m,i.childLanes=u,a}function Cj(i,a,u){var m=a.pendingProps;switch(Dc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(a),null;case 1:return Vt(a.type)&&aa(),_t(a),null;case 3:return m=a.stateNode,Ai(),qe(Ft),qe(kt),qc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(ha(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ys!==null&&(jd(ys),ys=null))),ud(i,a),_t(a),null;case 5:Wc(a);var x=Un(Vr.current);if(u=a.type,i!==null&&a.stateNode!=null)Ep(i,a,u,m,x),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(s(166));return _t(a),null}if(i=Un(Ms.current),ha(a)){m=a.stateNode,u=a.type;var v=a.memoizedProps;switch(m[Ps]=a,m[Ar]=v,i=(a.mode&1)!==0,u){case"dialog":He("cancel",m),He("close",m);break;case"iframe":case"object":case"embed":He("load",m);break;case"video":case"audio":for(x=0;x<Er.length;x++)He(Er[x],m);break;case"source":He("error",m);break;case"img":case"image":case"link":He("error",m),He("load",m);break;case"details":He("toggle",m);break;case"input":ke(m,v),He("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!v.multiple},He("invalid",m);break;case"textarea":pf(m,v),He("invalid",m)}Hl(u,v),x=null;for(var k in v)if(v.hasOwnProperty(k)){var P=v[k];k==="children"?typeof P=="string"?m.textContent!==P&&(v.suppressHydrationWarning!==!0&&ia(m.textContent,P,i),x=["children",P]):typeof P=="number"&&m.textContent!==""+P&&(v.suppressHydrationWarning!==!0&&ia(m.textContent,P,i),x=["children",""+P]):o.hasOwnProperty(k)&&P!=null&&k==="onScroll"&&He("scroll",m)}switch(u){case"input":W(m),Ke(m,v,!0);break;case"textarea":W(m),xf(m);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(m.onclick=ra)}m=x,a.updateQueue=m,m!==null&&(a.flags|=4)}else{k=x.nodeType===9?x:x.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yf(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=k.createElement(u,{is:m.is}):(i=k.createElement(u),u==="select"&&(k=i,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):i=k.createElementNS(i,u),i[Ps]=a,i[Ar]=m,Tp(i,a,!1,!1),a.stateNode=i;e:{switch(k=ql(u,m),u){case"dialog":He("cancel",i),He("close",i),x=m;break;case"iframe":case"object":case"embed":He("load",i),x=m;break;case"video":case"audio":for(x=0;x<Er.length;x++)He(Er[x],i);x=m;break;case"source":He("error",i),x=m;break;case"img":case"image":case"link":He("error",i),He("load",i),x=m;break;case"details":He("toggle",i),x=m;break;case"input":ke(i,m),x=ue(i,m),He("invalid",i);break;case"option":x=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},x=se({},m,{value:void 0}),He("invalid",i);break;case"textarea":pf(i,m),x=pi(i,m),He("invalid",i);break;default:x=m}Hl(u,x),P=x;for(v in P)if(P.hasOwnProperty(v)){var A=P[v];v==="style"?wf(i,A):v==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&vf(i,A)):v==="children"?typeof A=="string"?(u!=="textarea"||A!=="")&&hr(i,A):typeof A=="number"&&hr(i,""+A):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?A!=null&&v==="onScroll"&&He("scroll",i):A!=null&&T(i,v,A,k))}switch(u){case"input":W(i),Ke(i,m,!1);break;case"textarea":W(i),xf(i);break;case"option":m.value!=null&&i.setAttribute("value",""+F(m.value));break;case"select":i.multiple=!!m.multiple,v=m.value,v!=null?ps(i,!!m.multiple,v,!1):m.defaultValue!=null&&ps(i,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(i.onclick=ra)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return _t(a),null;case 6:if(i&&a.stateNode!=null)Op(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(s(166));if(u=Un(Vr.current),Un(Ms.current),ha(a)){if(m=a.stateNode,u=a.memoizedProps,m[Ps]=a,(v=m.nodeValue!==u)&&(i=Qt,i!==null))switch(i.tag){case 3:ia(m.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ia(m.nodeValue,u,(i.mode&1)!==0)}v&&(a.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Ps]=a,a.stateNode=m}return _t(a),null;case 13:if(qe(Xe),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ge&&Xt!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Rm(),Ti(),a.flags|=98560,v=!1;else if(v=ha(a),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Ps]=a}else Ti(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),v=!1}else ys!==null&&(jd(ys),ys=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Xe.current&1)!==0?ht===0&&(ht=3):kd())),a.updateQueue!==null&&(a.flags|=4),_t(a),null);case 4:return Ai(),ud(i,a),i===null&&Or(a.stateNode.containerInfo),_t(a),null;case 10:return Vc(a.type._context),_t(a),null;case 17:return Vt(a.type)&&aa(),_t(a),null;case 19:if(qe(Xe),v=a.memoizedState,v===null)return _t(a),null;if(m=(a.flags&128)!==0,k=v.rendering,k===null)if(m)Wr(v,!1);else{if(ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(k=ya(i),k!==null){for(a.flags|=128,Wr(v,!1),m=k.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=u,u=a.child;u!==null;)v=u,i=m,v.flags&=14680066,k=v.alternate,k===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=k.childLanes,v.lanes=k.lanes,v.child=k.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=k.memoizedProps,v.memoizedState=k.memoizedState,v.updateQueue=k.updateQueue,v.type=k.type,i=k.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ue(Xe,Xe.current&1|2),a.child}i=i.sibling}v.tail!==null&&it()>Fi&&(a.flags|=128,m=!0,Wr(v,!1),a.lanes=4194304)}else{if(!m)if(i=ya(k),i!==null){if(a.flags|=128,m=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Wr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!Ge)return _t(a),null}else 2*it()-v.renderingStartTime>Fi&&u!==1073741824&&(a.flags|=128,m=!0,Wr(v,!1),a.lanes=4194304);v.isBackwards?(k.sibling=a.child,a.child=k):(u=v.last,u!==null?u.sibling=k:a.child=k,v.last=k)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=it(),a.sibling=null,u=Xe.current,Ue(Xe,m?u&1|2:u&1),a):(_t(a),null);case 22:case 23:return Sd(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Jt&1073741824)!==0&&(_t(a),a.subtreeFlags&6&&(a.flags|=8192)):_t(a),null;case 24:return null;case 25:return null}throw Error(s(156,a.tag))}function _j(i,a){switch(Dc(a),a.tag){case 1:return Vt(a.type)&&aa(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ai(),qe(Ft),qe(kt),qc(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Wc(a),null;case 13:if(qe(Xe),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ti()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return qe(Xe),null;case 4:return Ai(),null;case 10:return Vc(a.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var _a=!1,Pt=!1,Pj=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ii(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){st(i,a,m)}else u.current=null}function hd(i,a,u){try{u()}catch(m){st(i,a,m)}}var Dp=!1;function Mj(i,a){if(Sc=Yo,i=um(),gc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var x=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var k=0,P=-1,A=-1,Y=0,ae=0,le=i,oe=null;t:for(;;){for(var fe;le!==u||x!==0&&le.nodeType!==3||(P=k+x),le!==v||m!==0&&le.nodeType!==3||(A=k+m),le.nodeType===3&&(k+=le.nodeValue.length),(fe=le.firstChild)!==null;)oe=le,le=fe;for(;;){if(le===i)break t;if(oe===u&&++Y===x&&(P=k),oe===v&&++ae===m&&(A=k),(fe=le.nextSibling)!==null)break;le=oe,oe=le.parentNode}le=fe}u=P===-1||A===-1?null:{start:P,end:A}}else u=null}u=u||{start:0,end:0}}else u=null;for(kc={focusedElem:i,selectionRange:u},Yo=!1,me=a;me!==null;)if(a=me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,me=i;else for(;me!==null;){a=me;try{var pe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ve=pe.memoizedProps,rt=pe.memoizedState,U=a.stateNode,I=U.getSnapshotBeforeUpdate(a.elementType===a.type?ve:vs(a.type,ve),rt);U.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var H=a.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ce){st(a,a.return,ce)}if(i=a.sibling,i!==null){i.return=a.return,me=i;break}me=a.return}return pe=Dp,Dp=!1,pe}function Hr(i,a,u){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&i)===i){var v=x.destroy;x.destroy=void 0,v!==void 0&&hd(a,u,v)}x=x.next}while(x!==m)}}function Pa(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var m=u.create;u.destroy=m()}u=u.next}while(u!==a)}}function fd(i){var a=i.ref;if(a!==null){var u=i.stateNode;i.tag,i=u,typeof a=="function"?a(i):a.current=i}}function Ap(i){var a=i.alternate;a!==null&&(i.alternate=null,Ap(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Ps],delete a[Ar],delete a[Mc],delete a[uj],delete a[hj])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Rp(i){return i.tag===5||i.tag===3||i.tag===4}function Ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Rp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function md(i,a,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ra));else if(m!==4&&(i=i.child,i!==null))for(md(i,a,u),i=i.sibling;i!==null;)md(i,a,u),i=i.sibling}function pd(i,a,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(pd(i,a,u),i=i.sibling;i!==null;)pd(i,a,u),i=i.sibling}var bt=null,bs=!1;function pn(i,a,u){for(u=u.child;u!==null;)Lp(i,a,u),u=u.sibling}function Lp(i,a,u){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(Bo,u)}catch{}switch(u.tag){case 5:Pt||Ii(u,a);case 6:var m=bt,x=bs;bt=null,pn(i,a,u),bt=m,bs=x,bt!==null&&(bs?(i=bt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):bt.removeChild(u.stateNode));break;case 18:bt!==null&&(bs?(i=bt,u=u.stateNode,i.nodeType===8?Pc(i.parentNode,u):i.nodeType===1&&Pc(i,u),Nr(i)):Pc(bt,u.stateNode));break;case 4:m=bt,x=bs,bt=u.stateNode.containerInfo,bs=!0,pn(i,a,u),bt=m,bs=x;break;case 0:case 11:case 14:case 15:if(!Pt&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var v=x,k=v.destroy;v=v.tag,k!==void 0&&((v&2)!==0||(v&4)!==0)&&hd(u,a,k),x=x.next}while(x!==m)}pn(i,a,u);break;case 1:if(!Pt&&(Ii(u,a),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(P){st(u,a,P)}pn(i,a,u);break;case 21:pn(i,a,u);break;case 22:u.mode&1?(Pt=(m=Pt)||u.memoizedState!==null,pn(i,a,u),Pt=m):pn(i,a,u);break;default:pn(i,a,u)}}function Fp(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Pj),a.forEach(function(m){var x=Fj.bind(null,i,m);u.has(m)||(u.add(m),m.then(x,x))})}}function ws(i,a){var u=a.deletions;if(u!==null)for(var m=0;m<u.length;m++){var x=u[m];try{var v=i,k=a,P=k;e:for(;P!==null;){switch(P.tag){case 5:bt=P.stateNode,bs=!1;break e;case 3:bt=P.stateNode.containerInfo,bs=!0;break e;case 4:bt=P.stateNode.containerInfo,bs=!0;break e}P=P.return}if(bt===null)throw Error(s(160));Lp(v,k,x),bt=null,bs=!1;var A=x.alternate;A!==null&&(A.return=null),x.return=null}catch(Y){st(x,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Vp(a,i),a=a.sibling}function Vp(i,a){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ws(a,i),Es(i),m&4){try{Hr(3,i,i.return),Pa(3,i)}catch(ve){st(i,i.return,ve)}try{Hr(5,i,i.return)}catch(ve){st(i,i.return,ve)}}break;case 1:ws(a,i),Es(i),m&512&&u!==null&&Ii(u,u.return);break;case 5:if(ws(a,i),Es(i),m&512&&u!==null&&Ii(u,u.return),i.flags&32){var x=i.stateNode;try{hr(x,"")}catch(ve){st(i,i.return,ve)}}if(m&4&&(x=i.stateNode,x!=null)){var v=i.memoizedProps,k=u!==null?u.memoizedProps:v,P=i.type,A=i.updateQueue;if(i.updateQueue=null,A!==null)try{P==="input"&&v.type==="radio"&&v.name!=null&&ye(x,v),ql(P,k);var Y=ql(P,v);for(k=0;k<A.length;k+=2){var ae=A[k],le=A[k+1];ae==="style"?wf(x,le):ae==="dangerouslySetInnerHTML"?vf(x,le):ae==="children"?hr(x,le):T(x,ae,le,Y)}switch(P){case"input":Re(x,v);break;case"textarea":gf(x,v);break;case"select":var oe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?ps(x,!!v.multiple,fe,!1):oe!==!!v.multiple&&(v.defaultValue!=null?ps(x,!!v.multiple,v.defaultValue,!0):ps(x,!!v.multiple,v.multiple?[]:"",!1))}x[Ar]=v}catch(ve){st(i,i.return,ve)}}break;case 6:if(ws(a,i),Es(i),m&4){if(i.stateNode===null)throw Error(s(162));x=i.stateNode,v=i.memoizedProps;try{x.nodeValue=v}catch(ve){st(i,i.return,ve)}}break;case 3:if(ws(a,i),Es(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Nr(a.containerInfo)}catch(ve){st(i,i.return,ve)}break;case 4:ws(a,i),Es(i);break;case 13:ws(a,i),Es(i),x=i.child,x.flags&8192&&(v=x.memoizedState!==null,x.stateNode.isHidden=v,!v||x.alternate!==null&&x.alternate.memoizedState!==null||(yd=it())),m&4&&Fp(i);break;case 22:if(ae=u!==null&&u.memoizedState!==null,i.mode&1?(Pt=(Y=Pt)||ae,ws(a,i),Pt=Y):ws(a,i),Es(i),m&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ae&&(i.mode&1)!==0)for(me=i,ae=i.child;ae!==null;){for(le=me=ae;me!==null;){switch(oe=me,fe=oe.child,oe.tag){case 0:case 11:case 14:case 15:Hr(4,oe,oe.return);break;case 1:Ii(oe,oe.return);var pe=oe.stateNode;if(typeof pe.componentWillUnmount=="function"){m=oe,u=oe.return;try{a=m,pe.props=a.memoizedProps,pe.state=a.memoizedState,pe.componentWillUnmount()}catch(ve){st(m,u,ve)}}break;case 5:Ii(oe,oe.return);break;case 22:if(oe.memoizedState!==null){$p(le);continue}}fe!==null?(fe.return=oe,me=fe):$p(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{x=le.stateNode,Y?(v=x.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(P=le.stateNode,A=le.memoizedProps.style,k=A!=null&&A.hasOwnProperty("display")?A.display:null,P.style.display=bf("display",k))}catch(ve){st(i,i.return,ve)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(ve){st(i,i.return,ve)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:ws(a,i),Es(i),m&4&&Fp(i);break;case 21:break;default:ws(a,i),Es(i)}}function Es(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Rp(u)){var m=u;break e}u=u.return}throw Error(s(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(hr(x,""),m.flags&=-33);var v=Ip(i);pd(i,v,x);break;case 3:case 4:var k=m.stateNode.containerInfo,P=Ip(i);md(i,P,k);break;default:throw Error(s(161))}}catch(A){st(i,i.return,A)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Tj(i,a,u){me=i,zp(i)}function zp(i,a,u){for(var m=(i.mode&1)!==0;me!==null;){var x=me,v=x.child;if(x.tag===22&&m){var k=x.memoizedState!==null||_a;if(!k){var P=x.alternate,A=P!==null&&P.memoizedState!==null||Pt;P=_a;var Y=Pt;if(_a=k,(Pt=A)&&!Y)for(me=x;me!==null;)k=me,A=k.child,k.tag===22&&k.memoizedState!==null?Up(x):A!==null?(A.return=k,me=A):Up(x);for(;v!==null;)me=v,zp(v),v=v.sibling;me=x,_a=P,Pt=Y}Bp(i)}else(x.subtreeFlags&8772)!==0&&v!==null?(v.return=x,me=v):Bp(i)}}function Bp(i){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Pt||Pa(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Pt)if(u===null)m.componentDidMount();else{var x=a.elementType===a.type?u.memoizedProps:vs(a.type,u.memoizedProps);m.componentDidUpdate(x,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&$m(a,v,m);break;case 3:var k=a.updateQueue;if(k!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}$m(a,k,u)}break;case 5:var P=a.stateNode;if(u===null&&a.flags&4){u=P;var A=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&u.focus();break;case"img":A.src&&(u.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Nr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Pt||a.flags&512&&fd(a)}catch(oe){st(a,a.return,oe)}}if(a===i){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function $p(i){for(;me!==null;){var a=me;if(a===i){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function Up(i){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Pa(4,a)}catch(A){st(a,u,A)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var x=a.return;try{m.componentDidMount()}catch(A){st(a,x,A)}}var v=a.return;try{fd(a)}catch(A){st(a,v,A)}break;case 5:var k=a.return;try{fd(a)}catch(A){st(a,k,A)}}}catch(A){st(a,a.return,A)}if(a===i){me=null;break}var P=a.sibling;if(P!==null){P.return=a.return,me=P;break}me=a.return}}var Ej=Math.ceil,Ma=O.ReactCurrentDispatcher,gd=O.ReactCurrentOwner,rs=O.ReactCurrentBatchConfig,De=0,xt=null,ct=null,wt=0,Jt=0,Li=dn(0),ht=0,qr=null,Hn=0,Ta=0,xd=0,Yr=null,Bt=null,yd=0,Fi=1/0,Ws=null,Ea=!1,vd=null,gn=null,Oa=!1,xn=null,Da=0,Kr=0,bd=null,Aa=-1,Ra=0;function Rt(){return(De&6)!==0?it():Aa!==-1?Aa:Aa=it()}function yn(i){return(i.mode&1)===0?1:(De&2)!==0&&wt!==0?wt&-wt:mj.transition!==null?(Ra===0&&(Ra=If()),Ra):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:Hf(i.type)),i)}function js(i,a,u,m){if(50<Kr)throw Kr=0,bd=null,Error(s(185));yr(i,u,m),((De&2)===0||i!==xt)&&(i===xt&&((De&2)===0&&(Ta|=u),ht===4&&vn(i,wt)),$t(i,m),u===1&&De===0&&(a.mode&1)===0&&(Fi=it()+500,ca&&hn()))}function $t(i,a){var u=i.callbackNode;mw(i,a);var m=Wo(i,i===xt?wt:0);if(m===0)u!==null&&Df(u),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(u!=null&&Df(u),a===1)i.tag===0?fj(Hp.bind(null,i)):Tm(Hp.bind(null,i)),cj(function(){(De&6)===0&&hn()}),u=null;else{switch(Lf(m)){case 1:u=Zl;break;case 4:u=Af;break;case 16:u=zo;break;case 536870912:u=Rf;break;default:u=zo}u=Zp(u,Wp.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Wp(i,a){if(Aa=-1,Ra=0,(De&6)!==0)throw Error(s(327));var u=i.callbackNode;if(Vi()&&i.callbackNode!==u)return null;var m=Wo(i,i===xt?wt:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||a)a=Ia(i,m);else{a=m;var x=De;De|=2;var v=Yp();(xt!==i||wt!==a)&&(Ws=null,Fi=it()+500,Yn(i,a));do try{Aj();break}catch(P){qp(i,P)}while(!0);Fc(),Ma.current=v,De=x,ct!==null?a=0:(xt=null,wt=0,a=ht)}if(a!==0){if(a===2&&(x=ec(i),x!==0&&(m=x,a=wd(i,x))),a===1)throw u=qr,Yn(i,0),vn(i,m),$t(i,it()),u;if(a===6)vn(i,m);else{if(x=i.current.alternate,(m&30)===0&&!Oj(x)&&(a=Ia(i,m),a===2&&(v=ec(i),v!==0&&(m=v,a=wd(i,v))),a===1))throw u=qr,Yn(i,0),vn(i,m),$t(i,it()),u;switch(i.finishedWork=x,i.finishedLanes=m,a){case 0:case 1:throw Error(s(345));case 2:Kn(i,Bt,Ws);break;case 3:if(vn(i,m),(m&130023424)===m&&(a=yd+500-it(),10<a)){if(Wo(i,0)!==0)break;if(x=i.suspendedLanes,(x&m)!==m){Rt(),i.pingedLanes|=i.suspendedLanes&x;break}i.timeoutHandle=_c(Kn.bind(null,i,Bt,Ws),a);break}Kn(i,Bt,Ws);break;case 4:if(vn(i,m),(m&4194240)===m)break;for(a=i.eventTimes,x=-1;0<m;){var k=31-gs(m);v=1<<k,k=a[k],k>x&&(x=k),m&=~v}if(m=x,m=it()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Ej(m/1960))-m,10<m){i.timeoutHandle=_c(Kn.bind(null,i,Bt,Ws),m);break}Kn(i,Bt,Ws);break;case 5:Kn(i,Bt,Ws);break;default:throw Error(s(329))}}}return $t(i,it()),i.callbackNode===u?Wp.bind(null,i):null}function wd(i,a){var u=Yr;return i.current.memoizedState.isDehydrated&&(Yn(i,a).flags|=256),i=Ia(i,a),i!==2&&(a=Bt,Bt=u,a!==null&&jd(a)),i}function jd(i){Bt===null?Bt=i:Bt.push.apply(Bt,i)}function Oj(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var x=u[m],v=x.getSnapshot;x=x.value;try{if(!xs(v(),x))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function vn(i,a){for(a&=~xd,a&=~Ta,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-gs(a),m=1<<u;i[u]=-1,a&=~m}}function Hp(i){if((De&6)!==0)throw Error(s(327));Vi();var a=Wo(i,0);if((a&1)===0)return $t(i,it()),null;var u=Ia(i,a);if(i.tag!==0&&u===2){var m=ec(i);m!==0&&(a=m,u=wd(i,m))}if(u===1)throw u=qr,Yn(i,0),vn(i,a),$t(i,it()),u;if(u===6)throw Error(s(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Kn(i,Bt,Ws),$t(i,it()),null}function Nd(i,a){var u=De;De|=1;try{return i(a)}finally{De=u,De===0&&(Fi=it()+500,ca&&hn())}}function qn(i){xn!==null&&xn.tag===0&&(De&6)===0&&Vi();var a=De;De|=1;var u=rs.transition,m=Fe;try{if(rs.transition=null,Fe=1,i)return i()}finally{Fe=m,rs.transition=u,De=a,(De&6)===0&&hn()}}function Sd(){Jt=Li.current,qe(Li)}function Yn(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,lj(u)),ct!==null)for(u=ct.return;u!==null;){var m=u;switch(Dc(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&aa();break;case 3:Ai(),qe(Ft),qe(kt),qc();break;case 5:Wc(m);break;case 4:Ai();break;case 13:qe(Xe);break;case 19:qe(Xe);break;case 10:Vc(m.type._context);break;case 22:case 23:Sd()}u=u.return}if(xt=i,ct=i=bn(i.current,null),wt=Jt=a,ht=0,qr=null,xd=Ta=Hn=0,Bt=Yr=null,$n!==null){for(a=0;a<$n.length;a++)if(u=$n[a],m=u.interleaved,m!==null){u.interleaved=null;var x=m.next,v=u.pending;if(v!==null){var k=v.next;v.next=x,m.next=k}u.pending=m}$n=null}return i}function qp(i,a){do{var u=ct;try{if(Fc(),va.current=Na,ba){for(var m=Je.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}ba=!1}if(Wn=0,gt=ut=Je=null,zr=!1,Br=0,gd.current=null,u===null||u.return===null){ht=1,qr=a,ct=null;break}e:{var v=i,k=u.return,P=u,A=a;if(a=wt,P.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var Y=A,ae=P,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var fe=xp(k);if(fe!==null){fe.flags&=-257,yp(fe,k,P,v,a),fe.mode&1&&gp(v,Y,a),a=fe,A=Y;var pe=a.updateQueue;if(pe===null){var ve=new Set;ve.add(A),a.updateQueue=ve}else pe.add(A);break e}else{if((a&1)===0){gp(v,Y,a),kd();break e}A=Error(s(426))}}else if(Ge&&P.mode&1){var rt=xp(k);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),yp(rt,k,P,v,a),Ic(Ri(A,P));break e}}v=A=Ri(A,P),ht!==4&&(ht=2),Yr===null?Yr=[v]:Yr.push(v),v=k;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var U=mp(v,A,a);Bm(v,U);break e;case 1:P=A;var I=v.type,H=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(gn===null||!gn.has(H)))){v.flags|=65536,a&=-a,v.lanes|=a;var ce=pp(v,P,a);Bm(v,ce);break e}}v=v.return}while(v!==null)}Gp(u)}catch(be){a=be,ct===u&&u!==null&&(ct=u=u.return);continue}break}while(!0)}function Yp(){var i=Ma.current;return Ma.current=Na,i===null?Na:i}function kd(){(ht===0||ht===3||ht===2)&&(ht=4),xt===null||(Hn&268435455)===0&&(Ta&268435455)===0||vn(xt,wt)}function Ia(i,a){var u=De;De|=2;var m=Yp();(xt!==i||wt!==a)&&(Ws=null,Yn(i,a));do try{Dj();break}catch(x){qp(i,x)}while(!0);if(Fc(),De=u,Ma.current=m,ct!==null)throw Error(s(261));return xt=null,wt=0,ht}function Dj(){for(;ct!==null;)Kp(ct)}function Aj(){for(;ct!==null&&!rw();)Kp(ct)}function Kp(i){var a=Jp(i.alternate,i,Jt);i.memoizedProps=i.pendingProps,a===null?Gp(i):ct=a,gd.current=null}function Gp(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=Cj(u,a,Jt),u!==null){ct=u;return}}else{if(u=_j(u,a),u!==null){u.flags&=32767,ct=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ht=6,ct=null;return}}if(a=a.sibling,a!==null){ct=a;return}ct=a=i}while(a!==null);ht===0&&(ht=5)}function Kn(i,a,u){var m=Fe,x=rs.transition;try{rs.transition=null,Fe=1,Rj(i,a,u,m)}finally{rs.transition=x,Fe=m}return null}function Rj(i,a,u,m){do Vi();while(xn!==null);if((De&6)!==0)throw Error(s(327));u=i.finishedWork;var x=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(s(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(pw(i,v),i===xt&&(ct=xt=null,wt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Oa||(Oa=!0,Zp(zo,function(){return Vi(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=rs.transition,rs.transition=null;var k=Fe;Fe=1;var P=De;De|=4,gd.current=null,Mj(i,u),Vp(u,i),tj(kc),Yo=!!Sc,kc=Sc=null,i.current=u,Tj(u),ow(),De=P,Fe=k,rs.transition=v}else i.current=u;if(Oa&&(Oa=!1,xn=i,Da=x),v=i.pendingLanes,v===0&&(gn=null),cw(u.stateNode),$t(i,it()),a!==null)for(m=i.onRecoverableError,u=0;u<a.length;u++)x=a[u],m(x.value,{componentStack:x.stack,digest:x.digest});if(Ea)throw Ea=!1,i=vd,vd=null,i;return(Da&1)!==0&&i.tag!==0&&Vi(),v=i.pendingLanes,(v&1)!==0?i===bd?Kr++:(Kr=0,bd=i):Kr=0,hn(),null}function Vi(){if(xn!==null){var i=Lf(Da),a=rs.transition,u=Fe;try{if(rs.transition=null,Fe=16>i?16:i,xn===null)var m=!1;else{if(i=xn,xn=null,Da=0,(De&6)!==0)throw Error(s(331));var x=De;for(De|=4,me=i.current;me!==null;){var v=me,k=v.child;if((me.flags&16)!==0){var P=v.deletions;if(P!==null){for(var A=0;A<P.length;A++){var Y=P[A];for(me=Y;me!==null;){var ae=me;switch(ae.tag){case 0:case 11:case 15:Hr(8,ae,v)}var le=ae.child;if(le!==null)le.return=ae,me=le;else for(;me!==null;){ae=me;var oe=ae.sibling,fe=ae.return;if(Ap(ae),ae===Y){me=null;break}if(oe!==null){oe.return=fe,me=oe;break}me=fe}}}var pe=v.alternate;if(pe!==null){var ve=pe.child;if(ve!==null){pe.child=null;do{var rt=ve.sibling;ve.sibling=null,ve=rt}while(ve!==null)}}me=v}}if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,me=k;else e:for(;me!==null;){if(v=me,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Hr(9,v,v.return)}var U=v.sibling;if(U!==null){U.return=v.return,me=U;break e}me=v.return}}var I=i.current;for(me=I;me!==null;){k=me;var H=k.child;if((k.subtreeFlags&2064)!==0&&H!==null)H.return=k,me=H;else e:for(k=I;me!==null;){if(P=me,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Pa(9,P)}}catch(be){st(P,P.return,be)}if(P===k){me=null;break e}var ce=P.sibling;if(ce!==null){ce.return=P.return,me=ce;break e}me=P.return}}if(De=x,hn(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(Bo,i)}catch{}m=!0}return m}finally{Fe=u,rs.transition=a}}return!1}function Qp(i,a,u){a=Ri(u,a),a=mp(i,a,1),i=mn(i,a,1),a=Rt(),i!==null&&(yr(i,1,a),$t(i,a))}function st(i,a,u){if(i.tag===3)Qp(i,i,u);else for(;a!==null;){if(a.tag===3){Qp(a,i,u);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(gn===null||!gn.has(m))){i=Ri(u,i),i=pp(a,i,1),a=mn(a,i,1),i=Rt(),a!==null&&(yr(a,1,i),$t(a,i));break}}a=a.return}}function Ij(i,a,u){var m=i.pingCache;m!==null&&m.delete(a),a=Rt(),i.pingedLanes|=i.suspendedLanes&u,xt===i&&(wt&u)===u&&(ht===4||ht===3&&(wt&130023424)===wt&&500>it()-yd?Yn(i,0):xd|=u),$t(i,a)}function Xp(i,a){a===0&&((i.mode&1)===0?a=1:(a=Uo,Uo<<=1,(Uo&130023424)===0&&(Uo=4194304)));var u=Rt();i=Bs(i,a),i!==null&&(yr(i,a,u),$t(i,u))}function Lj(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Xp(i,u)}function Fj(i,a){var u=0;switch(i.tag){case 13:var m=i.stateNode,x=i.memoizedState;x!==null&&(u=x.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(a),Xp(i,u)}var Jp;Jp=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Ft.current)zt=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return zt=!1,kj(i,a,u);zt=(i.flags&131072)!==0}else zt=!1,Ge&&(a.flags&1048576)!==0&&Em(a,ua,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Ca(i,a),i=a.pendingProps;var x=_i(a,kt.current);Di(a,u),x=Gc(null,a,m,i,x,u);var v=Qc();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Vt(m)?(v=!0,la(a)):v=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,$c(a),x.updater=Sa,a.stateNode=x,x._reactInternals=a,sd(a,m,i,u),a=od(null,a,m,!0,v,u)):(a.tag=0,Ge&&v&&Oc(a),At(null,a,x,u),a=a.child),a;case 16:m=a.elementType;e:{switch(Ca(i,a),i=a.pendingProps,x=m._init,m=x(m._payload),a.type=m,x=a.tag=zj(m),i=vs(m,i),x){case 0:a=rd(null,a,m,i,u);break e;case 1:a=Sp(null,a,m,i,u);break e;case 11:a=vp(null,a,m,i,u);break e;case 14:a=bp(null,a,m,vs(m.type,i),u);break e}throw Error(s(306,m,""))}return a;case 0:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:vs(m,x),rd(i,a,m,x,u);case 1:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:vs(m,x),Sp(i,a,m,x,u);case 3:e:{if(kp(a),i===null)throw Error(s(387));m=a.pendingProps,v=a.memoizedState,x=v.element,zm(i,a),xa(a,m,null,u);var k=a.memoizedState;if(m=k.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){x=Ri(Error(s(423)),a),a=Cp(i,a,m,u,x);break e}else if(m!==x){x=Ri(Error(s(424)),a),a=Cp(i,a,m,u,x);break e}else for(Xt=cn(a.stateNode.containerInfo.firstChild),Qt=a,Ge=!0,ys=null,u=Fm(a,null,m,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ti(),m===x){a=Us(i,a,u);break e}At(i,a,m,u)}a=a.child}return a;case 5:return Um(a),i===null&&Rc(a),m=a.type,x=a.pendingProps,v=i!==null?i.memoizedProps:null,k=x.children,Cc(m,x)?k=null:v!==null&&Cc(m,v)&&(a.flags|=32),Np(i,a),At(i,a,k,u),a.child;case 6:return i===null&&Rc(a),null;case 13:return _p(i,a,u);case 4:return Uc(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=Ei(a,null,m,u):At(i,a,m,u),a.child;case 11:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:vs(m,x),vp(i,a,m,x,u);case 7:return At(i,a,a.pendingProps,u),a.child;case 8:return At(i,a,a.pendingProps.children,u),a.child;case 12:return At(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(m=a.type._context,x=a.pendingProps,v=a.memoizedProps,k=x.value,Ue(ma,m._currentValue),m._currentValue=k,v!==null)if(xs(v.value,k)){if(v.children===x.children&&!Ft.current){a=Us(i,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var P=v.dependencies;if(P!==null){k=v.child;for(var A=P.firstContext;A!==null;){if(A.context===m){if(v.tag===1){A=$s(-1,u&-u),A.tag=2;var Y=v.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?A.next=A:(A.next=ae.next,ae.next=A),Y.pending=A}}v.lanes|=u,A=v.alternate,A!==null&&(A.lanes|=u),zc(v.return,u,a),P.lanes|=u;break}A=A.next}}else if(v.tag===10)k=v.type===a.type?null:v.child;else if(v.tag===18){if(k=v.return,k===null)throw Error(s(341));k.lanes|=u,P=k.alternate,P!==null&&(P.lanes|=u),zc(k,u,a),k=v.sibling}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===a){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}At(i,a,x.children,u),a=a.child}return a;case 9:return x=a.type,m=a.pendingProps.children,Di(a,u),x=ns(x),m=m(x),a.flags|=1,At(i,a,m,u),a.child;case 14:return m=a.type,x=vs(m,a.pendingProps),x=vs(m.type,x),bp(i,a,m,x,u);case 15:return wp(i,a,a.type,a.pendingProps,u);case 17:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:vs(m,x),Ca(i,a),a.tag=1,Vt(m)?(i=!0,la(a)):i=!1,Di(a,u),hp(a,m,x),sd(a,m,x,u),od(null,a,m,!0,i,u);case 19:return Mp(i,a,u);case 22:return jp(i,a,u)}throw Error(s(156,a.tag))};function Zp(i,a){return Of(i,a)}function Vj(i,a,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(i,a,u,m){return new Vj(i,a,u,m)}function Cd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zj(i){if(typeof i=="function")return Cd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===re)return 11;if(i===he)return 14}return 2}function bn(i,a){var u=i.alternate;return u===null?(u=os(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function La(i,a,u,m,x,v){var k=2;if(m=i,typeof i=="function")Cd(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case z:return Gn(u.children,x,v,a);case L:k=8,x|=8;break;case M:return i=os(12,u,a,x|2),i.elementType=M,i.lanes=v,i;case ee:return i=os(13,u,a,x),i.elementType=ee,i.lanes=v,i;case de:return i=os(19,u,a,x),i.elementType=de,i.lanes=v,i;case X:return Fa(u,x,v,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:k=10;break e;case Z:k=9;break e;case re:k=11;break e;case he:k=14;break e;case V:k=16,m=null;break e}throw Error(s(130,i==null?i:typeof i,""))}return a=os(k,u,a,x),a.elementType=i,a.type=m,a.lanes=v,a}function Gn(i,a,u,m){return i=os(7,i,m,a),i.lanes=u,i}function Fa(i,a,u,m){return i=os(22,i,m,a),i.elementType=X,i.lanes=u,i.stateNode={isHidden:!1},i}function _d(i,a,u){return i=os(6,i,null,a),i.lanes=u,i}function Pd(i,a,u){return a=os(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function Bj(i,a,u,m,x){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Md(i,a,u,m,x,v,k,P,A){return i=new Bj(i,a,u,P,A),a===1?(a=1,v===!0&&(a|=8)):a=0,v=os(3,null,null,a),i.current=v,v.stateNode=i,v.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(v),i}function $j(i,a,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:m==null?null:""+m,children:i,containerInfo:a,implementation:u}}function eg(i){if(!i)return un;i=i._reactInternals;e:{if(Ln(i)!==i||i.tag!==1)throw Error(s(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Vt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(s(171))}if(i.tag===1){var u=i.type;if(Vt(u))return Pm(i,u,a)}return a}function tg(i,a,u,m,x,v,k,P,A){return i=Md(u,m,!0,i,x,v,k,P,A),i.context=eg(null),u=i.current,m=Rt(),x=yn(u),v=$s(m,x),v.callback=a??null,mn(u,v,x),i.current.lanes=x,yr(i,x,m),$t(i,m),i}function Va(i,a,u,m){var x=a.current,v=Rt(),k=yn(x);return u=eg(u),a.context===null?a.context=u:a.pendingContext=u,a=$s(v,k),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=mn(x,a,k),i!==null&&(js(i,x,k,v),ga(i,x,k)),k}function za(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function sg(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Td(i,a){sg(i,a),(i=i.alternate)&&sg(i,a)}function Uj(){return null}var ng=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ed(i){this._internalRoot=i}Ba.prototype.render=Ed.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));Va(i,a,null,null)},Ba.prototype.unmount=Ed.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;qn(function(){Va(null,i,null,null)}),a[Ls]=null}};function Ba(i){this._internalRoot=i}Ba.prototype.unstable_scheduleHydration=function(i){if(i){var a=zf();i={blockedOn:null,target:i,priority:a};for(var u=0;u<on.length&&a!==0&&a<on[u].priority;u++);on.splice(u,0,i),u===0&&Uf(i)}};function Od(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function $a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ig(){}function Wj(i,a,u,m,x){if(x){if(typeof m=="function"){var v=m;m=function(){var Y=za(k);v.call(Y)}}var k=tg(a,m,i,0,null,!1,!1,"",ig);return i._reactRootContainer=k,i[Ls]=k.current,Or(i.nodeType===8?i.parentNode:i),qn(),k}for(;x=i.lastChild;)i.removeChild(x);if(typeof m=="function"){var P=m;m=function(){var Y=za(A);P.call(Y)}}var A=Md(i,0,!1,null,null,!1,!1,"",ig);return i._reactRootContainer=A,i[Ls]=A.current,Or(i.nodeType===8?i.parentNode:i),qn(function(){Va(a,A,u,m)}),A}function Ua(i,a,u,m,x){var v=u._reactRootContainer;if(v){var k=v;if(typeof x=="function"){var P=x;x=function(){var A=za(k);P.call(A)}}Va(a,k,i,x)}else k=Wj(u,a,i,x,m);return za(k)}Ff=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=xr(a.pendingLanes);u!==0&&(sc(a,u|1),$t(a,it()),(De&6)===0&&(Fi=it()+500,hn()))}break;case 13:qn(function(){var m=Bs(i,1);if(m!==null){var x=Rt();js(m,i,1,x)}}),Td(i,1)}},nc=function(i){if(i.tag===13){var a=Bs(i,134217728);if(a!==null){var u=Rt();js(a,i,134217728,u)}Td(i,134217728)}},Vf=function(i){if(i.tag===13){var a=yn(i),u=Bs(i,a);if(u!==null){var m=Rt();js(u,i,a,m)}Td(i,a)}},zf=function(){return Fe},Bf=function(i,a){var u=Fe;try{return Fe=i,a()}finally{Fe=u}},Gl=function(i,a,u){switch(a){case"input":if(Re(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var m=u[a];if(m!==i&&m.form===i.form){var x=oa(m);if(!x)throw Error(s(90));J(m),Re(m,x)}}}break;case"textarea":gf(i,u);break;case"select":a=u.value,a!=null&&ps(i,!!u.multiple,a,!1)}},kf=Nd,Cf=qn;var Hj={usingClientEntryPoint:!1,Events:[Rr,ki,oa,Nf,Sf,Nd]},Gr={findFiberByHostInstance:Fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qj={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Tf(i),i===null?null:i.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||Uj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{Bo=Wa.inject(qj),_s=Wa}catch{}}return Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hj,Ut.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(a))throw Error(s(200));return $j(i,a,null,u)},Ut.createRoot=function(i,a){if(!Od(i))throw Error(s(299));var u=!1,m="",x=ng;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Md(i,1,!1,null,null,u,!1,m,x),i[Ls]=a.current,Or(i.nodeType===8?i.parentNode:i),new Ed(a)},Ut.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=Tf(a),i=i===null?null:i.stateNode,i},Ut.flushSync=function(i){return qn(i)},Ut.hydrate=function(i,a,u){if(!$a(a))throw Error(s(200));return Ua(null,i,a,!0,u)},Ut.hydrateRoot=function(i,a,u){if(!Od(i))throw Error(s(405));var m=u!=null&&u.hydratedSources||null,x=!1,v="",k=ng;if(u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),a=tg(a,null,i,1,u??null,x,!1,v,k),i[Ls]=a.current,Or(i),m)for(i=0;i<m.length;i++)u=m[i],x=u._getVersion,x=x(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,x]:a.mutableSourceEagerHydrationData.push(u,x);return new Ba(a)},Ut.render=function(i,a,u){if(!$a(a))throw Error(s(200));return Ua(null,i,a,!1,u)},Ut.unmountComponentAtNode=function(i){if(!$a(i))throw Error(s(40));return i._reactRootContainer?(qn(function(){Ua(null,null,i,!1,function(){i._reactRootContainer=null,i[Ls]=null})}),!0):!1},Ut.unstable_batchedUpdates=Nd,Ut.unstable_renderSubtreeIntoContainer=function(i,a,u,m){if(!$a(u))throw Error(s(200));if(i==null||i._reactInternals===void 0)throw Error(s(38));return Ua(i,a,u,!1,m)},Ut.version="18.3.1-next-f1338f8080-20240426",Ut}var hg;function ny(){if(hg)return Rd.exports;hg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rd.exports=t1(),Rd.exports}var fg;function s1(){if(fg)return Ha;fg=1;var t=ny();return Ha.createRoot=t.createRoot,Ha.hydrateRoot=t.hydrateRoot,Ha}var n1=s1();ny();function xo(){return xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},xo.apply(this,arguments)}var Sn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sn||(Sn={}));const mg="popstate";function i1(t){t===void 0&&(t={});function e(n,o){let{pathname:l,search:c,hash:d}=n.location;return bu("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(n,o){return typeof o=="string"?o:ml(o)}return o1(e,s,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ah(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r1(){return Math.random().toString(36).substr(2,8)}function pg(t,e){return{usr:t.state,key:t.key,idx:e}}function bu(t,e,s,n){return s===void 0&&(s=null),xo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ir(e):e,{state:s,key:e&&e.key||n||r1()})}function ml(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ir(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function o1(t,e,s,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:l=!1}=n,c=o.history,d=Sn.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(xo({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function g(){d=Sn.Pop;let w=p(),S=w==null?null:w-f;f=w,h&&h({action:d,location:N.location,delta:S})}function y(w,S){d=Sn.Push;let _=bu(N.location,w,S);f=p()+1;let T=pg(_,f),O=N.createHref(_);try{c.pushState(T,"",O)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;o.location.assign(O)}l&&h&&h({action:d,location:N.location,delta:1})}function b(w,S){d=Sn.Replace;let _=bu(N.location,w,S);f=p();let T=pg(_,f),O=N.createHref(_);c.replaceState(T,"",O),l&&h&&h({action:d,location:N.location,delta:0})}function j(w){let S=o.location.origin!=="null"?o.location.origin:o.location.href,_=typeof w=="string"?w:ml(w);return _=_.replace(/ $/,"%20"),et(S,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,S)}let N={get action(){return d},get location(){return t(o,c)},listen(w){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(mg,g),h=w,()=>{o.removeEventListener(mg,g),h=null}},createHref(w){return e(o,w)},createURL:j,encodeLocation(w){let S=j(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:b,go(w){return c.go(w)}};return N}var gg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gg||(gg={}));function a1(t,e,s){return s===void 0&&(s="/"),l1(t,e,s)}function l1(t,e,s,n){let o=typeof e=="string"?ir(e):e,l=Ji(o.pathname||"/",s);if(l==null)return null;let c=iy(t);c1(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=b1(l);d=y1(c[h],f)}return d}function iy(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let o=(l,c,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(et(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=Mn([n,h.relativePath]),p=s.concat(h);l.children&&l.children.length>0&&(et(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),iy(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:g1(f,l.index),routesMeta:p})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let h of ry(l.path))o(l,c,h)}),e}function ry(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,o=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return o?[l,""]:[l];let c=ry(n.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),o&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function c1(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:x1(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const d1=/^:[\w-]+$/,u1=3,h1=2,f1=1,m1=10,p1=-2,xg=t=>t==="*";function g1(t,e){let s=t.split("/"),n=s.length;return s.some(xg)&&(n+=p1),e&&(n+=h1),s.filter(o=>!xg(o)).reduce((o,l)=>o+(d1.test(l)?u1:l===""?f1:m1),n)}function x1(t,e){return t.length===e.length&&t.slice(0,-1).every((n,o)=>n===e[o])?t[t.length-1]-e[e.length-1]:0}function y1(t,e,s){let{routesMeta:n}=t,o={},l="/",c=[];for(let d=0;d<n.length;++d){let h=n[d],f=d===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=wu({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!g)return null;Object.assign(o,g.params),c.push({params:o,pathname:Mn([l,g.pathname]),pathnameBase:k1(Mn([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=Mn([l,g.pathnameBase]))}return c}function wu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=v1(t.path,t.caseSensitive,t.end),o=e.match(s);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:n.reduce((f,p,g)=>{let{paramName:y,isOptional:b}=p;if(y==="*"){let N=d[g]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const j=d[g];return b&&!j?f[y]=void 0:f[y]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function v1(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),ah(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),n]}function b1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ah(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ji(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const w1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j1=t=>w1.test(t);function N1(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:o=""}=typeof t=="string"?ir(t):t,l;if(s)if(j1(s))l=s;else{if(s.includes("//")){let c=s;s=s.replace(/\/\/+/g,"/"),ah(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+s))}s.startsWith("/")?l=yg(s.substring(1),"/"):l=yg(s,e)}else l=e;return{pathname:l,search:C1(n),hash:_1(o)}}function yg(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Fd(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S1(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function lh(t,e){let s=S1(t);return e?s.map((n,o)=>o===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function ch(t,e,s,n){n===void 0&&(n=!1);let o;typeof t=="string"?o=ir(t):(o=xo({},t),et(!o.pathname||!o.pathname.includes("?"),Fd("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),Fd("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),Fd("#","search","hash",o)));let l=t===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=s;else{let g=e.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;o.pathname=y.join("/")}d=g>=0?e[g]:"/"}let h=N1(o,d),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Mn=t=>t.join("/").replace(/\/\/+/g,"/"),k1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oy=["post","put","patch","delete"];new Set(oy);const M1=["get",...oy];new Set(M1);function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},yo.apply(this,arguments)}const Dl=C.createContext(null),ay=C.createContext(null),Zs=C.createContext(null),Al=C.createContext(null),en=C.createContext({outlet:null,matches:[],isDataRoute:!1}),ly=C.createContext(null);function T1(t,e){let{relative:s}=e===void 0?{}:e;rr()||et(!1);let{basename:n,navigator:o}=C.useContext(Zs),{hash:l,pathname:c,search:d}=Rl(t,{relative:s}),h=c;return n!=="/"&&(h=c==="/"?n:Mn([n,c])),o.createHref({pathname:h,search:d,hash:l})}function rr(){return C.useContext(Al)!=null}function ms(){return rr()||et(!1),C.useContext(Al).location}function cy(t){C.useContext(Zs).static||C.useLayoutEffect(t)}function Pe(){let{isDataRoute:t}=C.useContext(en);return t?U1():E1()}function E1(){rr()||et(!1);let t=C.useContext(Dl),{basename:e,future:s,navigator:n}=C.useContext(Zs),{matches:o}=C.useContext(en),{pathname:l}=ms(),c=JSON.stringify(lh(o,s.v7_relativeSplatPath)),d=C.useRef(!1);return cy(()=>{d.current=!0}),C.useCallback(function(f,p){if(p===void 0&&(p={}),!d.current)return;if(typeof f=="number"){n.go(f);return}let g=ch(f,JSON.parse(c),l,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Mn([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,c,l,t])}function hi(){let{matches:t}=C.useContext(en),e=t[t.length-1];return e?e.params:{}}function Rl(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=C.useContext(Zs),{matches:o}=C.useContext(en),{pathname:l}=ms(),c=JSON.stringify(lh(o,n.v7_relativeSplatPath));return C.useMemo(()=>ch(t,JSON.parse(c),l,s==="path"),[t,c,l,s])}function O1(t,e){return D1(t,e)}function D1(t,e,s,n){rr()||et(!1);let{navigator:o}=C.useContext(Zs),{matches:l}=C.useContext(en),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=ms(),p;if(e){var g;let w=typeof e=="string"?ir(e):e;h==="/"||(g=w.pathname)!=null&&g.startsWith(h)||et(!1),p=w}else p=f;let y=p.pathname||"/",b=y;if(h!=="/"){let w=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=a1(t,{pathname:b}),N=F1(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:Mn([h,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Mn([h,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,s,n);return e&&N?C.createElement(Al.Provider,{value:{location:yo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Sn.Pop}},N):N}function A1(){let t=$1(),e=P1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),s?C.createElement("pre",{style:o},s):null,null)}const R1=C.createElement(A1,null);class I1 extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?C.createElement(en.Provider,{value:this.props.routeContext},C.createElement(ly.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L1(t){let{routeContext:e,match:s,children:n}=t,o=C.useContext(Dl);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),C.createElement(en.Provider,{value:e},n)}function F1(t,e,s,n){var o;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,d=(o=s)==null?void 0:o.errors;if(d!=null){let p=c.findIndex(g=>g.route.id&&d?.[g.route.id]!==void 0);p>=0||et(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(s&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:b}=s,j=g.route.loader&&y[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||j){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let b,j=!1,N=null,w=null;s&&(b=d&&g.route.id?d[g.route.id]:void 0,N=g.route.errorElement||R1,h&&(f<0&&y===0?(W1("route-fallback"),j=!0,w=null):f===y&&(j=!0,w=g.route.hydrateFallbackElement||null)));let S=e.concat(c.slice(0,y+1)),_=()=>{let T;return b?T=N:j?T=w:g.route.Component?T=C.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,C.createElement(L1,{match:g,routeContext:{outlet:p,matches:S,isDataRoute:s!=null},children:T})};return s&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?C.createElement(I1,{location:s.location,revalidation:s.revalidation,component:N,error:b,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}var dy=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(dy||{}),uy=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(uy||{});function V1(t){let e=C.useContext(Dl);return e||et(!1),e}function z1(t){let e=C.useContext(ay);return e||et(!1),e}function B1(t){let e=C.useContext(en);return e||et(!1),e}function hy(t){let e=B1(),s=e.matches[e.matches.length-1];return s.route.id||et(!1),s.route.id}function $1(){var t;let e=C.useContext(ly),s=z1(),n=hy();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function U1(){let{router:t}=V1(dy.UseNavigateStable),e=hy(uy.UseNavigateStable),s=C.useRef(!1);return cy(()=>{s.current=!0}),C.useCallback(function(o,l){l===void 0&&(l={}),s.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,yo({fromRouteId:e},l)))},[t,e])}const vg={};function W1(t,e,s){vg[t]||(vg[t]=!0)}function H1(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function pl(t){let{to:e,replace:s,state:n,relative:o}=t;rr()||et(!1);let{future:l,static:c}=C.useContext(Zs),{matches:d}=C.useContext(en),{pathname:h}=ms(),f=Pe(),p=ch(e,lh(d,l.v7_relativeSplatPath),h,o==="path"),g=JSON.stringify(p);return C.useEffect(()=>f(JSON.parse(g),{replace:s,state:n,relative:o}),[f,g,o,s,n]),null}function Te(t){et(!1)}function q1(t){let{basename:e="/",children:s=null,location:n,navigationType:o=Sn.Pop,navigator:l,static:c=!1,future:d}=t;rr()&&et(!1);let h=e.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:h,navigator:l,static:c,future:yo({v7_relativeSplatPath:!1},d)}),[h,d,l,c]);typeof n=="string"&&(n=ir(n));let{pathname:p="/",search:g="",hash:y="",state:b=null,key:j="default"}=n,N=C.useMemo(()=>{let w=Ji(p,h);return w==null?null:{location:{pathname:w,search:g,hash:y,state:b,key:j},navigationType:o}},[h,p,g,y,b,j,o]);return N==null?null:C.createElement(Zs.Provider,{value:f},C.createElement(Al.Provider,{children:s,value:N}))}function Y1(t){let{children:e,location:s}=t;return O1(ju(e),s)}new Promise(()=>{});function ju(t,e){e===void 0&&(e=[]);let s=[];return C.Children.forEach(t,(n,o)=>{if(!C.isValidElement(n))return;let l=[...e,o];if(n.type===C.Fragment){s.push.apply(s,ju(n.props.children,l));return}n.type!==Te&&et(!1),!n.props.index||!n.props.children||et(!1);let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=ju(n.props.children,l)),s.push(c)}),s}function gl(){return gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},gl.apply(this,arguments)}function fy(t,e){if(t==null)return{};var s={},n=Object.keys(t),o,l;for(l=0;l<n.length;l++)o=n[l],!(e.indexOf(o)>=0)&&(s[o]=t[o]);return s}function K1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function G1(t,e){return t.button===0&&(!e||e==="_self")&&!K1(t)}function Nu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(o=>[s,o]):[[s,n]])},[]))}function Q1(t,e){let s=Nu(t);return e&&e.forEach((n,o)=>{s.has(o)||e.getAll(o).forEach(l=>{s.append(o,l)})}),s}const X1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],J1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Z1="6";try{window.__reactRouterVersion=Z1}catch{}const eN=C.createContext({isTransitioning:!1}),tN="startTransition",bg=Jj[tN];function sN(t){let{basename:e,children:s,future:n,window:o}=t,l=C.useRef();l.current==null&&(l.current=i1({window:o,v5Compat:!0}));let c=l.current,[d,h]=C.useState({action:c.action,location:c.location}),{v7_startTransition:f}=n||{},p=C.useCallback(g=>{f&&bg?bg(()=>h(g)):h(g)},[h,f]);return C.useLayoutEffect(()=>c.listen(p),[c,p]),C.useEffect(()=>H1(n),[n]),C.createElement(q1,{basename:e,children:s,location:d.location,navigationType:d.action,navigator:c,future:n})}const nN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rN=C.forwardRef(function(e,s){let{onClick:n,relative:o,reloadDocument:l,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:g}=e,y=fy(e,X1),{basename:b}=C.useContext(Zs),j,N=!1;if(typeof f=="string"&&iN.test(f)&&(j=f,nN))try{let T=new URL(window.location.href),O=f.startsWith("//")?new URL(T.protocol+f):new URL(f),E=Ji(O.pathname,b);O.origin===T.origin&&E!=null?f=E+O.search+O.hash:N=!0}catch{}let w=T1(f,{relative:o}),S=lN(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:o,viewTransition:g});function _(T){n&&n(T),T.defaultPrevented||S(T)}return C.createElement("a",gl({},y,{href:j||w,onClick:N||l?n:_,ref:s,target:h}))}),oN=C.forwardRef(function(e,s){let{"aria-current":n="page",caseSensitive:o=!1,className:l="",end:c=!1,style:d,to:h,viewTransition:f,children:p}=e,g=fy(e,J1),y=Rl(h,{relative:g.relative}),b=ms(),j=C.useContext(ay),{navigator:N,basename:w}=C.useContext(Zs),S=j!=null&&cN(y)&&f===!0,_=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,T=b.pathname,O=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;o||(T=T.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&w&&(O=Ji(O,w)||O);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let $=T===_||!c&&T.startsWith(_)&&T.charAt(E)==="/",z=O!=null&&(O===_||!c&&O.startsWith(_)&&O.charAt(_.length)==="/"),L={isActive:$,isPending:z,isTransitioning:S},M=$?n:void 0,R;typeof l=="function"?R=l(L):R=[l,$?"active":null,z?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Z=typeof d=="function"?d(L):d;return C.createElement(rN,gl({},g,{"aria-current":M,className:R,ref:s,style:Z,to:h,viewTransition:f}),typeof p=="function"?p(L):p)});var Su;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Su||(Su={}));var wg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wg||(wg={}));function aN(t){let e=C.useContext(Dl);return e||et(!1),e}function lN(t,e){let{target:s,replace:n,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,h=Pe(),f=ms(),p=Rl(t,{relative:c});return C.useCallback(g=>{if(G1(g,s)){g.preventDefault();let y=n!==void 0?n:ml(f)===ml(p);h(t,{replace:y,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[f,h,p,n,o,s,t,l,c,d])}function my(t){let e=C.useRef(Nu(t)),s=C.useRef(!1),n=ms(),o=C.useMemo(()=>Q1(n.search,s.current?null:e.current),[n.search]),l=Pe(),c=C.useCallback((d,h)=>{const f=Nu(typeof d=="function"?d(o):d);s.current=!0,l("?"+f,h)},[l,o]);return[o,c]}function cN(t,e){e===void 0&&(e={});let s=C.useContext(eN);s==null&&et(!1);let{basename:n}=aN(Su.useViewTransitionState),o=Rl(t,{relative:e.relative});if(!s.isTransitioning)return!1;let l=Ji(s.currentLocation.pathname,n)||s.currentLocation.pathname,c=Ji(s.nextLocation.pathname,n)||s.nextLocation.pathname;return wu(o.pathname,c)!=null||wu(o.pathname,l)!=null}const py=C.createContext({});function dN(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const dh=typeof window<"u",uN=dh?C.useLayoutEffect:C.useEffect,uh=C.createContext(null);function hh(t,e){t.indexOf(e)===-1&&t.push(e)}function fh(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Qs=(t,e,s)=>s>e?e:s<t?t:s;let mh=()=>{};const Xs={},gy=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function xy(t){return typeof t=="object"&&t!==null}const yy=t=>/^0[^.\s]+$/u.test(t);function ph(t){let e;return()=>(e===void 0&&(e=t()),e)}const us=t=>t,hN=(t,e)=>s=>e(t(s)),To=(...t)=>t.reduce(hN),vo=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class gh{constructor(){this.subscriptions=[]}add(e){return hh(this.subscriptions,e),()=>fh(this.subscriptions,e)}notify(e,s,n){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,s,n);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rs=t=>t*1e3,cs=t=>t/1e3;function vy(t,e){return e?t*(1e3/e):0}const by=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,fN=1e-7,mN=12;function pN(t,e,s,n,o){let l,c,d=0;do c=e+(s-e)/2,l=by(c,n,o)-t,l>0?s=c:e=c;while(Math.abs(l)>fN&&++d<mN);return c}function Eo(t,e,s,n){if(t===e&&s===n)return us;const o=l=>pN(l,0,1,t,s);return l=>l===0||l===1?l:by(o(l),e,n)}const wy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jy=t=>e=>1-t(1-e),Ny=Eo(.33,1.53,.69,.99),xh=jy(Ny),Sy=wy(xh),ky=t=>(t*=2)<1?.5*xh(t):.5*(2-Math.pow(2,-10*(t-1))),yh=t=>1-Math.sin(Math.acos(t)),Cy=jy(yh),_y=wy(yh),gN=Eo(.42,0,1,1),xN=Eo(0,0,.58,1),Py=Eo(.42,0,.58,1),yN=t=>Array.isArray(t)&&typeof t[0]!="number",My=t=>Array.isArray(t)&&typeof t[0]=="number",vN={linear:us,easeIn:gN,easeInOut:Py,easeOut:xN,circIn:yh,circInOut:_y,circOut:Cy,backIn:xh,backInOut:Sy,backOut:Ny,anticipate:ky},bN=t=>typeof t=="string",jg=t=>{if(My(t)){mh(t.length===4);const[e,s,n,o]=t;return Eo(e,s,n,o)}else if(bN(t))return vN[t];return t},qa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wN(t,e){let s=new Set,n=new Set,o=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(p){c.has(p)&&(f.schedule(p),t()),p(d)}const f={schedule:(p,g=!1,y=!1)=>{const j=y&&o?s:n;return g&&c.add(p),j.has(p)||j.add(p),p},cancel:p=>{n.delete(p),c.delete(p)},process:p=>{if(d=p,o){l=!0;return}o=!0,[s,n]=[n,s],s.forEach(h),s.clear(),o=!1,l&&(l=!1,f.process(p))}};return f}const jN=40;function Ty(t,e){let s=!1,n=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,c=qa.reduce((T,O)=>(T[O]=wN(l),T),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:p,update:g,preRender:y,render:b,postRender:j}=c,N=()=>{const T=Xs.useManualTiming?o.timestamp:performance.now();s=!1,Xs.useManualTiming||(o.delta=n?1e3/60:Math.max(Math.min(T-o.timestamp,jN),1)),o.timestamp=T,o.isProcessing=!0,d.process(o),h.process(o),f.process(o),p.process(o),g.process(o),y.process(o),b.process(o),j.process(o),o.isProcessing=!1,s&&e&&(n=!1,t(N))},w=()=>{s=!0,n=!0,o.isProcessing||t(N)};return{schedule:qa.reduce((T,O)=>{const E=c[O];return T[O]=($,z=!1,L=!1)=>(s||w(),E.schedule($,z,L)),T},{}),cancel:T=>{for(let O=0;O<qa.length;O++)c[qa[O]].cancel(T)},state:o,steps:c}}const{schedule:Qe,cancel:En,state:jt,steps:Vd}=Ty(typeof requestAnimationFrame<"u"?requestAnimationFrame:us,!0);let ll;function NN(){ll=void 0}const qt={now:()=>(ll===void 0&&qt.set(jt.isProcessing||Xs.useManualTiming?jt.timestamp:performance.now()),ll),set:t=>{ll=t,queueMicrotask(NN)}},Ey=t=>e=>typeof e=="string"&&e.startsWith(t),Oy=Ey("--"),SN=Ey("var(--"),vh=t=>SN(t)?kN.test(t.split("/*")[0].trim()):!1,kN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,or={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bo={...or,transform:t=>Qs(0,1,t)},Ya={...or,default:1},lo=t=>Math.round(t*1e5)/1e5,bh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CN(t){return t==null}const _N=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wh=(t,e)=>s=>!!(typeof s=="string"&&_N.test(s)&&s.startsWith(t)||e&&!CN(s)&&Object.prototype.hasOwnProperty.call(s,e)),Dy=(t,e,s)=>n=>{if(typeof n!="string")return n;const[o,l,c,d]=n.match(bh);return{[t]:parseFloat(o),[e]:parseFloat(l),[s]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},PN=t=>Qs(0,255,t),zd={...or,transform:t=>Math.round(PN(t))},ni={test:wh("rgb","red"),parse:Dy("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+zd.transform(t)+", "+zd.transform(e)+", "+zd.transform(s)+", "+lo(bo.transform(n))+")"};function MN(t){let e="",s="",n="",o="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),o=t.substring(4,5),e+=e,s+=s,n+=n,o+=o),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}}const ku={test:wh("#"),parse:MN,transform:ni.transform},Oo=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nn=Oo("deg"),Is=Oo("%"),Ce=Oo("px"),TN=Oo("vh"),EN=Oo("vw"),Ng={...Is,parse:t=>Is.parse(t)/100,transform:t=>Is.transform(t*100)},$i={test:wh("hsl","hue"),parse:Dy("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+Is.transform(lo(e))+", "+Is.transform(lo(s))+", "+lo(bo.transform(n))+")"},dt={test:t=>ni.test(t)||ku.test(t)||$i.test(t),parse:t=>ni.test(t)?ni.parse(t):$i.test(t)?$i.parse(t):ku.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ni.transform(t):$i.transform(t),getAnimatableNone:t=>{const e=dt.parse(t);return e.alpha=0,dt.transform(e)}},ON=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function DN(t){return isNaN(t)&&typeof t=="string"&&(t.match(bh)?.length||0)+(t.match(ON)?.length||0)>0}const Ay="number",Ry="color",AN="var",RN="var(",Sg="${}",IN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wo(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},o=[];let l=0;const d=e.replace(IN,h=>(dt.test(h)?(n.color.push(l),o.push(Ry),s.push(dt.parse(h))):h.startsWith(RN)?(n.var.push(l),o.push(AN),s.push(h)):(n.number.push(l),o.push(Ay),s.push(parseFloat(h))),++l,Sg)).split(Sg);return{values:s,split:d,indexes:n,types:o}}function Iy(t){return wo(t).values}function Ly(t){const{split:e,types:s}=wo(t),n=e.length;return o=>{let l="";for(let c=0;c<n;c++)if(l+=e[c],o[c]!==void 0){const d=s[c];d===Ay?l+=lo(o[c]):d===Ry?l+=dt.transform(o[c]):l+=o[c]}return l}}const LN=t=>typeof t=="number"?0:dt.test(t)?dt.getAnimatableNone(t):t;function FN(t){const e=Iy(t);return Ly(t)(e.map(LN))}const On={test:DN,parse:Iy,createTransformer:Ly,getAnimatableNone:FN};function Bd(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function VN({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let o=0,l=0,c=0;if(!e)o=l=c=s;else{const d=s<.5?s*(1+e):s+e-s*e,h=2*s-d;o=Bd(h,d,t+1/3),l=Bd(h,d,t),c=Bd(h,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:n}}function xl(t,e){return s=>s>0?e:t}const Ze=(t,e,s)=>t+(e-t)*s,$d=(t,e,s)=>{const n=t*t,o=s*(e*e-n)+n;return o<0?0:Math.sqrt(o)},zN=[ku,ni,$i],BN=t=>zN.find(e=>e.test(t));function kg(t){const e=BN(t);if(!e)return!1;let s=e.parse(t);return e===$i&&(s=VN(s)),s}const Cg=(t,e)=>{const s=kg(t),n=kg(e);if(!s||!n)return xl(t,e);const o={...s};return l=>(o.red=$d(s.red,n.red,l),o.green=$d(s.green,n.green,l),o.blue=$d(s.blue,n.blue,l),o.alpha=Ze(s.alpha,n.alpha,l),ni.transform(o))},Cu=new Set(["none","hidden"]);function $N(t,e){return Cu.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function UN(t,e){return s=>Ze(t,e,s)}function jh(t){return typeof t=="number"?UN:typeof t=="string"?vh(t)?xl:dt.test(t)?Cg:qN:Array.isArray(t)?Fy:typeof t=="object"?dt.test(t)?Cg:WN:xl}function Fy(t,e){const s=[...t],n=s.length,o=t.map((l,c)=>jh(l)(l,e[c]));return l=>{for(let c=0;c<n;c++)s[c]=o[c](l);return s}}function WN(t,e){const s={...t,...e},n={};for(const o in s)t[o]!==void 0&&e[o]!==void 0&&(n[o]=jh(t[o])(t[o],e[o]));return o=>{for(const l in n)s[l]=n[l](o);return s}}function HN(t,e){const s=[],n={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][n[l]],d=t.values[c]??0;s[o]=d,n[l]++}return s}const qN=(t,e)=>{const s=On.createTransformer(e),n=wo(t),o=wo(e);return n.indexes.var.length===o.indexes.var.length&&n.indexes.color.length===o.indexes.color.length&&n.indexes.number.length>=o.indexes.number.length?Cu.has(t)&&!o.values.length||Cu.has(e)&&!n.values.length?$N(t,e):To(Fy(HN(n,o),o.values),s):xl(t,e)};function Vy(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Ze(t,e,s):jh(t)(t,e)}const YN=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Qe.update(e,s),stop:()=>En(e),now:()=>jt.isProcessing?jt.timestamp:qt.now()}},zy=(t,e,s=10)=>{let n="";const o=Math.max(Math.round(e/s),2);for(let l=0;l<o;l++)n+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},yl=2e4;function Nh(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<yl;)e+=s,n=t.next(e);return e>=yl?1/0:e}function KN(t,e=100,s){const n=s({...t,keyframes:[0,e]}),o=Math.min(Nh(n),yl);return{type:"keyframes",ease:l=>n.next(o*l).value/e,duration:cs(o)}}const GN=5;function By(t,e,s){const n=Math.max(e-GN,0);return vy(s-t(n),e-n)}const nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ud=.001;function QN({duration:t=nt.duration,bounce:e=nt.bounce,velocity:s=nt.velocity,mass:n=nt.mass}){let o,l,c=1-e;c=Qs(nt.minDamping,nt.maxDamping,c),t=Qs(nt.minDuration,nt.maxDuration,cs(t)),c<1?(o=f=>{const p=f*c,g=p*t,y=p-s,b=_u(f,c),j=Math.exp(-g);return Ud-y/b*j},l=f=>{const g=f*c*t,y=g*s+s,b=Math.pow(c,2)*Math.pow(f,2)*t,j=Math.exp(-g),N=_u(Math.pow(f,2),c);return(-o(f)+Ud>0?-1:1)*((y-b)*j)/N}):(o=f=>{const p=Math.exp(-f*t),g=(f-s)*t+1;return-Ud+p*g},l=f=>{const p=Math.exp(-f*t),g=(s-f)*(t*t);return p*g});const d=5/t,h=JN(o,l,d);if(t=Rs(t),isNaN(h))return{stiffness:nt.stiffness,damping:nt.damping,duration:t};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:c*2*Math.sqrt(n*f),duration:t}}}const XN=12;function JN(t,e,s){let n=s;for(let o=1;o<XN;o++)n=n-t(n)/e(n);return n}function _u(t,e){return t*Math.sqrt(1-e*e)}const ZN=["duration","bounce"],e2=["stiffness","damping","mass"];function _g(t,e){return e.some(s=>t[s]!==void 0)}function t2(t){let e={velocity:nt.velocity,stiffness:nt.stiffness,damping:nt.damping,mass:nt.mass,isResolvedFromDuration:!1,...t};if(!_g(t,e2)&&_g(t,ZN))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),o=n*n,l=2*Qs(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:nt.mass,stiffness:o,damping:l}}else{const s=QN(t);e={...e,...s,mass:nt.mass},e.isResolvedFromDuration=!0}return e}function vl(t=nt.visualDuration,e=nt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:o}=s;const l=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],d={done:!1,value:l},{stiffness:h,damping:f,mass:p,duration:g,velocity:y,isResolvedFromDuration:b}=t2({...s,velocity:-cs(s.velocity||0)}),j=y||0,N=f/(2*Math.sqrt(h*p)),w=c-l,S=cs(Math.sqrt(h/p)),_=Math.abs(w)<5;n||(n=_?nt.restSpeed.granular:nt.restSpeed.default),o||(o=_?nt.restDelta.granular:nt.restDelta.default);let T;if(N<1){const E=_u(S,N);T=$=>{const z=Math.exp(-N*S*$);return c-z*((j+N*S*w)/E*Math.sin(E*$)+w*Math.cos(E*$))}}else if(N===1)T=E=>c-Math.exp(-S*E)*(w+(j+S*w)*E);else{const E=S*Math.sqrt(N*N-1);T=$=>{const z=Math.exp(-N*S*$),L=Math.min(E*$,300);return c-z*((j+N*S*w)*Math.sinh(L)+E*w*Math.cosh(L))/E}}const O={calculatedDuration:b&&g||null,next:E=>{const $=T(E);if(b)d.done=E>=g;else{let z=E===0?j:0;N<1&&(z=E===0?Rs(j):By(T,E,$));const L=Math.abs(z)<=n,M=Math.abs(c-$)<=o;d.done=L&&M}return d.value=d.done?c:$,d},toString:()=>{const E=Math.min(Nh(O),yl),$=zy(z=>O.next(E*z).value,E,30);return E+"ms "+$},toTransition:()=>{}};return O}vl.applyToOptions=t=>{const e=KN(t,100,vl);return t.ease=e.ease,t.duration=Rs(e.duration),t.type="keyframes",t};function Pu({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:h,restDelta:f=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},b=L=>d!==void 0&&L<d||h!==void 0&&L>h,j=L=>d===void 0?h:h===void 0||Math.abs(d-L)<Math.abs(h-L)?d:h;let N=s*e;const w=g+N,S=c===void 0?w:c(w);S!==w&&(N=S-g);const _=L=>-N*Math.exp(-L/n),T=L=>S+_(L),O=L=>{const M=_(L),R=T(L);y.done=Math.abs(M)<=f,y.value=y.done?S:R};let E,$;const z=L=>{b(y.value)&&(E=L,$=vl({keyframes:[y.value,j(y.value)],velocity:By(T,L,y.value),damping:o,stiffness:l,restDelta:f,restSpeed:p}))};return z(0),{calculatedDuration:null,next:L=>{let M=!1;return!$&&E===void 0&&(M=!0,O(L),z(L)),E!==void 0&&L>=E?$.next(L-E):(!M&&O(L),y)}}}function s2(t,e,s){const n=[],o=s||Xs.mix||Vy,l=t.length-1;for(let c=0;c<l;c++){let d=o(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||us:e;d=To(h,d)}n.push(d)}return n}function n2(t,e,{clamp:s=!0,ease:n,mixer:o}={}){const l=t.length;if(mh(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=s2(e,n,o),h=d.length,f=p=>{if(c&&p<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=vo(t[g],t[g+1],p);return d[g](y)};return s?p=>f(Qs(t[0],t[l-1],p)):f}function i2(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const o=vo(0,e,n);t.push(Ze(s,1,o))}}function r2(t){const e=[0];return i2(e,t.length-1),e}function o2(t,e){return t.map(s=>s*e)}function a2(t,e){return t.map(()=>e||Py).splice(0,t.length-1)}function co({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const o=yN(n)?n.map(jg):jg(n),l={done:!1,value:e[0]},c=o2(s&&s.length===e.length?s:r2(e),t),d=n2(c,e,{ease:Array.isArray(o)?o:a2(e,o)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}const l2=t=>t!==null;function Sh(t,{repeat:e,repeatType:s="loop"},n,o=1){const l=t.filter(l2),d=o<0||e&&s!=="loop"&&e%2===1?0:l.length-1;return!d||n===void 0?l[d]:n}const c2={decay:Pu,inertia:Pu,tween:co,keyframes:co,spring:vl};function $y(t){typeof t.type=="string"&&(t.type=c2[t.type])}class kh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const d2=t=>t/100;class Ch extends kh{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==qt.now()&&this.tick(qt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$y(e);const{type:s=co,repeat:n=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=e;let{keyframes:d}=e;const h=s||co;h!==co&&typeof d[0]!="number"&&(this.mixKeyframes=To(d2,Vy(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=Nh(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+o,this.totalDuration=this.resolvedDuration*(n+1)-o,this.generator=f}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:o,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:b,type:j,onUpdate:N,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?S<0:S>o;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let T=this.currentTime,O=n;if(g){const L=Math.min(this.currentTime,o)/d;let M=Math.floor(L),R=L%1;!R&&L>=1&&(R=1),R===1&&M--,M=Math.min(M,g+1),M%2&&(y==="reverse"?(R=1-R,b&&(R-=b/d)):y==="mirror"&&(O=c)),T=Qs(0,1,R)*d}const E=_?{done:!1,value:p[0]}:O.next(T);l&&(E.value=l(E.value));let{done:$}=E;!_&&h!==null&&($=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return z&&j!==Pu&&(E.value=Sh(p,this.options,w,this.speed)),N&&N(E.value),z&&this.finish(),E}then(e,s){return this.finished.then(e,s)}get duration(){return cs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cs(e)}get time(){return cs(this.currentTime)}set time(e){e=Rs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qt.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=cs(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=YN,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function u2(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ii=t=>t*180/Math.PI,Mu=t=>{const e=ii(Math.atan2(t[1],t[0]));return Tu(e)},h2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Mu,rotateZ:Mu,skewX:t=>ii(Math.atan(t[1])),skewY:t=>ii(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Tu=t=>(t=t%360,t<0&&(t+=360),t),Pg=Mu,Mg=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Tg=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),f2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Mg,scaleY:Tg,scale:t=>(Mg(t)+Tg(t))/2,rotateX:t=>Tu(ii(Math.atan2(t[6],t[5]))),rotateY:t=>Tu(ii(Math.atan2(-t[2],t[0]))),rotateZ:Pg,rotate:Pg,skewX:t=>ii(Math.atan(t[4])),skewY:t=>ii(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Eu(t){return t.includes("scale")?1:0}function Ou(t,e){if(!t||t==="none")return Eu(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,o;if(s)n=f2,o=s;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=h2,o=d}if(!o)return Eu(e);const l=n[e],c=o[1].split(",").map(p2);return typeof l=="function"?l(c):c[l]}const m2=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Ou(s,e)};function p2(t){return parseFloat(t.trim())}const ar=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lr=new Set(ar),Eg=t=>t===or||t===Ce,g2=new Set(["x","y","z"]),x2=ar.filter(t=>!g2.has(t));function y2(t){const e=[];return x2.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const ai={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ou(e,"x"),y:(t,{transform:e})=>Ou(e,"y")};ai.translateX=ai.x;ai.translateY=ai.y;const li=new Set;let Du=!1,Au=!1,Ru=!1;function Uy(){if(Au){const t=Array.from(li).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const o=y2(n);o.length&&(s.set(n,o),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const o=s.get(n);o&&o.forEach(([l,c])=>{n.getValue(l)?.set(c)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Au=!1,Du=!1,li.forEach(t=>t.complete(Ru)),li.clear()}function Wy(){li.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Au=!0)})}function v2(){Ru=!0,Wy(),Uy(),Ru=!1}class _h{constructor(e,s,n,o,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(li.add(this),Du||(Du=!0,Qe.read(Wy),Qe.resolveKeyframes(Uy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:o}=this;if(e[0]===null){const l=o?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(n&&s){const d=n.readValue(s,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),o&&l===void 0&&o.set(e[0])}u2(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),li.delete(this)}cancel(){this.state==="scheduled"&&(li.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b2=t=>t.startsWith("--");function w2(t,e,s){b2(e)?t.style.setProperty(e,s):t.style[e]=s}const j2=ph(()=>window.ScrollTimeline!==void 0),N2={};function S2(t,e){const s=ph(t);return()=>N2[e]??s()}const Hy=S2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),io=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,Og={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:io([0,.65,.55,1]),circOut:io([.55,0,1,.45]),backIn:io([.31,.01,.66,-.59]),backOut:io([.33,1.53,.69,.99])};function qy(t,e){if(t)return typeof t=="function"?Hy()?zy(t,e):"ease-out":My(t)?io(t):Array.isArray(t)?t.map(s=>qy(s,e)||Og.easeOut):Og[t]}function k2(t,e,s,{delay:n=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:h}={},f=void 0){const p={[e]:s};h&&(p.offset=h);const g=qy(d,o);Array.isArray(g)&&(p.easing=g);const y={delay:n,duration:o,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),t.animate(p,y)}function Yy(t){return typeof t=="function"&&"applyToOptions"in t}function C2({type:t,...e}){return Yy(t)&&Hy()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _2 extends kh{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:o,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,mh(typeof e.type!="string");const f=C2(e);this.animation=k2(s,n,o,f,l),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Sh(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):w2(s,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return cs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cs(e)}get time(){return cs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Rs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&j2()?(this.animation.timeline=e,us):s(this)}}const Ky={anticipate:ky,backInOut:Sy,circInOut:_y};function P2(t){return t in Ky}function M2(t){typeof t.ease=="string"&&P2(t.ease)&&(t.ease=Ky[t.ease])}const Dg=10;class T2 extends _2{constructor(e){M2(e),$y(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:o,element:l,...c}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const d=new Ch({...c,autoplay:!1}),h=Rs(this.finishedTime??this.time);s.setWithVelocity(d.sample(h-Dg).value,d.sample(h).value,Dg),d.stop()}}const Ag=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(On.test(t)||t==="0")&&!t.startsWith("url("));function E2(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function O2(t,e,s,n){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=Ag(o,e),d=Ag(l,e);return!c||!d?!1:E2(t)||(s==="spring"||Yy(s))&&n}function Iu(t){t.duration=0,t.type="keyframes"}const D2=new Set(["opacity","clipPath","filter","transform"]),A2=ph(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function R2(t){const{motionValue:e,name:s,repeatDelay:n,repeatType:o,damping:l,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return A2()&&s&&D2.has(s)&&(s!=="transform"||!f)&&!h&&!n&&o!=="mirror"&&l!==0&&c!=="inertia"}const I2=40;class L2 extends kh{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:h,motionValue:f,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=qt.now();const y={autoplay:e,delay:s,type:n,repeat:o,repeatDelay:l,repeatType:c,name:h,motionValue:f,element:p,...g},b=p?.KeyframeResolver||_h;this.keyframeResolver=new b(d,(j,N,w)=>this.onKeyframesResolved(j,N,y,!w),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,n,o){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:h,isHandoff:f,onUpdate:p}=n;this.resolvedAt=qt.now(),O2(e,l,c,d)||((Xs.instantAnimations||!h)&&p?.(Sh(e,n,s)),e[0]=e[e.length-1],Iu(n),n.repeat=0);const y={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>I2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},b=!f&&R2(y)?new T2({...y,element:y.motionValue.owner.current}):new Ch(y);b.finished.then(()=>this.notifyFinished()).catch(us),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),v2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const F2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V2(t){const e=F2.exec(t);if(!e)return[,];const[,s,n,o]=e;return[`--${s??n}`,o]}function Gy(t,e,s=1){const[n,o]=V2(t);if(!n)return;const l=window.getComputedStyle(e).getPropertyValue(n);if(l){const c=l.trim();return gy(c)?parseFloat(c):c}return vh(o)?Gy(o,e,s+1):o}function Ph(t,e){return t?.[e]??t?.default??t}const Qy=new Set(["width","height","top","left","right","bottom",...ar]),z2={test:t=>t==="auto",parse:t=>t},Xy=t=>e=>e.test(t),Jy=[or,Ce,Is,Nn,EN,TN,z2],Rg=t=>Jy.find(Xy(t));function B2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yy(t):!0}const $2=new Set(["brightness","contrast","saturate","opacity"]);function U2(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(bh)||[];if(!n)return t;const o=s.replace(n,"");let l=$2.has(e)?1:0;return n!==s&&(l*=100),e+"("+l+o+")"}const W2=/\b([a-z-]*)\(.*?\)/gu,Lu={...On,getAnimatableNone:t=>{const e=t.match(W2);return e?e.map(U2).join(" "):t}},Ig={...or,transform:Math.round},H2={rotate:Nn,rotateX:Nn,rotateY:Nn,rotateZ:Nn,scale:Ya,scaleX:Ya,scaleY:Ya,scaleZ:Ya,skew:Nn,skewX:Nn,skewY:Nn,distance:Ce,translateX:Ce,translateY:Ce,translateZ:Ce,x:Ce,y:Ce,z:Ce,perspective:Ce,transformPerspective:Ce,opacity:bo,originX:Ng,originY:Ng,originZ:Ce},Mh={borderWidth:Ce,borderTopWidth:Ce,borderRightWidth:Ce,borderBottomWidth:Ce,borderLeftWidth:Ce,borderRadius:Ce,radius:Ce,borderTopLeftRadius:Ce,borderTopRightRadius:Ce,borderBottomRightRadius:Ce,borderBottomLeftRadius:Ce,width:Ce,maxWidth:Ce,height:Ce,maxHeight:Ce,top:Ce,right:Ce,bottom:Ce,left:Ce,padding:Ce,paddingTop:Ce,paddingRight:Ce,paddingBottom:Ce,paddingLeft:Ce,margin:Ce,marginTop:Ce,marginRight:Ce,marginBottom:Ce,marginLeft:Ce,backgroundPositionX:Ce,backgroundPositionY:Ce,...H2,zIndex:Ig,fillOpacity:bo,strokeOpacity:bo,numOctaves:Ig},q2={...Mh,color:dt,backgroundColor:dt,outlineColor:dt,fill:dt,stroke:dt,borderColor:dt,borderTopColor:dt,borderRightColor:dt,borderBottomColor:dt,borderLeftColor:dt,filter:Lu,WebkitFilter:Lu},Zy=t=>q2[t];function ev(t,e){let s=Zy(t);return s!==Lu&&(s=On),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Y2=new Set(["auto","none","0"]);function K2(t,e,s){let n=0,o;for(;n<t.length&&!o;){const l=t[n];typeof l=="string"&&!Y2.has(l)&&wo(l).values.length&&(o=t[n]),n++}if(o&&s)for(const l of e)t[l]=ev(s,o)}class G2 extends _h{constructor(e,s,n,o,l){super(e,s,n,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),vh(f))){const p=Gy(f,s.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Qy.has(n)||e.length!==2)return;const[o,l]=e,c=Rg(o),d=Rg(l);if(c!==d)if(Eg(c)&&Eg(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else ai[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let o=0;o<e.length;o++)(e[o]===null||B2(e[o]))&&n.push(o);n.length&&K2(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ai[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const o=s[s.length-1];o!==void 0&&e.getValue(n,o).jump(o,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const o=e.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=n.length-1,c=n[l];n[l]=ai[s](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function Q2(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const o=s?.[t]??n.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const tv=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function X2(t){return xy(t)&&"offsetHeight"in t}const Lg=30,J2=t=>!isNaN(parseFloat(t));class Z2{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const o=qt.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=qt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=J2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new gh);const n=this.events[e].add(s);return e==="change"?()=>{n(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lg)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Lg);return vy(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zi(t,e){return new Z2(t,e)}const{schedule:Th}=Ty(queueMicrotask,!1),Ss={x:!1,y:!1};function sv(){return Ss.x||Ss.y}function eS(t){return t==="x"||t==="y"?Ss[t]?null:(Ss[t]=!0,()=>{Ss[t]=!1}):Ss.x||Ss.y?null:(Ss.x=Ss.y=!0,()=>{Ss.x=Ss.y=!1})}function nv(t,e){const s=Q2(t),n=new AbortController,o={passive:!0,...e,signal:n.signal};return[s,o,()=>n.abort()]}function Fg(t){return!(t.pointerType==="touch"||sv())}function tS(t,e,s={}){const[n,o,l]=nv(t,s),c=d=>{if(!Fg(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const p=g=>{Fg(g)&&(f(g),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,o)};return n.forEach(d=>{d.addEventListener("pointerenter",c,o)}),l}const iv=(t,e)=>e?t===e?!0:iv(t,e.parentElement):!1,Eh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nS(t){return sS.has(t.tagName)||t.tabIndex!==-1}const cl=new WeakSet;function Vg(t){return e=>{e.key==="Enter"&&t(e)}}function Wd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iS=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=Vg(()=>{if(cl.has(s))return;Wd(s,"down");const o=Vg(()=>{Wd(s,"up")}),l=()=>Wd(s,"cancel");s.addEventListener("keyup",o,e),s.addEventListener("blur",l,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function zg(t){return Eh(t)&&!sv()}function rS(t,e,s={}){const[n,o,l]=nv(t,s),c=d=>{const h=d.currentTarget;if(!zg(d))return;cl.add(h);const f=e(h,d),p=(b,j)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),cl.has(h)&&cl.delete(h),zg(b)&&typeof f=="function"&&f(b,{success:j})},g=b=>{p(b,h===window||h===document||s.useGlobalTarget||iv(h,b.target))},y=b=>{p(b,!1)};window.addEventListener("pointerup",g,o),window.addEventListener("pointercancel",y,o)};return n.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",c,o),X2(d)&&(d.addEventListener("focus",f=>iS(f,o)),!nS(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function rv(t){return xy(t)&&"ownerSVGElement"in t}function oS(t){return rv(t)&&t.tagName==="svg"}const Et=t=>!!(t&&t.getVelocity),aS=[...Jy,dt,On],lS=t=>aS.find(Xy(t)),ov=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function cS(t=!0){const e=C.useContext(uh);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:o}=e,l=C.useId();C.useEffect(()=>{if(t)return o(l)},[t]);const c=C.useCallback(()=>t&&n&&n(l),[l,n,t]);return!s&&n?[!1,c]:[!0]}const av=C.createContext({strict:!1}),Bg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},er={};for(const t in Bg)er[t]={isEnabled:e=>Bg[t].some(s=>!!e[s])};function dS(t){for(const e in t)er[e]={...er[e],...t[e]}}const uS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uS.has(t)}let lv=t=>!bl(t);function hS(t){typeof t=="function"&&(lv=e=>e.startsWith("on")?!bl(e):t(e))}try{hS(require("@emotion/is-prop-valid").default)}catch{}function fS(t,e,s){const n={};for(const o in t)o==="values"&&typeof t.values=="object"||(lv(o)||s===!0&&bl(o)||!e&&!bl(o)||t.draggable&&o.startsWith("onDrag"))&&(n[o]=t[o]);return n}const Il=C.createContext({});function Ll(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jo(t){return typeof t=="string"||Array.isArray(t)}const Oh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dh=["initial",...Oh];function Fl(t){return Ll(t.animate)||Dh.some(e=>jo(t[e]))}function cv(t){return!!(Fl(t)||t.variants)}function mS(t,e){if(Fl(t)){const{initial:s,animate:n}=t;return{initial:s===!1||jo(s)?s:void 0,animate:jo(n)?n:void 0}}return t.inherit!==!1?e:{}}function pS(t){const{initial:e,animate:s}=mS(t,C.useContext(Il));return C.useMemo(()=>({initial:e,animate:s}),[$g(e),$g(s)])}function $g(t){return Array.isArray(t)?t.join(" "):t}function Ug(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ce.test(t))t=parseFloat(t);else return t;const s=Ug(t,e.target.x),n=Ug(t,e.target.y);return`${s}% ${n}%`}},gS={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,o=On.parse(t);if(o.length>5)return n;const l=On.createTransformer(t),c=typeof o[0]!="number"?1:0,d=s.x.scale*e.x,h=s.y.scale*e.y;o[0+c]/=d,o[1+c]/=h;const f=Ze(d,h,.5);return typeof o[2+c]=="number"&&(o[2+c]/=f),typeof o[3+c]=="number"&&(o[3+c]/=f),l(o)}},Fu={borderRadius:{...Xr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xr,borderTopRightRadius:Xr,borderBottomLeftRadius:Xr,borderBottomRightRadius:Xr,boxShadow:gS};function dv(t,{layout:e,layoutId:s}){return lr.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Fu[t]||t==="opacity")}const xS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yS=ar.length;function vS(t,e,s){let n="",o=!0;for(let l=0;l<yS;l++){const c=ar[l],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||s){const f=tv(d,Mh[c]);if(!h){o=!1;const p=xS[c]||c;n+=`${p}(${f}) `}s&&(e[c]=f)}}return n=n.trim(),s?n=s(e,o?"":n):o&&(n="none"),n}function Ah(t,e,s){const{style:n,vars:o,transformOrigin:l}=t;let c=!1,d=!1;for(const h in e){const f=e[h];if(lr.has(h)){c=!0;continue}else if(Oy(h)){o[h]=f;continue}else{const p=tv(f,Mh[h]);h.startsWith("origin")?(d=!0,l[h]=p):n[h]=p}}if(e.transform||(c||s?n.transform=vS(e,t.transform,s):n.transform&&(n.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;n.transformOrigin=`${h} ${f} ${p}`}}const Rh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uv(t,e,s){for(const n in e)!Et(e[n])&&!dv(n,s)&&(t[n]=e[n])}function bS({transformTemplate:t},e){return C.useMemo(()=>{const s=Rh();return Ah(s,e,t),Object.assign({},s.vars,s.style)},[e])}function wS(t,e){const s=t.style||{},n={};return uv(n,s,t),Object.assign(n,bS(t,e)),n}function jS(t,e){const s={},n=wS(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const NS={offset:"stroke-dashoffset",array:"stroke-dasharray"},SS={offset:"strokeDashoffset",array:"strokeDasharray"};function kS(t,e,s=1,n=0,o=!0){t.pathLength=1;const l=o?NS:SS;t[l.offset]=Ce.transform(-n);const c=Ce.transform(e),d=Ce.transform(s);t[l.array]=`${c} ${d}`}function hv(t,{attrX:e,attrY:s,attrScale:n,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,f,p){if(Ah(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),s!==void 0&&(g.y=s),n!==void 0&&(g.scale=n),o!==void 0&&kS(g,o,l,c,!1)}const fv=()=>({...Rh(),attrs:{}}),mv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function CS(t,e,s,n){const o=C.useMemo(()=>{const l=fv();return hv(l,e,mv(n),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};uv(l,t.style,t),o.style={...l,...o.style}}return o}const _S=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ih(t){return typeof t!="string"||t.includes("-")?!1:!!(_S.indexOf(t)>-1||/[A-Z]/u.test(t))}function PS(t,e,s,{latestValues:n},o,l=!1){const d=(Ih(t)?CS:jS)(e,n,o,t),h=fS(e,typeof t=="string",l),f=t!==C.Fragment?{...h,...d,ref:s}:{},{children:p}=e,g=C.useMemo(()=>Et(p)?p.get():p,[p]);return C.createElement(t,{...f,children:g})}function Wg(t){const e=[{},{}];return t?.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Lh(t,e,s,n){if(typeof e=="function"){const[o,l]=Wg(n);e=e(s!==void 0?s:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=Wg(n);e=e(s!==void 0?s:t.custom,o,l)}return e}function dl(t){return Et(t)?t.get():t}function MS({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,o){return{latestValues:TS(s,n,o,t),renderState:e()}}function TS(t,e,s,n){const o={},l=n(t,{});for(const y in l)o[y]=dl(l[y]);let{initial:c,animate:d}=t;const h=Fl(t),f=cv(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const g=p?d:c;if(g&&typeof g!="boolean"&&!Ll(g)){const y=Array.isArray(g)?g:[g];for(let b=0;b<y.length;b++){const j=Lh(t,y[b]);if(j){const{transitionEnd:N,transition:w,...S}=j;for(const _ in S){let T=S[_];if(Array.isArray(T)){const O=p?T.length-1:0;T=T[O]}T!==null&&(o[_]=T)}for(const _ in N)o[_]=N[_]}}}return o}const pv=t=>(e,s)=>{const n=C.useContext(Il),o=C.useContext(uh),l=()=>MS(t,e,n,o);return s?l():dN(l)};function Fh(t,e,s){const{style:n}=t,o={};for(const l in n)(Et(n[l])||e.style&&Et(e.style[l])||dv(l,t)||s?.getValue(l)?.liveStyle!==void 0)&&(o[l]=n[l]);return o}const ES=pv({scrapeMotionValuesFromProps:Fh,createRenderState:Rh});function gv(t,e,s){const n=Fh(t,e,s);for(const o in t)if(Et(t[o])||Et(e[o])){const l=ar.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;n[l]=t[o]}return n}const OS=pv({scrapeMotionValuesFromProps:gv,createRenderState:fv}),DS=Symbol.for("motionComponentSymbol");function Ui(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function AS(t,e,s){return C.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Ui(s)&&(s.current=n))},[e])}const Vh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RS="framerAppearId",xv="data-"+Vh(RS),yv=C.createContext({});function IS(t,e,s,n,o){const{visualElement:l}=C.useContext(Il),c=C.useContext(av),d=C.useContext(uh),h=C.useContext(ov).reducedMotion,f=C.useRef(null);n=n||c.renderer,!f.current&&n&&(f.current=n(t,{visualState:e,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,g=C.useContext(yv);p&&!p.projection&&o&&(p.type==="html"||p.type==="svg")&&LS(f.current,s,o,g);const y=C.useRef(!1);C.useInsertionEffect(()=>{p&&y.current&&p.update(s,d)});const b=s[xv],j=C.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return uN(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),j.current&&p.animationState&&p.animationState.animateChanges())}),C.useEffect(()=>{p&&(!j.current&&p.animationState&&p.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),j.current=!1),p.enteringChildren=void 0)}),p}function LS(t,e,s,n){const{layoutId:o,layout:l,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:vv(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||d&&Ui(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:f})}function vv(t){if(t)return t.options.allowProjection!==!1?t.projection:vv(t.parent)}function Hd(t,{forwardMotionProps:e=!1}={},s,n){s&&dS(s);const o=Ih(t)?OS:ES;function l(d,h){let f;const p={...C.useContext(ov),...d,layoutId:FS(d)},{isStatic:g}=p,y=pS(d),b=o(d,g);if(!g&&dh){VS();const j=zS(p);f=j.MeasureLayout,y.visualElement=IS(t,b,p,n,j.ProjectionNode)}return r.jsxs(Il.Provider,{value:y,children:[f&&y.visualElement?r.jsx(f,{visualElement:y.visualElement,...p}):null,PS(t,d,AS(b,y.visualElement,h),b,g,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=C.forwardRef(l);return c[DS]=t,c}function FS({layoutId:t}){const e=C.useContext(py).id;return e&&t!==void 0?e+"-"+t:t}function VS(t,e){C.useContext(av).strict}function zS(t){const{drag:e,layout:s}=er;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e?.isEnabled(t)||s?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function BS(t,e){if(typeof Proxy>"u")return Hd;const s=new Map,n=(l,c)=>Hd(l,c,t,e),o=(l,c)=>n(l,c);return new Proxy(o,{get:(l,c)=>c==="create"?n:(s.has(c)||s.set(c,Hd(c,void 0,t,e)),s.get(c))})}function bv({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function $S({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function US(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function qd(t){return t===void 0||t===1}function Vu({scale:t,scaleX:e,scaleY:s}){return!qd(t)||!qd(e)||!qd(s)}function ei(t){return Vu(t)||wv(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wv(t){return Hg(t.x)||Hg(t.y)}function Hg(t){return t&&t!=="0%"}function wl(t,e,s){const n=t-s,o=e*n;return s+o}function qg(t,e,s,n,o){return o!==void 0&&(t=wl(t,o,n)),wl(t,s,n)+e}function zu(t,e=0,s=1,n,o){t.min=qg(t.min,e,s,n,o),t.max=qg(t.max,e,s,n,o)}function jv(t,{x:e,y:s}){zu(t.x,e.translate,e.scale,e.originPoint),zu(t.y,s.translate,s.scale,s.originPoint)}const Yg=.999999999999,Kg=1.0000000000001;function WS(t,e,s,n=!1){const o=s.length;if(!o)return;e.x=e.y=1;let l,c;for(let d=0;d<o;d++){l=s[d],c=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Hi(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,jv(t,c)),n&&ei(l.latestValues)&&Hi(t,l.latestValues))}e.x<Kg&&e.x>Yg&&(e.x=1),e.y<Kg&&e.y>Yg&&(e.y=1)}function Wi(t,e){t.min=t.min+e,t.max=t.max+e}function Gg(t,e,s,n,o=.5){const l=Ze(t.min,t.max,o);zu(t,e,s,l,n)}function Hi(t,e){Gg(t.x,e.x,e.scaleX,e.scale,e.originX),Gg(t.y,e.y,e.scaleY,e.scale,e.originY)}function Nv(t,e){return bv(US(t.getBoundingClientRect(),e))}function HS(t,e,s){const n=Nv(t,s),{scroll:o}=e;return o&&(Wi(n.x,o.offset.x),Wi(n.y,o.offset.y)),n}const Qg=()=>({translate:0,scale:1,origin:0,originPoint:0}),qi=()=>({x:Qg(),y:Qg()}),Xg=()=>({min:0,max:0}),ft=()=>({x:Xg(),y:Xg()}),Bu={current:null},Sv={current:!1};function qS(){if(Sv.current=!0,!!dh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bu.current=t.matches;t.addEventListener("change",e),e()}else Bu.current=!1}const YS=new WeakMap;function KS(t,e,s){for(const n in e){const o=e[n],l=s[n];if(Et(o))t.addValue(n,o);else if(Et(l))t.addValue(n,Zi(o,{owner:t}));else if(l!==o)if(t.hasValue(n)){const c=t.getValue(n);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=t.getStaticValue(n);t.addValue(n,Zi(c!==void 0?c:o,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const Jg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GS{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_h,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=qt.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Qe.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=s.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Fl(s),this.isVariantNode=cv(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(s,{},this);for(const y in g){const b=g[y];h[y]!==void 0&&Et(b)&&b.set(h[y])}}mount(e){this.current=e,YS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Sv.current||qS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bu.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),En(this.notifyUpdate),En(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=lr.has(e);n&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Qe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in er){const s=er[e];if(!s)continue;const{isEnabled:n,Feature:o}=s;if(!this.features[e]&&o&&n(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Jg.length;n++){const o=Jg[n];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=e[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=KS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=Zi(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(gy(n)||yy(n))?n=parseFloat(n):!lS(n)&&On.test(s)&&(n=ev(e,s)),this.setBaseTarget(e,Et(n)?n.get():n)),Et(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const l=Lh(this.props,s,this.presenceContext?.custom);l&&(n=l[e])}if(s&&n!==void 0)return n;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Et(o)?o:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new gh),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){Th.render(this.render)}}class kv extends GS{constructor(){super(...arguments),this.KeyframeResolver=G2}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Et(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Cv(t,{style:e,vars:s},n,o){const l=t.style;let c;for(c in e)l[c]=e[c];o?.applyProjectionStyles(l,n);for(c in s)l.setProperty(c,s[c])}function QS(t){return window.getComputedStyle(t)}class XS extends kv{constructor(){super(...arguments),this.type="html",this.renderInstance=Cv}readValueFromInstance(e,s){if(lr.has(s))return this.projection?.isProjecting?Eu(s):m2(e,s);{const n=QS(e),o=(Oy(s)?n.getPropertyValue(s):n[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Nv(e,s)}build(e,s,n){Ah(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return Fh(e,s,n)}}const _v=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JS(t,e,s,n){Cv(t,e,void 0,n);for(const o in e.attrs)t.setAttribute(_v.has(o)?o:Vh(o),e.attrs[o])}class ZS extends kv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ft}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(lr.has(s)){const n=Zy(s);return n&&n.default||0}return s=_v.has(s)?s:Vh(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return gv(e,s,n)}build(e,s,n){hv(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,o){JS(e,s,n,o)}mount(e){this.isSVGTag=mv(e.tagName),super.mount(e)}}const ek=(t,e)=>Ih(t)?new ZS(e):new XS(e,{allowProjection:t!==C.Fragment});function Ki(t,e,s){const n=t.getProps();return Lh(n,e,s!==void 0?s:n.custom,t)}const $u=t=>Array.isArray(t);function tk(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Zi(s))}function sk(t){return $u(t)?t[t.length-1]||0:t}function nk(t,e){const s=Ki(t,e);let{transitionEnd:n={},transition:o={},...l}=s||{};l={...l,...n};for(const c in l){const d=sk(l[c]);tk(t,c,d)}}function ik(t){return!!(Et(t)&&t.add)}function Uu(t,e){const s=t.getValue("willChange");if(ik(s))return s.add(e);if(!s&&Xs.WillChange){const n=new Xs.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Pv(t){return t.props[xv]}const rk=t=>t!==null;function ok(t,{repeat:e,repeatType:s="loop"},n){const o=t.filter(rk),l=e&&s!=="loop"&&e%2===1?0:o.length-1;return o[l]}const ak={type:"spring",stiffness:500,damping:25,restSpeed:10},lk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ck={type:"keyframes",duration:.8},dk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uk=(t,{keyframes:e})=>e.length>2?ck:lr.has(t)?t.startsWith("scale")?lk(e[1]):ak:dk;function hk({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:d,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const zh=(t,e,s,n={},o,l)=>c=>{const d=Ph(n,t)||{},h=d.delay||n.delay||0;let{elapsed:f=0}=n;f=f-Rs(h);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:o};hk(d)||Object.assign(p,uk(t,p)),p.duration&&(p.duration=Rs(p.duration)),p.repeatDelay&&(p.repeatDelay=Rs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Iu(p),p.delay===0&&(g=!0)),(Xs.instantAnimations||Xs.skipAnimations)&&(g=!0,Iu(p),p.delay=0),p.allowFlatten=!d.type&&!d.ease,g&&!l&&e.get()!==void 0){const y=ok(p.keyframes,d);if(y!==void 0){Qe.update(()=>{p.onUpdate(y),p.onComplete()});return}}return d.isSync?new Ch(p):new L2(p)};function fk({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function Mv(t,e,{delay:s=0,transitionOverride:n,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;n&&(l=n);const h=[],f=o&&t.animationState&&t.animationState.getState()[o];for(const p in d){const g=t.getValue(p,t.latestValues[p]??null),y=d[p];if(y===void 0||f&&fk(f,p))continue;const b={delay:s,...Ph(l||{},p)},j=g.get();if(j!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===j&&!b.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const S=Pv(t);if(S){const _=window.MotionHandoffAnimation(S,p,Qe);_!==null&&(b.startTime=_,N=!0)}}Uu(t,p),g.start(zh(p,g,y,t.shouldReduceMotion&&Qy.has(p)?{type:!1}:b,t,N));const w=g.animation;w&&h.push(w)}return c&&Promise.all(h).then(()=>{Qe.update(()=>{c&&nk(t,c)})}),h}function Tv(t,e,s,n=0,o=1){const l=Array.from(t).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),c=t.size,d=(c-1)*n;return typeof s=="function"?s(l,c):o===1?l*n:d-l*n}function Wu(t,e,s={}){const n=Ki(t,e,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(o=s.transitionOverride);const l=n?()=>Promise.all(Mv(t,n,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=o;return mk(t,e,h,f,p,g,s)}:()=>Promise.resolve(),{when:d}=o;if(d){const[h,f]=d==="beforeChildren"?[l,c]:[c,l];return h().then(()=>f())}else return Promise.all([l(),c(s.delay)])}function mk(t,e,s=0,n=0,o=0,l=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(Wu(h,e,{...c,delay:s+(typeof n=="function"?0:n)+Tv(t.variantChildren,h,n,o,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function pk(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const o=e.map(l=>Wu(t,l,s));n=Promise.all(o)}else if(typeof e=="string")n=Wu(t,e,s);else{const o=typeof e=="function"?Ki(t,e,s.custom):e;n=Promise.all(Mv(t,o,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Ev(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const gk=Dh.length;function Ov(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Ov(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<gk;s++){const n=Dh[s],o=t.props[n];(jo(o)||o===!1)&&(e[n]=o)}return e}const xk=[...Oh].reverse(),yk=Oh.length;function vk(t){return e=>Promise.all(e.map(({animation:s,options:n})=>pk(t,s,n)))}function bk(t){let e=vk(t),s=Zg(),n=!0;const o=h=>(f,p)=>{const g=Ki(t,p,h==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:b,...j}=g;f={...f,...j,...b}}return f};function l(h){e=h(t)}function c(h){const{props:f}=t,p=Ov(t.parent)||{},g=[],y=new Set;let b={},j=1/0;for(let w=0;w<yk;w++){const S=xk[w],_=s[S],T=f[S]!==void 0?f[S]:p[S],O=jo(T),E=S===h?_.isActive:null;E===!1&&(j=w);let $=T===p[S]&&T!==f[S]&&O;if($&&n&&t.manuallyAnimateOnMount&&($=!1),_.protectedKeys={...b},!_.isActive&&E===null||!T&&!_.prevProp||Ll(T)||typeof T=="boolean")continue;const z=wk(_.prevProp,T);let L=z||S===h&&_.isActive&&!$&&O||w>j&&O,M=!1;const R=Array.isArray(T)?T:[T];let Z=R.reduce(o(S),{});E===!1&&(Z={});const{prevResolvedValues:re={}}=_,ee={...re,...Z},de=X=>{L=!0,y.has(X)&&(M=!0,y.delete(X)),_.needsAnimating[X]=!0;const B=t.getValue(X);B&&(B.liveStyle=!1)};for(const X in ee){const B=Z[X],q=re[X];if(b.hasOwnProperty(X))continue;let se=!1;$u(B)&&$u(q)?se=!Ev(B,q):se=B!==q,se?B!=null?de(X):y.add(X):B!==void 0&&y.has(X)?de(X):_.protectedKeys[X]=!0}_.prevProp=T,_.prevResolvedValues=Z,_.isActive&&(b={...b,...Z}),n&&t.blockInitialAnimation&&(L=!1);const he=$&&z;L&&(!he||M)&&g.push(...R.map(X=>{const B={type:S};if(typeof X=="string"&&n&&!he&&t.manuallyAnimateOnMount&&t.parent){const{parent:q}=t,se=Ki(q,X);if(q.enteringChildren&&se){const{delayChildren:D}=se.transition||{};B.delay=Tv(q.enteringChildren,t,D)}}return{animation:X,options:B}}))}if(y.size){const w={};if(typeof f.initial!="boolean"){const S=Ki(t,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(w.transition=S.transition)}y.forEach(S=>{const _=t.getBaseTarget(S),T=t.getValue(S);T&&(T.liveStyle=!0),w[S]=_??null}),g.push({animation:w})}let N=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),n=!1,N?e(g):Promise.resolve()}function d(h,f){if(s[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(h,f)),s[h].isActive=f;const p=c(h);for(const g in s)s[g].protectedKeys={};return p}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>s,reset:()=>{s=Zg()}}}function wk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ev(e,t):!1}function Qn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zg(){return{animate:Qn(!0),whileInView:Qn(),whileHover:Qn(),whileTap:Qn(),whileDrag:Qn(),whileFocus:Qn(),exit:Qn()}}class Rn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jk extends Rn{constructor(e){super(e),e.animationState||(e.animationState=bk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ll(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Nk=0;class Sk extends Rn{constructor(){super(...arguments),this.id=Nk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const o=this.node.animationState.setActive("exit",!e);s&&!e&&o.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const kk={animation:{Feature:jk},exit:{Feature:Sk}};function No(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function Do(t){return{point:{x:t.pageX,y:t.pageY}}}const Ck=t=>e=>Eh(e)&&t(e,Do(e));function uo(t,e,s,n){return No(t,e,Ck(s),n)}const Dv=1e-4,_k=1-Dv,Pk=1+Dv,Av=.01,Mk=0-Av,Tk=0+Av;function It(t){return t.max-t.min}function Ek(t,e,s){return Math.abs(t-e)<=s}function ex(t,e,s,n=.5){t.origin=n,t.originPoint=Ze(e.min,e.max,t.origin),t.scale=It(s)/It(e),t.translate=Ze(s.min,s.max,t.origin)-t.originPoint,(t.scale>=_k&&t.scale<=Pk||isNaN(t.scale))&&(t.scale=1),(t.translate>=Mk&&t.translate<=Tk||isNaN(t.translate))&&(t.translate=0)}function ho(t,e,s,n){ex(t.x,e.x,s.x,n?n.originX:void 0),ex(t.y,e.y,s.y,n?n.originY:void 0)}function tx(t,e,s){t.min=s.min+e.min,t.max=t.min+It(e)}function Ok(t,e,s){tx(t.x,e.x,s.x),tx(t.y,e.y,s.y)}function sx(t,e,s){t.min=e.min-s.min,t.max=t.min+It(e)}function jl(t,e,s){sx(t.x,e.x,s.x),sx(t.y,e.y,s.y)}function ls(t){return[t("x"),t("y")]}const Rv=({current:t})=>t?t.ownerDocument.defaultView:null,nx=(t,e)=>Math.abs(t-e);function Dk(t,e){const s=nx(t.x,e.x),n=nx(t.y,e.y);return Math.sqrt(s**2+n**2)}class Iv{constructor(e,s,{transformPagePoint:n,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Kd(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,j=Dk(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!j)return;const{point:N}=y,{timestamp:w}=jt;this.history.push({...N,timestamp:w});const{onStart:S,onMove:_}=this.handlers;b||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Yd(b,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:j,onSessionEnd:N,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Kd(y.type==="pointercancel"?this.lastMoveEventInfo:Yd(b,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,S),N&&N(y,S)},!Eh(e))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=o||window;const d=Do(e),h=Yd(d,this.transformPagePoint),{point:f}=h,{timestamp:p}=jt;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=s;g&&g(e,Kd(h,this.history)),this.removeListeners=To(uo(this.contextWindow,"pointermove",this.handlePointerMove),uo(this.contextWindow,"pointerup",this.handlePointerUp),uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),En(this.updatePoint)}}function Yd(t,e){return e?{point:e(t.point)}:t}function ix(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kd({point:t},e){return{point:t,delta:ix(t,Lv(e)),offset:ix(t,Ak(e)),velocity:Rk(e,.1)}}function Ak(t){return t[0]}function Lv(t){return t[t.length-1]}function Rk(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const o=Lv(t);for(;s>=0&&(n=t[s],!(o.timestamp-n.timestamp>Rs(e)));)s--;if(!n)return{x:0,y:0};const l=cs(o.timestamp-n.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-n.x)/l,y:(o.y-n.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Ik(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?Ze(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?Ze(s,t,n.max):Math.min(t,s)),t}function rx(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function Lk(t,{top:e,left:s,bottom:n,right:o}){return{x:rx(t.x,s,o),y:rx(t.y,e,n)}}function ox(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function Fk(t,e){return{x:ox(t.x,e.x),y:ox(t.y,e.y)}}function Vk(t,e){let s=.5;const n=It(t),o=It(e);return o>n?s=vo(e.min,e.max-n,t.min):n>o&&(s=vo(t.min,t.max-o,e.min)),Qs(0,1,s)}function zk(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Hu=.35;function Bk(t=Hu){return t===!1?t=0:t===!0&&(t=Hu),{x:ax(t,"left","right"),y:ax(t,"top","bottom")}}function ax(t,e,s){return{min:lx(t,e),max:lx(t,s)}}function lx(t,e){return typeof t=="number"?t:t[e]||0}const $k=new WeakMap;class Uk{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Do(g).point)},c=(g,y)=>{const{drag:b,dragPropagation:j,onDragStart:N}=this.getProps();if(b&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eS(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ls(S=>{let _=this.getAxisMotionValue(S).get()||0;if(Is.test(_)){const{projection:T}=this.visualElement;if(T&&T.layout){const O=T.layout.layoutBox[S];O&&(_=It(O)*(parseFloat(_)/100))}}this.originPoint[S]=_}),N&&Qe.postRender(()=>N(g,y)),Uu(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},d=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:b,dragDirectionLock:j,onDirectionLock:N,onDrag:w}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:S}=y;if(j&&this.currentDirection===null){this.currentDirection=Wk(S),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),w&&w(g,y)},h=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>ls(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Iv(e,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:Rv(this.visualElement)})}stop(e,s){const n=e||this.latestPointerEvent,o=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!n)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Qe.postRender(()=>d(n,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:o}=this.getProps();if(!n||!Ka(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(c=Ik(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&Ui(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Lk(n.layoutBox,e):this.constraints=!1,this.elastic=Bk(s),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ls(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=zk(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Ui(e))return!1;const n=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=HS(n,o.root,this.visualElement.getTransformPagePoint());let c=Fk(o.layout.layoutBox,l);if(s){const d=s($S(c));this.hasMutatedConstraints=!!d,d&&(c=bv(d))}return c}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=ls(p=>{if(!Ka(p,s,this.currentDirection))return;let g=h&&h[p]||{};c&&(g={min:0,max:0});const y=o?200:1e6,b=o?40:1e7,j={type:"inertia",velocity:n?e[p]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...g};return this.startAxisValueAnimation(p,j)});return Promise.all(f).then(d)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return Uu(this.visualElement,e),n.start(zh(e,n,0,s,this.visualElement,!1))}stopAnimation(){ls(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ls(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),o=n[s];return o||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ls(s=>{const{drag:n}=this.getProps();if(!Ka(s,n,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(s);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[s];l.set(e[s]-Ze(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ui(s)||!n||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};ls(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();o[c]=Vk({min:h,max:h},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ls(c=>{if(!Ka(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];d.set(Ze(h,f,o[c]))})}addListeners(){if(!this.visualElement.current)return;$k.set(this.visualElement,this);const e=this.visualElement.current,s=uo(e,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Ui(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",n);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Qe.read(n);const c=No(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(ls(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())}));return()=>{c(),s(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Hu,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Ka(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function Wk(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class Hk extends Rn{constructor(e){super(e),this.removeGroupControls=us,this.removeListeners=us,this.controls=new Uk(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||us}unmount(){this.removeGroupControls(),this.removeListeners()}}const cx=t=>(e,s)=>{t&&Qe.postRender(()=>t(e,s))};class qk extends Rn{constructor(){super(...arguments),this.removePointerDownListener=us}onPointerDown(e){this.session=new Iv(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rv(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:o}=this.node.getProps();return{onSessionStart:cx(e),onStart:cx(s),onMove:n,onEnd:(l,c)=>{delete this.session,o&&Qe.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=uo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ul={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Gd=!1;class Yk extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:o}=this.props,{projection:l}=e;l&&(s.group&&s.group.add(l),n&&n.register&&o&&n.register(l),Gd&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),ul.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:o,isPresent:l}=this.props,{projection:c}=n;return c&&(c.isPresent=l,Gd=!0,o||e.layoutDependency!==s||s===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Qe.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Th.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:o}=e;Gd=!0,o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),n&&n.deregister&&n.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fv(t){const[e,s]=cS(),n=C.useContext(py);return r.jsx(Yk,{...t,layoutGroup:n,switchLayoutGroup:C.useContext(yv),isPresent:e,safeToRemove:s})}function Kk(t,e,s){const n=Et(t)?t:Zi(t);return n.start(zh("",n,e,s)),n.animation}const Gk=(t,e)=>t.depth-e.depth;class Qk{constructor(){this.children=[],this.isDirty=!1}add(e){hh(this.children,e),this.isDirty=!0}remove(e){fh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Gk),this.isDirty=!1,this.children.forEach(e)}}function Xk(t,e){const s=qt.now(),n=({timestamp:o})=>{const l=o-s;l>=e&&(En(n),t(l-e))};return Qe.setup(n,!0),()=>En(n)}const Vv=["TopLeft","TopRight","BottomLeft","BottomRight"],Jk=Vv.length,dx=t=>typeof t=="string"?parseFloat(t):t,ux=t=>typeof t=="number"||Ce.test(t);function Zk(t,e,s,n,o,l){o?(t.opacity=Ze(0,s.opacity??1,eC(n)),t.opacityExit=Ze(e.opacity??1,0,tC(n))):l&&(t.opacity=Ze(e.opacity??1,s.opacity??1,n));for(let c=0;c<Jk;c++){const d=`border${Vv[c]}Radius`;let h=hx(e,d),f=hx(s,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||ux(h)===ux(f)?(t[d]=Math.max(Ze(dx(h),dx(f),n),0),(Is.test(f)||Is.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||s.rotate)&&(t.rotate=Ze(e.rotate||0,s.rotate||0,n))}function hx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const eC=zv(0,.5,Cy),tC=zv(.5,.95,us);function zv(t,e,s){return n=>n<t?0:n>e?1:s(vo(t,e,n))}function fx(t,e){t.min=e.min,t.max=e.max}function Ns(t,e){fx(t.x,e.x),fx(t.y,e.y)}function mx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function px(t,e,s,n,o){return t-=e,t=wl(t,1/s,n),o!==void 0&&(t=wl(t,1/o,n)),t}function sC(t,e=0,s=1,n=.5,o,l=t,c=t){if(Is.test(e)&&(e=parseFloat(e),e=Ze(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=Ze(l.min,l.max,n);t===l&&(d-=e),t.min=px(t.min,e,s,d,o),t.max=px(t.max,e,s,d,o)}function gx(t,e,[s,n,o],l,c){sC(t,e[s],e[n],e[o],e.scale,l,c)}const nC=["x","scaleX","originX"],iC=["y","scaleY","originY"];function xx(t,e,s,n){gx(t.x,e,nC,s?s.x:void 0,n?n.x:void 0),gx(t.y,e,iC,s?s.y:void 0,n?n.y:void 0)}function yx(t){return t.translate===0&&t.scale===1}function Bv(t){return yx(t.x)&&yx(t.y)}function vx(t,e){return t.min===e.min&&t.max===e.max}function rC(t,e){return vx(t.x,e.x)&&vx(t.y,e.y)}function bx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $v(t,e){return bx(t.x,e.x)&&bx(t.y,e.y)}function wx(t){return It(t.x)/It(t.y)}function jx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oC{constructor(){this.members=[]}add(e){hh(this.members,e),e.scheduleRender()}remove(e){if(fh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(o=>e===o);if(s===0)return!1;let n;for(let o=s;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){n=l;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aC(t,e,s){let n="";const o=t.x.translate/e.x,l=t.y.translate/e.y,c=s?.z||0;if((o||l||c)&&(n=`translate3d(${o}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:y,skewX:b,skewY:j}=s;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),b&&(n+=`skewX(${b}deg) `),j&&(n+=`skewY(${j}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(n+=`scale(${d}, ${h})`),n||"none"}const Qd=["","X","Y","Z"],lC=1e3;let cC=0;function Xd(t,e,s,n){const{latestValues:o}=e;o[t]&&(s[t]=o[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Uv(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=Pv(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Qe,!(o||l))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Uv(n)}function Wv({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:o}){return class{constructor(c={},d=e?.()){this.id=cC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hC),this.nodes.forEach(gC),this.nodes.forEach(xC),this.nodes.forEach(fC)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qk)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new gh),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=rv(c)&&!oS(c),this.instance=c;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let p,g=0;const y=()=>this.root.updateBlockedByResize=!1;Qe.read(()=>{g=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,p&&p(),p=Xk(y,250),ul.hasAnimatedSinceResize&&(ul.hasAnimatedSinceResize=!1,this.nodes.forEach(kx)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||f.getDefaultTransition()||jC,{onLayoutAnimationStart:N,onLayoutAnimationComplete:w}=f.getProps(),S=!this.targetLayout||!$v(this.targetLayout,b),_=!g&&y;if(this.options.layoutRoot||this.resumeFrom||_||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...Ph(j,"layout"),onPlay:N,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(p,_)}else g||kx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),En(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yC),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Uv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pC),this.nodes.forEach(dC),this.nodes.forEach(uC)):this.nodes.forEach(Sx),this.clearAllSnapshots();const d=qt.now();jt.delta=Qs(0,1e3/60,d-jt.timestamp),jt.timestamp=d,jt.isProcessing=!0,Vd.update.process(jt),Vd.preRender.process(jt),Vd.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mC),this.sharedNodes.forEach(vC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!It(this.snapshot.measuredBox.x)&&!It(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Bv(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&this.instance&&(d||ei(this.latestValues)||p)&&(o(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),NC(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return ft();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(SC))){const{scroll:f}=this.root;f&&(Wi(d.x,f.offset.x),Wi(d.y,f.offset.y))}return d}removeElementScroll(c){const d=ft();if(Ns(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Ns(d,c),Wi(d.x,p.offset.x),Wi(d.y,p.offset.y))}return d}applyTransform(c,d=!1){const h=ft();Ns(h,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Hi(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ei(p.latestValues)&&Hi(h,p.latestValues)}return ei(this.latestValues)&&Hi(h,this.latestValues),h}removeTransform(c){const d=ft();Ns(d,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ei(f.latestValues))continue;Vu(f.latestValues)&&f.updateSnapshot();const p=ft(),g=f.measurePageBox();Ns(p,g),xx(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ei(this.latestValues)&&xx(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=jt.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ft(),this.targetWithTransforms=ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ok(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ns(this.target,this.layout.layoutBox),jv(this.target,this.targetDelta)):Ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Vu(this.parent.latestValues)||wv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,h){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),jl(this.relativeTargetOrigin,d,h),Ns(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Ns(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;WS(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=ft());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mx(this.prevProjectionDelta.x,this.projectionDelta.x),mx(this.prevProjectionDelta.y,this.projectionDelta.y)),ho(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!jx(this.projectionDelta.x,this.prevProjectionDelta.x)||!jx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qi(),this.projectionDelta=qi(),this.projectionDeltaWithTransform=qi()}setAnimationOrigin(c,d=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},g=qi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=ft(),b=h?h.source:void 0,j=this.layout?this.layout.source:void 0,N=b!==j,w=this.getStack(),S=!w||w.members.length<=1,_=!!(N&&!S&&this.options.crossfade===!0&&!this.path.some(wC));this.animationProgress=0;let T;this.mixTargetDelta=O=>{const E=O/1e3;Cx(g.x,c.x,E),Cx(g.y,c.y,E),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bC(this.relativeTarget,this.relativeTargetOrigin,y,E),T&&rC(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ft()),Ns(T,this.relativeTarget)),N&&(this.animationValues=p,Zk(p,f,this.latestValues,E,_,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(En(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{ul.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zi(0)),this.currentAnimation=Kk(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:p}=c;if(!(!d||!h||!f)){if(this!==c&&this.layout&&f&&Hv(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ft();const g=It(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+g;const y=It(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+y}Ns(d,h),Hi(d,p),ho(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new oC),this.sharedNodes.get(c).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&Xd("z",c,f,this.animationValues);for(let p=0;p<Qd.length;p++)Xd(`rotate${Qd[p]}`,c,f,this.animationValues),Xd(`skew${Qd[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=dl(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=dl(d?.pointerEvents)||""),this.hasProjected&&!ei(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=aC(this.projectionDeltaWithTransform,this.treeScale,p);h&&(g=h(p,g)),c.transform=g;const{x:y,y:b}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,f.animationValues?c.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const j in Fu){if(p[j]===void 0)continue;const{correct:N,applyTo:w,isCSSVariable:S}=Fu[j],_=g==="none"?p[j]:N(p[j],f);if(w){const T=w.length;for(let O=0;O<T;O++)c[w[O]]=_}else S?this.options.visualElement.renderState.vars[j]=_:c[j]=_}this.options.layoutId&&(c.pointerEvents=f===this?dl(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(Nx),this.root.sharedNodes.clear()}}}function dC(t){t.updateLayout()}function uC(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?ls(p=>{const g=l?e.measuredBox[p]:e.layoutBox[p],y=It(g);g.min=s[p].min,g.max=g.min+y}):Hv(o,e.layoutBox,s)&&ls(p=>{const g=l?e.measuredBox[p]:e.layoutBox[p],y=It(s[p]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const c=qi();ho(c,s,e.layoutBox);const d=qi();l?ho(d,t.applyTransform(n,!0),e.measuredBox):ho(d,s,e.layoutBox);const h=!Bv(c);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const b=ft();jl(b,e.layoutBox,g.layoutBox);const j=ft();jl(j,s,y.layoutBox),$v(b,j)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=b,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function hC(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fC(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mC(t){t.clearSnapshot()}function Nx(t){t.clearMeasurements()}function Sx(t){t.isLayoutDirty=!1}function pC(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gC(t){t.resolveTargetDelta()}function xC(t){t.calcProjection()}function yC(t){t.resetSkewAndRotation()}function vC(t){t.removeLeadSnapshot()}function Cx(t,e,s){t.translate=Ze(e.translate,0,s),t.scale=Ze(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function _x(t,e,s,n){t.min=Ze(e.min,s.min,n),t.max=Ze(e.max,s.max,n)}function bC(t,e,s,n){_x(t.x,e.x,s.x,n),_x(t.y,e.y,s.y,n)}function wC(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jC={duration:.45,ease:[.4,0,.1,1]},Px=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Mx=Px("applewebkit/")&&!Px("chrome/")?Math.round:us;function Tx(t){t.min=Mx(t.min),t.max=Mx(t.max)}function NC(t){Tx(t.x),Tx(t.y)}function Hv(t,e,s){return t==="position"||t==="preserve-aspect"&&!Ek(wx(e),wx(s),.2)}function SC(t){return t!==t.root&&t.scroll?.wasRoot}const kC=Wv({attachResizeListener:(t,e)=>No(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jd={current:void 0},qv=Wv({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jd.current){const t=new kC({});t.mount(window),t.setOptions({layoutScroll:!0}),Jd.current=t}return Jd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CC={pan:{Feature:qk},drag:{Feature:Hk,ProjectionNode:qv,MeasureLayout:Fv}};function Ex(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,l=n[o];l&&Qe.postRender(()=>l(e,Do(e)))}class _C extends Rn{mount(){const{current:e}=this.node;e&&(this.unmount=tS(e,(s,n)=>(Ex(this.node,n,"Start"),o=>Ex(this.node,o,"End"))))}unmount(){}}class PC extends Rn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=To(No(this.node.current,"focus",()=>this.onFocus()),No(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ox(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),l=n[o];l&&Qe.postRender(()=>l(e,Do(e)))}class MC extends Rn{mount(){const{current:e}=this.node;e&&(this.unmount=rS(e,(s,n)=>(Ox(this.node,n,"Start"),(o,{success:l})=>Ox(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qu=new WeakMap,Zd=new WeakMap,TC=t=>{const e=qu.get(t.target);e&&e(t)},EC=t=>{t.forEach(TC)};function OC({root:t,...e}){const s=t||document;Zd.has(s)||Zd.set(s,{});const n=Zd.get(s),o=JSON.stringify(e);return n[o]||(n[o]=new IntersectionObserver(EC,{root:t,...e})),n[o]}function DC(t,e,s){const n=OC(e);return qu.set(t,s),n.observe(t),()=>{qu.delete(t),n.unobserve(t)}}const AC={some:0,all:1};class RC extends Rn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:o="some",once:l}=e,c={root:s?s.current:void 0,rootMargin:n,threshold:typeof o=="number"?o:AC[o]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,l&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=f?p:g;y&&y(h)};return DC(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(IC(e,s))&&this.startObserver()}unmount(){}}function IC({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const LC={inView:{Feature:RC},tap:{Feature:MC},focus:{Feature:PC},hover:{Feature:_C}},FC={layout:{ProjectionNode:qv,MeasureLayout:Fv}},VC={...kk,...LC,...CC,...FC},Zt=BS(VC,ek);function In(){const t=ms(),e=Pe(),s=[{id:"home",label:"Home",icon:"",path:"/customer/home"},{id:"orders",label:"Orders",icon:"",path:"/customer/orders"},{id:"offers",label:"Offers",icon:"",path:"/customer/offers"},{id:"cart",label:"Cart",icon:"",path:"/customer/cart"},{id:"more",label:"More",icon:"",path:"/customer/more"}];return r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 flex justify-around items-center z-40",children:s.map(n=>{const o=t.pathname===n.path;return r.jsxs(Zt.button,{onClick:()=>e(n.path),whileTap:{scale:.95},animate:{scale:o?1.06:1},transition:{type:"spring",stiffness:300,damping:18},className:`flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition ${o?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600"}`,children:[r.jsx("span",{className:"text-xl",children:n.icon}),r.jsx("span",{className:"text-xs font-medium",children:n.label})]},n.id)})})}function zC(){const[t,e]=C.useState(null);return C.useEffect(()=>{function s(n){const o=n&&n.detail&&n.detail.message?n.detail.message:"",l=n&&n.detail&&n.detail.timeout?n.detail.timeout:1e3;if(!o)return;e(o);const c=setTimeout(()=>e(null),l);return()=>clearTimeout(c)}return window.addEventListener("app:toast",s),()=>window.removeEventListener("app:toast",s)},[]),t?r.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 top-20 z-50",children:r.jsx("div",{className:"bg-amber-500 text-white px-6 py-3 rounded shadow-lg",children:t})}):null}const BC=[{id:1,username:"",password:"1",role:"admin",name:"",status:"active"},{id:2,username:"customer1",password:"pass",role:"customer",name:"Ali Ahmed",status:"active",email:"ali@example.com",phone:"0795234567"},{id:5,username:"customer2",password:"pass",role:"customer",name:"Fatima Mohamed",status:"active",email:"fatima@example.com",phone:"0798765432"},{id:6,username:"customer3",password:"pass",role:"customer",name:"Omar Hassan",status:"active",email:"omar@example.com",phone:"0796543210"},{id:7,username:"customer4",password:"pass",role:"customer",name:"Noor Ibrahim",status:"active",email:"noor@example.com",phone:"0797654321"},{id:8,username:"customer5",password:"pass",role:"customer",name:"Sara Khalil",status:"inactive",email:"sara@example.com",phone:"0791234567"},{id:9,username:"customer6",password:"pass",role:"customer",name:"Rayan Salah",status:"active",email:"rayan@example.com",phone:"0799876543"},{id:10,username:"customer7",password:"pass",role:"customer",name:"Layla Hassan",status:"active",email:"layla@example.com",phone:"0792345678"},{id:11,username:"customer8",password:"pass",role:"customer",name:"Karim Amin",status:"active",email:"karim@example.com",phone:"0793456789"},{id:12,username:"customer9",password:"pass",role:"customer",name:"Mona Yousef",status:"active",email:"mona@example.com",phone:"0794567890"},{id:13,username:"customer10",password:"pass",role:"customer",name:"Badr Khalid",status:"active",email:"badr@example.com",phone:"0795678901"},{id:3,username:"store1",password:"pass",role:"store",name:"Coffee Bazaar",status:"active",email:"store1@example.com",phone:"0791111111",category:"Cafs",image:"https://picsum.photos/seed/store1/400/300",region:" ",demo:!0},{id:14,username:"store2",password:"pass",role:"store",name:"Fashion Hub",status:"active",email:"store2@example.com",phone:"0792222222",category:"Accessories & Gifts",image:"https://picsum.photos/seed/store2/400/300",demo:!0},{id:15,username:"store3",password:"pass",role:"store",name:"Tech Store",status:"active",email:"store3@example.com",phone:"0793333333",category:"Accessories & Gifts",image:"https://picsum.photos/seed/store3/400/300",demo:!0},{id:16,username:"store4",password:"pass",role:"store",name:"Books Gallery",status:"inactive",email:"store4@example.com",phone:"0794444444",category:"Stationery",image:"https://picsum.photos/seed/store4/400/300",demo:!0},{id:17,username:"store5",password:"pass",role:"store",name:"Home Dcor",status:"active",email:"store5@example.com",phone:"0795555555",category:"Home Supplies",image:"https://picsum.photos/seed/store5/400/300",region:" ",demo:!0},{id:18,username:"store6",password:"pass",role:"store",name:"Beauty Box",status:"active",email:"store6@example.com",phone:"0796666666",category:"Pharmacy",image:"https://picsum.photos/seed/store6/400/300",demo:!0},{id:19,username:"store7",password:"pass",role:"store",name:"Sportswear",status:"active",email:"store7@example.com",phone:"0797777777",category:"Accessories & Gifts",image:"https://picsum.photos/seed/store7/400/300",demo:!0},{id:20,username:"store8",password:"pass",role:"store",name:"Grocery Plus",status:"active",email:"store8@example.com",phone:"0798888888",category:"Restaurants",image:"https://picsum.photos/seed/store8/400/300",region:" ",demo:!0},{id:21,username:"store9",password:"pass",role:"store",name:"Jewelry World",status:"active",email:"store9@example.com",phone:"0799999999",category:"Accessories & Gifts",image:"https://picsum.photos/seed/store9/400/300",demo:!0},{id:22,username:"store10",password:"pass",role:"store",name:"Pet Paradise",status:"active",email:"store10@example.com",phone:"0790000000",category:"Home Supplies",image:"https://picsum.photos/seed/store10/400/300",demo:!0},{id:23,username:"store11",password:"pass",role:"store",name:"Garden Center",status:"active",email:"store11@example.com",phone:"0791212121",category:"Home Supplies",image:"https://picsum.photos/seed/store11/400/300",demo:!0},{id:24,username:"store12",password:"pass",role:"store",name:"Electronics",status:"active",email:"store12@example.com",phone:"0792323232",category:"Accessories & Gifts",image:"https://picsum.photos/seed/store12/400/300",demo:!0},{id:4,username:"driver1",password:"pass",role:"driver",name:"Ahmad Khalil",status:"active",email:"driver1@example.com",phone:"0795432100"},{id:25,username:"driver2",password:"pass",role:"driver",name:"Waleed Ameen",status:"active",email:"driver2@example.com",phone:"0796789012"},{id:26,username:"driver3",password:"pass",role:"driver",name:"Mustafa Ali",status:"active",email:"driver3@example.com",phone:"0797890123"},{id:27,username:"driver4",password:"pass",role:"driver",name:"Hassan Salem",status:"active",email:"driver4@example.com",phone:"0798901234"},{id:28,username:"driver5",password:"pass",role:"driver",name:"Jamal Fayed",status:"inactive",email:"driver5@example.com",phone:"0799012345"},{id:29,username:"driver6",password:"pass",role:"driver",name:"Zain Malik",status:"active",email:"driver6@example.com",phone:"0790123456"},{id:30,username:"driver7",password:"pass",role:"driver",name:"Samir Hassan",status:"active",email:"driver7@example.com",phone:"0791357924"},{id:31,username:"driver8",password:"pass",role:"driver",name:"Nabil Ahmed",status:"active",email:"driver8@example.com",phone:"0792468135"},{id:32,username:"almarai",password:"pass",role:"store",name:"",status:"active",email:"almarai@example.com",phone:"0793334444",category:"  ",image:"https://source.unsplash.com/400x300/?milk,dairy",region:"",demo:!0},{id:33,username:"taybeh",password:"pass",role:"store",name:"",status:"active",email:"taybeh@example.com",phone:"0793335555",category:"Grocery",image:"https://source.unsplash.com/400x300/?grocery,supermarket",region:"",demo:!0}];function $C(){try{if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem("ecom_users");if(t)return JSON.parse(t)}}catch{}return BC}const Be=$C();function Dn(){try{typeof window<"u"&&window.localStorage&&localStorage.setItem("ecom_users",JSON.stringify(Be))}catch{}}const UC=[{id:1,name:{en:"Coffee Mug",ar:" "},price:12.5,image:"https://picsum.photos/seed/p1/200/150",stock:150,sku:"CM-001",store:"Coffee Bazaar"},{id:2,name:{en:"T-Shirt",ar:""},price:22,image:"https://picsum.photos/seed/p2/200/150",stock:200,sku:"TS-001",store:"Fashion Hub"},{id:3,name:{en:"Notebook",ar:""},price:6.9,image:"https://picsum.photos/seed/p3/200/150",stock:500,sku:"NB-001",store:"Books Gallery"},{id:4,name:{en:"Wireless Headphones",ar:" "},price:45.99,image:"https://picsum.photos/seed/p4/200/150",stock:75,sku:"WH-001",store:"Tech Store"},{id:5,name:{en:"Phone Case",ar:" "},price:8.5,image:"https://picsum.photos/seed/p5/200/150",stock:300,sku:"PC-001",store:"Tech Store"},{id:6,name:{en:"USB Cable",ar:"   "},price:4.99,image:"https://picsum.photos/seed/p6/200/150",stock:400,sku:"UC-001",store:"Electronics"},{id:7,name:{en:"Screen Protector",ar:" "},price:3.99,image:"https://picsum.photos/seed/p7/200/150",stock:250,sku:"SP-001",store:"Tech Store"},{id:8,name:{en:"Power Bank",ar:" "},price:19.99,image:"https://picsum.photos/seed/p8/200/150",stock:100,sku:"PB-001",store:"Electronics"},{id:9,name:{en:"Desk Lamp",ar:" "},price:25.5,image:"https://picsum.photos/seed/p9/200/150",stock:60,sku:"DL-001",store:"Home Dcor"},{id:10,name:{en:"Pen Set",ar:" "},price:14.99,image:"https://picsum.photos/seed/p10/200/150",stock:180,sku:"PS-001",store:"Books Gallery"},{id:11,name:{en:"Almarai Fresh Milk 1L",ar:"  1"},price:1.25,image:"https://source.unsplash.com/400x300/?milk,almarai",stock:200,sku:"ALM-001",store:"",category:""},{id:12,name:{en:"Almarai Laban 500g",ar:"  500"},price:.95,image:"https://source.unsplash.com/400x300/?yogurt,labneh",stock:220,sku:"ALM-002",store:"",category:"  "},{id:13,name:{en:"Almarai Cheddar 200g",ar:"   200"},price:3.5,image:"https://source.unsplash.com/400x300/?cheese,cheddar",stock:140,sku:"ALM-003",store:"",category:"  "},{id:14,name:{en:"Taybeh Labneh 400g",ar:"  400"},price:2.99,image:"https://source.unsplash.com/400x300/?labneh,labaneh",stock:120,sku:"TYB-001",store:"",category:"  "},{id:15,name:{en:"Taybeh Mixed Cheese 500g",ar:"   500"},price:4.5,image:"https://source.unsplash.com/400x300/?cheese,mixed",stock:90,sku:"TYB-002",store:"",category:"  "},{id:16,name:{en:"Taybeh Yogurt 1kg",ar:"  1"},price:2.4,image:"https://source.unsplash.com/400x300/?yogurt",stock:160,sku:"TYB-003",store:"",category:"  "},{id:17,name:{en:"Taybeh Orange Juice 1L",ar:"   1"},price:1.8,image:"https://source.unsplash.com/400x300/?orange,juice",stock:200,sku:"TYB-004",store:"",category:""},{id:18,name:{en:"Taybeh Butter 200g",ar:"  200"},price:2.1,image:"https://source.unsplash.com/400x300/?butter",stock:110,sku:"TYB-005",store:"",category:"  "},{id:19,name:{en:"Chicken Thigh 1kg",ar:"  1"},price:4.5,image:"https://source.unsplash.com/400x300/?chicken",stock:120,sku:"MEAT-001",store:"",category:"  "},{id:20,name:{en:"Beef Mince 500g",ar:"  500"},price:6.9,image:"https://source.unsplash.com/400x300/?beef",stock:80,sku:"MEAT-002",store:"",category:"  "},{id:21,name:{en:"Arabic Flat Bread",ar:"  "},price:.5,image:"https://source.unsplash.com/400x300/?bread",stock:300,sku:"BAK-001",store:"",category:""},{id:22,name:{en:"Butter Croissant",ar:" "},price:.9,image:"https://source.unsplash.com/400x300/?croissant",stock:200,sku:"BAK-002",store:"",category:""},{id:23,name:{en:"Mixed Salad Pack",ar:"  "},price:2.5,image:"https://source.unsplash.com/400x300/?salad",stock:150,sku:"FRESH-001",store:"",category:" "},{id:24,name:{en:"Fresh Herbs Bunch",ar:"  "},price:1.2,image:"https://source.unsplash.com/400x300/?herbs",stock:180,sku:"FRESH-002",store:"",category:" "},{id:25,name:{en:"Bananas 1kg",ar:" 1"},price:1.1,image:"https://source.unsplash.com/400x300/?bananas",stock:220,sku:"FR-001",store:"",category:" "},{id:26,name:{en:"Tomatoes 1kg",ar:" 1"},price:.9,image:"https://source.unsplash.com/400x300/?tomatoes",stock:200,sku:"FR-002",store:"",category:" "},{id:27,name:{en:"Canned Tuna 185g",ar:"  185"},price:1.8,image:"https://source.unsplash.com/400x300/?tuna,canned",stock:160,sku:"CAN-001",store:"",category:""},{id:28,name:{en:"Canned Sweet Corn 400g",ar:"  400"},price:1.2,image:"https://source.unsplash.com/400x300/?canned,corn",stock:180,sku:"CAN-002",store:"",category:""},{id:29,name:{en:"Liquid Hand Soap 500ml",ar:"  500"},price:2,image:"https://source.unsplash.com/400x300/?soap",stock:260,sku:"PERSONAL-001",store:"",category:" "},{id:30,name:{en:"Fluoride Toothpaste 120g",ar:"  120"},price:1.5,image:"https://source.unsplash.com/400x300/?toothpaste",stock:300,sku:"PERSONAL-002",store:"",category:" "},{id:31,name:{en:"Face Moisturizer 50ml",ar:"   50"},price:5.5,image:"https://source.unsplash.com/400x300/?moisturizer",stock:140,sku:"BEAUTY-001",store:"",category:" "},{id:32,name:{en:"Perfume Spray 50ml",ar:" 50"},price:12,image:"https://source.unsplash.com/400x300/?perfume",stock:90,sku:"BEAUTY-002",store:"",category:" "},{id:33,name:{en:"Paper Towels Roll",ar:"  "},price:1.8,image:"https://source.unsplash.com/400x300/?paper,towels",stock:200,sku:"HOME-001",store:"",category:" "},{id:34,name:{en:"Dishwashing Liquid 750ml",ar:"   750"},price:2.3,image:"https://source.unsplash.com/400x300/?dishwashing",stock:210,sku:"HOME-002",store:"",category:" "},{id:35,name:{en:"Cigarettes Pack (20)",ar:"  20 "},price:3.5,image:"https://source.unsplash.com/400x300/?cigarettes",stock:120,sku:"TOB-001",store:"",category:""},{id:36,name:{en:"Hookah Tobacco 250g",ar:"  250"},price:4,image:"https://source.unsplash.com/400x300/?hookah,tobacco",stock:80,sku:"TOB-002",store:"",category:""},{id:37,name:{en:"Baking Yeast 7g",ar:"  7"},price:.4,image:"https://source.unsplash.com/400x300/?yeast",stock:300,sku:"COOK-001",store:"",category:" "},{id:38,name:{en:"Extra Virgin Olive Oil 500ml",ar:"   500"},price:6.5,image:"https://source.unsplash.com/400x300/?olive,oil",stock:140,sku:"COOK-002",store:"",category:" "},{id:39,name:{en:"Greek Yogurt 500g",ar:"  500"},price:2.5,image:"https://source.unsplash.com/400x300/?yogurt,greek",stock:220,sku:"DAIRY-001",store:"",category:"  "},{id:40,name:{en:"Feta Cheese 200g",ar:"  200"},price:3.2,image:"https://source.unsplash.com/400x300/?feta,cheese",stock:160,sku:"DAIRY-002",store:"",category:"  "},{id:41,name:{en:"Whole Milk 2L",ar:"   2"},price:2.2,image:"https://source.unsplash.com/400x300/?milk,2l",stock:200,sku:"MILK-001",store:"",category:""},{id:42,name:{en:"Skim Milk 1L",ar:"   1"},price:1.8,image:"https://source.unsplash.com/400x300/?skim,milk",stock:180,sku:"MILK-002",store:"",category:""},{id:43,name:{en:"Mineral Water 1.5L",ar:"  1.5"},price:.6,image:"https://source.unsplash.com/400x300/?water",stock:300,sku:"DRINK-001",store:"",category:""},{id:44,name:{en:"Cola Soda 330ml",ar:"  330"},price:.7,image:"https://source.unsplash.com/400x300/?soda",stock:260,sku:"DRINK-002",store:"",category:""},{id:45,name:{en:"Breakfast Cereal 500g",ar:"  500"},price:3.5,image:"https://source.unsplash.com/400x300/?cereal",stock:190,sku:"BF-001",store:"",category:" "},{id:46,name:{en:"Natural Honey 250g",ar:"  250"},price:4.2,image:"https://source.unsplash.com/400x300/?honey",stock:120,sku:"BF-002",store:"",category:" "},{id:47,name:{en:"Protein Bar Chocolate",ar:"  "},price:1.8,image:"https://source.unsplash.com/400x300/?protein,bar",stock:200,sku:"PRO-001",store:"",category:"  "},{id:48,name:{en:"Whey Protein 1kg",ar:"  1"},price:29.99,image:"https://source.unsplash.com/400x300/?whey,protein",stock:60,sku:"PRO-002",store:"",category:"  "},{id:49,name:{en:"Baby Diapers Size 3",ar:"   3"},price:6.5,image:"https://source.unsplash.com/400x300/?diapers",stock:140,sku:"KIDS-001",store:"",category:" "},{id:50,name:{en:"Baby Wipes 72pcs",ar:"   72"},price:2.5,image:"https://source.unsplash.com/400x300/?baby,wipes",stock:200,sku:"KIDS-002",store:"",category:" "},{id:51,name:{en:"Ballpoint Pens Pack",ar:"  "},price:1.2,image:"https://source.unsplash.com/400x300/?pens",stock:300,sku:"OFF-001",store:"",category:"  "},{id:52,name:{en:"Children Puzzle Game",ar:"  "},price:3,image:"https://source.unsplash.com/400x300/?puzzle,game",stock:120,sku:"OFF-002",store:"",category:"  "},{id:53,name:{en:"Potato Chips 120g",ar:"  120"},price:1.1,image:"https://source.unsplash.com/400x300/?chips",stock:260,sku:"SNACK-001",store:"",category:"  "},{id:54,name:{en:"Chocolate Bar 100g",ar:"  100"},price:1,image:"https://source.unsplash.com/400x300/?chocolate",stock:300,sku:"SNACK-002",store:"",category:"  "},{id:55,name:{en:"Coffee Beans 250g",ar:"  250"},price:6,image:"https://source.unsplash.com/400x300/?coffee,beans",stock:140,sku:"COF-001",store:"",category:" "},{id:56,name:{en:"Green Tea Box 20pcs",ar:"  20 "},price:2.2,image:"https://source.unsplash.com/400x300/?green,tea",stock:200,sku:"TEA-001",store:"",category:" "},{id:57,name:{en:"Disposable Plates 20pcs",ar:"   20"},price:1.5,image:"https://source.unsplash.com/400x300/?disposable,plates",stock:220,sku:"ONE-001",store:"",category:" "},{id:58,name:{en:"Disposable Cups 50pcs",ar:"   50"},price:2.5,image:"https://source.unsplash.com/400x300/?disposable,cups",stock:180,sku:"ONE-002",store:"",category:" "},{id:59,name:{en:"Frozen Veg Mix 1kg",ar:"  1"},price:3,image:"https://source.unsplash.com/400x300/?frozen,vegetables",stock:160,sku:"FROZ-001",store:"",category:" "},{id:60,name:{en:"Frozen Pizza",ar:" "},price:4.5,image:"https://source.unsplash.com/400x300/?frozen,pizza",stock:120,sku:"FROZ-002",store:"",category:" "},{id:61,name:{en:"Vanilla Ice Cream Tub 500g",ar:"   500"},price:2.8,image:"https://source.unsplash.com/400x300/?vanilla,icecream",stock:140,sku:"ICE-001",store:"",category:" "},{id:62,name:{en:"Chocolate Ice Cream Tub 500g",ar:"   500"},price:2.9,image:"https://source.unsplash.com/400x300/?chocolate,icecream",stock:130,sku:"ICE-002",store:"",category:" "},{id:63,name:{en:"Tomato Sauce 500g",ar:"  500"},price:1.4,image:"https://source.unsplash.com/400x300/?tomato,sauce",stock:200,sku:"SPICE-001",store:"",category:" "},{id:64,name:{en:"Mixed Spice Jar 50g",ar:"  50"},price:1.1,image:"https://source.unsplash.com/400x300/?spices",stock:180,sku:"SPICE-002",store:"",category:" "},{id:65,name:{en:"Laundry Powder 2kg",ar:"  2"},price:6.5,image:"https://source.unsplash.com/400x300/?laundry,detergent",stock:140,sku:"CLEAN-001",store:"",category:" "},{id:66,name:{en:"Multi Surface Cleaner 1L",ar:"   1"},price:3.2,image:"https://source.unsplash.com/400x300/?cleaner",stock:160,sku:"CLEAN-002",store:"",category:" "},{id:67,name:{en:"Ready Chicken Meal",ar:"  "},price:5.5,image:"https://source.unsplash.com/400x300/?ready,meal",stock:120,sku:"READY-001",store:"",category:" "},{id:68,name:{en:"Sushi Box 8pcs",ar:"  8 "},price:7,image:"https://source.unsplash.com/400x300/?sushi",stock:80,sku:"READY-002",store:"",category:" "}];function WC(){try{if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem("ecom_products");if(t)return JSON.parse(t)}}catch{}return UC.slice()}const Lt=WC();function Nl(){try{typeof window<"u"&&window.localStorage&&localStorage.setItem("ecom_products",JSON.stringify(Lt))}catch{}}const Tt=[],Yi={totalOrders:0,totalRevenue:0,activeUsers:0,activeStores:0},Yu=new Set;function Cs(t){return Yu.add(t),()=>Yu.delete(t)}function ci(t){for(const e of Yu)try{e(t)}catch{}}function Bh(){return Yi}function Ae(){return Tt}function mt(){return Be}function Oe(){return Lt}function HC(){return Be.filter(t=>t.role==="store"&&t.status==="active"&&!t.demo)}function qC(t=[],e=""){const s=(t||[]).reduce((c,d)=>c+(d.qty||d.quantity||1),0),n=new Set((t||[]).map(c=>c.productId)).size||1,o=Tt.filter(c=>c.store===e&&c.status!=="delivered").length;let l=Math.round(3*s+2*n+Math.min(30,o*2));return l=l+(Math.floor(Math.random()*7)-3),l=Math.max(5,Math.min(90,l)),l}function YC(){return String(Math.floor(1e9+Math.random()*9e9))}setInterval(()=>{ci({type:"tick",stats:Yi,orders:Tt})},1e3);const Yv=[{id:"offers-discounts",name:"Offers & Discounts",icon:"",color:"bg-red-100"},{id:"restaurants",name:"Restaurants",icon:"",color:"bg-orange-100"},{id:"accessories-gifts",name:"Accessories & Gifts",icon:"",color:"bg-pink-100"},{id:"home-supplies",name:"Home Supplies",icon:"",color:"bg-blue-100"},{id:"stationery",name:"Stationery",icon:"",color:"bg-yellow-100"},{id:"bakery",name:"Bakery",icon:"",color:"bg-amber-100"},{id:"delivery-service",name:"Delivery Service",icon:"",color:"bg-green-100"},{id:"sweets-desserts",name:"Sweets & Desserts",icon:"",color:"bg-purple-100"},{id:"grocery",name:"Grocery",icon:"",color:"bg-green-200"},{id:"produce",name:"Produce (Fruits & Vegetables)",icon:"",color:"bg-lime-100"},{id:"cafes",name:"Cafs",icon:"",color:"bg-amber-100"},{id:"pharmacy",name:"Pharmacy",icon:"",color:"bg-cyan-100"},{id:"water",name:"Water",icon:"",color:"bg-blue-200"}],KC="ecom_surge_config";function GC(){try{if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem(KC);if(t)return JSON.parse(t)}}catch{}return{mode:"off",multiplier:1,schedule:[]}}let jn=GC();function QC(t){try{if(!jn)return 1;if(jn.mode==="manual")return Number(jn.multiplier)||1;if(jn.mode==="auto"&&Array.isArray(jn.schedule)){const e=new Date,s=e.getHours();for(const n of jn.schedule){const o=!n.days||n.days.length===0||(n.days||[]).includes(e.getDay()),l=n.start??0,c=n.end??24;if(o&&s>=l&&s<c)return Number(n.multiplier)||Number(jn.multiplier)||1}}}catch{}return Number(jn.multiplier)||1}const $h=[" ","","","","","","","",""," ",""," ","","","","","","","",""];function Kv(t){const e=t&&t.id?String(t.id):YC(),s=t.store||t.items&&t.items[0]&&Lt.find(f=>f.id===t.items[0].productId)?.store||"",n=t&&t.prepMinutes?t.prepMinutes:qC(t.items,s),o=t&&t.region?t.region:(Be.find(f=>f.role==="store"&&(f.name===s||f.username===s))||{}).region||"",l=t&&t.date?t.date:Date.now(),c=t&&t.estimatedReadyAt?t.estimatedReadyAt:Date.now()+n*6e4,d={id:e,...t,prepMinutes:n,region:o,date:l,estimatedReadyAt:c},h=QC()||1;d.total!=null&&(d.total=Math.round((Number(d.total)||0)*h*100)/100),Tt.push(d),Yi.totalOrders=(Yi.totalOrders||0)+1,Yi.totalRevenue=(Yi.totalRevenue||0)+(d.total||0);try{typeof window<"u"&&window.localStorage&&localStorage.setItem("app_last_order_v1",JSON.stringify(d))}catch{}return ci({type:"order",order:d,surgeMultiplier:h}),d}function ot(t,e){const s=Tt.findIndex(n=>n.id===t);return s===-1?null:(Tt[s]={...Tt[s],...e},ci({type:"update",order:Tt[s]}),Tt[s])}function XC(t,e={}){const s=Tt.findIndex(c=>c.id===t);if(s===-1)return!1;const n=Date.now(),o=Tt[s].date||Tt[s].createdAt||0,l=Math.max(0,Math.round((n-o)/6e4));return Tt[s]={...Tt[s],status:"cancelled",cancelledAt:n,cancelledBy:e.by||null,cancelReason:e.reason||null,timeToPrepareMinutes:l},ci({type:"update",order:Tt[s]}),!0}(function(){try{if(Tt.length)return;const e=Date.now(),s=[{id:"1000000001",userId:2,items:[{productId:1,qty:2},{productId:5,qty:1}],total:Math.round((12.5*2+8.5*1)*100)/100,status:"preparing",store:"Coffee Bazaar",phone:"0795234567",address:"  -  23",date:e-1e3*60*30},{id:"1000000002",userId:5,items:[{productId:11,qty:3}],total:Math.round(1.25*3*100)/100,status:"enroute",store:"",phone:"0798765432",address:"  -  4",date:e-1e3*60*20,driverId:4},{id:"1000000003",userId:6,items:[{productId:4,qty:1},{productId:8,qty:1}],total:Math.round((45.99+19.99)*100)/100,status:"delivered",store:"Tech Store",phone:"0796543210",address:"  - ",date:e-1e3*60*60*2,driverId:25},{id:"1000000004",userId:9,items:[{productId:3,qty:5}],total:Math.round(6.9*5*100)/100,status:"pending",store:"Books Gallery",phone:"0799876543",address:" ",date:e-1e3*60*5}];for(const n of s)Kv(n)}catch{}})();const Gv="app_wallet_balance_v1",Qv="app_wallet_txs_v1";function JC(t,e){try{return JSON.parse(localStorage.getItem(t))}catch{return e}}function Uh(){try{return Number(localStorage.getItem(Gv)||0)}catch{return 0}}function Vl(t){try{localStorage.setItem(Gv,String(Number(t)||0))}catch{}window.dispatchEvent(new CustomEvent("wallet:updated"))}function Ku(){return JC(Qv,[])||[]}function Ao(t){try{const e=Ku()||[],s=[t,...e];return localStorage.setItem(Qv,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("wallet:updated")),s}catch{return Ku()}}function ZC(t){const e=Number(t)||0;if(e<=0)return!1;const n=+(Uh()+e).toFixed(2);return Vl(n),Ao({id:Date.now(),type:"topup",amount:e,date:new Date().toISOString()}),!0}function Xv(t){const e=Number(t)||0,s=Uh();if(e<=0||s<e)return!1;const n=+(s-e).toFixed(2);return Vl(n),Ao({id:Date.now(),type:"spend",amount:e,date:new Date().toISOString()}),!0}const Dx={getBalance:Uh,setBalance:Vl,getTxs:Ku,addTx:Ao,addFunds:ZC,deduct:Xv},Gu="app_financial_logs_v1";function Ro(t,e){try{return JSON.parse(localStorage.getItem(t))}catch{return e}}function zl(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{}}function Js(t){try{window.dispatchEvent(new CustomEvent(t.type,{detail:t}))}catch{}try{ci&&typeof ci=="function"&&ci(t)}catch{}}function e_({userId:t,items:e,total:s,payment:n={method:"card"},location:o=null,coords:l=null,store:c=""}){if(n&&n.method==="wallet"){if(!Xv(s))throw new Error("Insufficient wallet balance");const f={id:Date.now(),userId:t,type:"debit",amount:s,date:new Date().toISOString(),meta:{note:"Order payment"}};Jv(t,f)}const d=Kv({userId:t,items:e,total:s,status:"pending",store:c,location:o,payment:n,coords:l});return Js({type:"app:newOrder",order:d}),Js({type:"order",order:d}),d}function Jv(t,e){const s=Ro(Gu,{})||{},n=s[t]||[],o=[e,...n];s[t]=o,zl(Gu,s);try{Ao({...e})}catch{}return Js({type:"app:financialTx",userId:t,tx:e}),o}function t_(t){return(Ro(Gu,{})||{})[t]||[]}function s_(t,e){try{const s=mt();for(const n of s)n.role==="store"&&(n.username===t||n.name===t)&&(n.status=e?"active":"inactive");try{localStorage.setItem("ecom_users",JSON.stringify(s))}catch{}return Js({type:"app:storeStatusChanged",store:t,isOpen:e}),!0}catch{return!1}}function n_(t,e){const s=ot(t,{status:"on_the_way",driverId:e});return Js({type:"app:driverAssigned",order:s,driverId:e}),s}function i_(t,e){try{const s="app_searches_v1",n=Ro(s,[])||[];return n.unshift({id:Date.now(),userId:t,query:e,date:new Date().toISOString()}),zl(s,n),Js({type:"app:search",userId:t,query:e}),n}catch{return[]}}function r_(t,e,s){const n="app_support_tickets_v1",o=Ro(n,[])||[],l={id:Date.now(),userId:t,subject:e,message:s,status:"open",createdAt:new Date().toISOString()};return o.unshift(l),zl(n,o),Js({type:"app:supportTicket",ticket:l}),l}function o_(t,e,s,n){const o="app_reviews_v1",l=Ro(o,{})||{},c=l[t]||[],d={id:Date.now(),userId:e,rating:s,comment:n,date:new Date().toISOString()};return l[t]=[d,...c],zl(o,l),Js({type:"app:review",store:t,review:d}),d}function a_(t){if(typeof window<"u"){const e=s=>t(s&&s.detail?s.detail:s);return window.addEventListener("app:newOrder",e),window.addEventListener("app:financialTx",e),window.addEventListener("app:storeStatusChanged",e),window.addEventListener("app:driverAssigned",e),window.addEventListener("app:search",e),window.addEventListener("app:supportTicket",e),window.addEventListener("app:review",e),()=>{window.removeEventListener("app:newOrder",e),window.removeEventListener("app:financialTx",e),window.removeEventListener("app:storeStatusChanged",e),window.removeEventListener("app:driverAssigned",e),window.removeEventListener("app:search",e),window.removeEventListener("app:supportTicket",e),window.removeEventListener("app:review",e)}}return()=>{}}const es={placeOrder:e_,addFinancialTx:Jv,getFinancialTxs:t_,setStoreOpen:s_,assignDriver:n_,recordSearch:i_,createSupportTicket:r_,addReview:o_,subscribe:a_,emit:Js};function l_(){const{user:t,updateUser:e}=pt(),[s,n]=C.useState(!1),[o,l]=C.useState(t?.photo||""),[c,d]=C.useState(t?.name||""),[h,f]=C.useState(t?.age||""),[p,g]=C.useState(t?.address||""),[y,b]=C.useState(t?.phone||""),[j,N]=C.useState(t?.gender||""),w=C.useRef(null);if(C.useEffect(()=>{if(t){const T=t&&t.profileComplete&&t.name&&t.phone&&t.age&&t.address&&t.gender&&t.photo;n(!T)}},[t]),C.useEffect(()=>{l(t?.photo||""),d(t?.name||""),f(t?.age||""),g(t?.address||""),b(t?.phone||""),N(t?.gender||"")},[t]),!s)return null;function S(T){T.preventDefault();const O={photo:o,name:c,age:h,address:p,phone:y,gender:j,profileComplete:!0};try{e(O)}catch(E){console.warn(E)}n(!1)}function _(T){const O=T.target.files&&T.target.files[0];if(!O)return;const E=new FileReader;E.onload=$=>l($.target.result),E.readAsDataURL(O)}return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:r.jsxs("form",{onSubmit:S,className:"bg-black/70 p-6 rounded-lg w-full max-w-md text-white",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"  "}),r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-slate-800 flex items-center justify-center",children:o?r.jsx("img",{src:o,alt:"avatar",className:"w-full h-full object-cover"}):r.jsx("div",{className:"text-3xl",children:""})}),r.jsx("button",{type:"button",onClick:()=>w.current&&w.current.click(),className:"absolute -bottom-1 -right-1 bg-indigo-600 text-white rounded-full p-1 shadow border border-white/20",children:""}),r.jsx("input",{ref:w,onChange:_,accept:"image/*",type:"file",className:"hidden"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{value:c,onChange:T=>d(T.target.value),className:"w-full mt-1 px-3 py-2 rounded bg-black/40"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:""}),r.jsx("input",{value:h,onChange:T=>f(T.target.value),className:"w-full mt-1 px-3 py-2 rounded bg-black/40"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{value:y,onChange:T=>b(T.target.value),className:"w-full mt-1 px-3 py-2 rounded bg-black/40"})]})]})]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{value:p,onChange:T=>g(T.target.value),className:"w-full mt-1 px-3 py-2 rounded bg-black/40"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"text-sm",children:""}),r.jsxs("select",{value:j,onChange:T=>N(T.target.value),className:"w-full mt-1 px-3 py-2 rounded bg-black/40",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"male",children:""}),r.jsx("option",{value:"female",children:""}),r.jsx("option",{value:"other",children:""})]})]}),r.jsx("div",{className:"mt-4 flex justify-end gap-2",children:r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:""})})]})})}const Zv=C.createContext();function c_({children:t}){const[e,s]=C.useState(null),[n,o]=C.useState(0),l=Pe(),[c,d]=C.useState(!0);function h({username:b,password:j}){const N=(b||"").toString().trim().toLowerCase(),w=Be.find(S=>{const _=(S.username||"").toString().trim().toLowerCase(),T=(S.email||"").toString().trim().toLowerCase();return(_===N||T===N)&&S.password===j});if(!w)return{ok:!1};try{w.lastLogin=Date.now(),Dn()}catch{}s(w);try{localStorage.setItem("auth_user",JSON.stringify(w))}catch{}return w.role==="admin"?l("/admin"):w.role==="customer"?l("/customer"):w.role==="store"?l("/store"):w.role==="driver"&&l("/driver"),{ok:!0}}function f(){s(null);try{localStorage.removeItem("auth_user")}catch{}l("/login")}function p(){o(0)}C.useEffect(()=>{const b=es.subscribe(j=>{j&&(j.type==="app:newOrder"||j.type==="app:driverAssigned"||j.type==="app:financialTx")&&o(N=>N+1)});return()=>b&&b()},[]);function g(b){if(!e)return null;const j=Be.findIndex(w=>w.id===e.id);if(j===-1){const w={...e,...b,profileComplete:!0};s(w);try{localStorage.setItem("auth_user",JSON.stringify(w))}catch{}return w}Be[j]={...Be[j],...b};try{Dn()}catch{}const N=Be[j];s(N);try{localStorage.setItem("auth_user",JSON.stringify(N))}catch{}return N}async function y(b,j){try{const N=j&&(j.sub||j.id||j.email)?String(j.sub||j.id||j.email):String(Date.now()),w=j&&(j.name||j.full_name||j.given_name)||"User "+N,S=j&&j.email||"",_={id:N,username:S||w,role:"customer",name:w,email:S,socialProvider:b};s(_);try{localStorage.setItem("auth_user",JSON.stringify(_))}catch{}return l("/customer"),_}catch(N){return console.warn("socialLogin failed",N),null}}return C.useEffect(()=>{let b=!0;try{const w=localStorage.getItem("auth_user");if(w){const S=JSON.parse(w);b&&s(S)}}catch{}const j=setTimeout(()=>{b&&d(!1)},60),N=es.subscribe(w=>{w&&(w.type==="app:newOrder"||w.type==="app:driverAssigned"||w.type==="app:financialTx")&&o(S=>S+1)});return()=>{b=!1,clearTimeout(j),N&&N()}},[]),c?r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/30",children:r.jsx("div",{className:"p-4 rounded bg-white/90",children:"Loading"})}):r.jsxs(Zv.Provider,{value:{user:e,login:h,logout:f,updateUser:g,socialLogin:y,unreadNotifications:n,markNotificationsRead:p,loading:c},children:[t,r.jsx(l_,{})]})}function pt(){return C.useContext(Zv)}const d_={en:{login:"Login",username:"Username or Email",password:"Password",logout:"Logout",dashboard:"Dashboard",users:"Users",orders:"Orders",products:"Products",reports:"Reports",settings:"Settings",search:"Search",profile:"Profile",notifications:"Notifications",totalOrders:"Total Orders",totalRevenue:"Total Revenue",activeUsers:"Active Users",activeStores:"Active Stores",recentTransactions:"Recent Transactions",addToCart:"Add to cart",cart:"Cart",createOrder:"Create Order",accept:"Accept",updateStatus:"Update Status",register:"Register",createAccount:"Create account"},ar:{login:" ",username:"   ",password:" ",logout:" ",dashboard:" ",users:"",orders:"",products:"",reports:"",settings:"",search:"",profile:"",notifications:"",totalOrders:" ",totalRevenue:" ",activeUsers:" ",activeStores:" ",recentTransactions:" ",addToCart:"  ",cart:"",createOrder:" ",accept:"",updateStatus:" ",register:" ",createAccount:" "}},eb=C.createContext();function u_({children:t}){const[e,s]=C.useState("en");C.useEffect(()=>{document.documentElement.lang=e,document.documentElement.dir=e==="ar"?"rtl":"ltr"},[e]);const n=o=>d_[e][o]||o;return r.jsx(eb.Provider,{value:{lang:e,setLang:s,t:n},children:t})}function cr(){return C.useContext(eb)}function h_(){const{login:t}=pt(),{lang:e,setLang:s,t:n}=cr(),o=Pe(),[l,c]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(""),[g,y]=C.useState(!1),[b,j]=C.useState(!1),[N,w]=C.useState(null);async function S(O){O.preventDefault(),p(""),y(!0);try{const E=await Promise.resolve(t({username:l,password:d}));y(!1),E&&!E.ok&&p("Invalid credentials")}catch{y(!1),p("Login error")}}function _(O){const z=window.screen.width/2-300,L=window.screen.height/2-700/2;let M="#";O==="Google"?M=`https://accounts.google.com/o/oauth2/v2/auth?client_id=&response_type=id_token&scope=openid%20email%20profile&redirect_uri=${location.origin}/oauth-callback.html&nonce=${Math.random().toString(36).slice(2)}`:O==="Facebook"&&(M=`https://www.facebook.com/v14.0/dialog/oauth?client_id=&response_type=token&scope=email,public_profile&redirect_uri=${location.origin}/oauth-callback.html`);const R=window.open(M,"oauth",`width=600,height=700,left=${z},top=${L}`);function Z(re){try{if(!re.data)return;const ee=re.data;if(ee.type==="oauth:result"){window.removeEventListener("message",Z);try{R.close()}catch{}const de=ee.payload||{};if(de.id_token){const he=de.id_token.split(".");if(he.length>=2){const V=he[1].replace(/-/g,"+").replace(/_/g,"/"),X=JSON.parse(decodeURIComponent(escape(window.atob(V))));socialLogin(O,X);return}}if(de.access_token){socialLogin(O,{id:de.access_token});return}}}catch(ee){console.warn(ee)}}window.addEventListener("message",Z)}const T=(O,E)=>`absolute left-3 transition-all duration-150 ${N===O||(E||"").length>0?"-top-3 text-xs bg-slate-900 px-1":"top-3 text-sm text-slate-300"}`;return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-slate-900 to-slate-800",style:{fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto'},children:[r.jsx("div",{className:"fixed top-4 right-4 z-50",children:r.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/5 backdrop-blur-sm border border-white/6 rounded-full px-2 py-1 text-sm",children:[r.jsx("button",{onClick:()=>s("ar"),className:`px-2 py-0.5 rounded-full ${e==="ar"?"bg-white/10 text-white":"text-slate-300"}`,children:"AR"}),r.jsx("button",{onClick:()=>s("en"),className:`px-2 py-0.5 rounded-full ${e==="en"?"bg-white/10 text-white":"text-slate-300"}`,children:"EN"})]})}),r.jsxs(Zt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.45},className:"w-full max-w-md p-8 rounded-2xl shadow-2xl backdrop-blur-md bg-white/5 border border-white/6",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-bl from-indigo-500 to-pink-500 flex items-center justify-center text-white text-xl font-bold",children:"L"}),r.jsx("h1",{className:"mt-4 text-3xl font-semibold text-white",children:n("login")||"Login"}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"Welcome back  sign in to continue"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>_("Google"),className:"w-full flex items-center justify-center gap-3 px-4 py-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/6 text-white",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 48 48",className:"inline-block",children:r.jsx("path",{fill:"#EA4335",d:"M24 24v8.5h11.9C33.9 36.9 29.4 39 24 39c-7.7 0-14-6.3-14-14s6.3-14 14-14c3.6 0 6.8 1.3 9.3 3.5l6.4-6.2C36.2 5.3 30.4 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21 21-9.4 21-21c0-1.4-.1-2.7-.4-4H24z"})}),r.jsx("span",{children:"Continue with Google"})]}),r.jsxs("button",{onClick:()=>_("Facebook"),className:"w-full flex items-center justify-center gap-3 px-4 py-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/6 text-white",children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"inline-block",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M22 12C22 6.48 17.52 2 12 2S2 6.48 2 12c0 5 3.66 9.13 8.44 9.88v-6.99H7.9v-2.89h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.25c-1.23 0-1.62.77-1.62 1.56v1.87h2.77l-.44 2.89h-2.33V22C18.34 21.13 22 17 22 12z",fill:"#1877F2"})}),r.jsx("span",{children:"Continue with Facebook"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 my-4",children:[r.jsx("div",{className:"h-px bg-white/10 flex-1"}),r.jsx("div",{className:"text-sm text-slate-300",children:"OR"}),r.jsx("div",{className:"h-px bg-white/10 flex-1"})]}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:T("username",l),children:n("username")||"Username or Email"}),r.jsx("input",{placeholder:" ",value:l,onChange:O=>c(O.target.value),onFocus:()=>w("username"),onBlur:()=>w(null),className:"w-full bg-transparent border border-white/8 rounded-md py-3 px-3 text-white focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:T("password",d),children:n("password")||"Password"}),r.jsx("input",{placeholder:" ",type:b?"text":"password",value:d,onChange:O=>h(O.target.value),onFocus:()=>w("password"),onBlur:()=>w(null),className:"w-full bg-transparent border border-white/8 rounded-md py-3 px-3 pr-10 text-white focus:outline-none focus:ring-1 focus:ring-indigo-500"}),r.jsx("button",{type:"button",onClick:()=>j(O=>!O),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-300",children:b?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("path",{d:"M3 3l18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M10.58 10.58a3 3 0 0 0 4.24 4.24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),f&&r.jsx("div",{className:"text-red-400 text-sm",children:f}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>o("/forgot-password"),className:"text-sm text-slate-300 hover:underline",children:"Forgot Password?"})}),r.jsx("div",{children:r.jsxs("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 text-white py-3 rounded-md",children:[g&&r.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),r.jsx("span",{children:g?"Signing in...":n("login")||"Sign in"})]})})]}),r.jsxs("div",{className:"mt-4 text-center text-sm text-slate-400",children:[r.jsx("span",{children:"Don't have an account? "}),r.jsx("button",{onClick:()=>o("/register"),className:"text-indigo-400 hover:underline",children:"Create one"})]})]})]})}function f_(t){return/\S+@\S+\.\S+/.test(t)}function m_(t){let e=0;if(!t)return{score:e,label:"",color:"bg-gray-400"};t.length>=8&&e++,/[A-Z]/.test(t)&&e++,/[0-9]/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++;const s=e<=1?"Weak":e===2?"Medium":"Strong",n=e<=1?"bg-red-500":e===2?"bg-yellow-400":"bg-green-400";return{score:e,label:s,color:n}}function p_(){const t=Pe(),[e,s]=C.useState(1),[n,o]=C.useState(""),[l,c]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(""),[g,y]=C.useState(""),[b,j]=C.useState("customer"),[N,w]=C.useState(!1),S=C.useMemo(()=>m_(l),[l]),_=C.useMemo(()=>f_(n),[n]),T=l&&l===d;function O(z){alert(`Social auth (${z}) is not connected in mock.`)}function E(){if(!_)return alert("Enter a valid email");if(l.length<6)return alert("Password too short");s(2)}function $(){if(!f)return alert("Enter name");if(!N)return alert("Please agree to Terms & Conditions");if(!T)return alert("Passwords do not match");try{const L={id:Be&&Be.length?Math.max(...Be.map(M=>M.id))+1:Date.now(),username:n,password:l,role:b||"customer",name:f,phone:g,email:n,status:"active"};Be.push(L);try{Dn()}catch{}alert("Registration successful  you can now sign in"),t("/login")}catch(z){console.error("Register error",z),alert("Registration failed")}}return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 bg-slate-900",children:r.jsxs(Zt.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35},className:"w-full max-w-4xl bg-gradient-to-br from-slate-900/80 to-slate-800/80 rounded-xl shadow-xl overflow-hidden flex",children:[r.jsx("div",{className:"hidden lg:block lg:w-1/2 bg-[url('/public/food-illustration.jpg')] bg-cover bg-center"}),r.jsx("div",{className:"w-full lg:w-1/2 p-8",children:r.jsxs(Zt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05},children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Create your account"}),r.jsx("p",{className:"text-slate-400 mb-6",children:"Two quick steps to get started  choose a role and finish your profile."}),r.jsxs("div",{className:"flex gap-3 mb-4",children:[r.jsxs("button",{onClick:()=>O("Google"),className:"flex-1 px-3 py-2 bg-white/5 text-white rounded flex items-center justify-center gap-2 hover:bg-white/10 transition",children:[r.jsx("img",{src:"/logo-google.png",alt:"Google",className:"w-5 h-5"})," Sign up with Google"]}),r.jsxs("button",{onClick:()=>O("Facebook"),className:"px-3 py-2 bg-blue-700 text-white rounded flex items-center gap-2 hover:brightness-95 transition",children:[r.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M22 12a10 10 0 10-11.5 9.88v-6.99H8.9v-2.9h1.6V9.3c0-1.6.94-2.5 2.38-2.5.69 0 1.42.12 1.42.12v1.56h-.8c-.79 0-1.03.49-1.03.99v1.18h1.76l-.28 2.9h-1.48v6.99A10 10 0 0022 12z"})}),"Facebook"]})]}),r.jsxs("div",{className:"flex items-center gap-3 my-4",children:[r.jsx("div",{className:"flex-1 h-px bg-slate-700"}),r.jsx("div",{className:"text-slate-400 text-sm",children:"or"}),r.jsx("div",{className:"flex-1 h-px bg-slate-700"})]}),r.jsxs(Zt.form,{onSubmit:z=>{z.preventDefault(),e===1?E():$()},className:"space-y-4",children:[e===1&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{value:n,onChange:z=>o(z.target.value),type:"email",className:"w-full px-4 py-3 bg-slate-900 text-white rounded",placeholder:"you@domain.com"}),r.jsx("div",{className:"absolute right-3 top-3",children:n?_?r.jsx("span",{className:"text-green-400",children:""}):r.jsx("span",{className:"text-red-400",children:""}):null})]}),r.jsx("label",{className:"block text-sm text-slate-300 mt-3 mb-2",children:"Password"}),r.jsx("input",{value:l,onChange:z=>c(z.target.value),type:"password",className:"w-full px-4 py-3 bg-slate-900 text-white rounded",placeholder:"Choose a strong password"}),r.jsx("div",{className:"mt-2 h-2 w-full bg-slate-700 rounded overflow-hidden",children:r.jsx("div",{className:`h-2 ${S.color} rounded`,style:{width:`${S.score/4*100}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[r.jsxs("div",{children:["Password strength: ",r.jsx("span",{className:"text-white",children:S.label||""})]}),r.jsx("div",{children:l.length>=8?r.jsx("span",{className:"text-green-400",children:"8+ chars"}):r.jsx("span",{className:"text-slate-500",children:"8+ chars"})})]}),r.jsx("label",{className:"block text-sm text-slate-300 mt-3 mb-2",children:"Confirm Password"}),r.jsx("input",{value:d,onChange:z=>h(z.target.value),type:"password",className:"w-full px-4 py-3 bg-slate-900 text-white rounded",placeholder:"Repeat your password"}),r.jsx("div",{className:"text-xs mt-1",children:d?T?r.jsx("span",{className:"text-green-400",children:"Passwords match"}):r.jsx("span",{className:"text-red-400",children:"Passwords do not match"}):null}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsx("button",{type:"button",onClick:()=>t("/login"),className:"text-sm text-slate-400 hover:underline",children:"Already have an account?"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 rounded text-white",children:"Next"})]})]}),e===2&&r.jsxs(Zt.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.25},children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Full name"}),r.jsx("input",{value:f,onChange:z=>p(z.target.value),className:"w-full px-4 py-3 bg-slate-900 text-white rounded",placeholder:"Your name"}),r.jsx("label",{className:"block text-sm text-slate-300 mt-3 mb-2",children:"Phone"}),r.jsx("input",{value:g,onChange:z=>y(z.target.value),className:"w-full px-4 py-3 bg-slate-900 text-white rounded",placeholder:"Optional phone number"}),r.jsx("label",{className:"block text-sm text-slate-300 mt-4 mb-2",children:"Choose role"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>j("customer"),className:`p-3 rounded border ${b==="customer"?"border-indigo-500 bg-indigo-600/10":"border-transparent bg-slate-900"} transition`,children:" Customer"}),r.jsx("button",{type:"button",onClick:()=>j("driver"),className:`p-3 rounded border ${b==="driver"?"border-indigo-500 bg-indigo-600/10":"border-transparent bg-slate-900"} transition`,children:" Driver"})]}),r.jsx("div",{className:"flex items-center gap-3 mt-4",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:N,onChange:z=>w(z.target.checked),className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm text-slate-300",children:["I agree to the ",r.jsx("button",{onClick:()=>alert("Show T&C (mock)"),className:"underline",children:"Terms & Conditions"})]})]})}),r.jsxs("div",{className:"flex justify-between items-center mt-6",children:[r.jsx("button",{type:"button",onClick:()=>s(1),className:"px-4 py-2 bg-slate-700 rounded text-white",children:"Back"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-500 rounded text-white",children:"Create account"})]})]})]})]})})]})})}function tt({children:t,sideItems:e}){const{logout:s,user:n,updateUser:o}=pt(),{t:l,lang:c,setLang:d}=cr(),[h,f]=C.useState(""),p=Pe(),[g,y]=C.useState(!1),[b,j]=C.useState(!1),[N,w]=C.useState({name:n?.name||"",email:n?.email||"",phone:n?.phone||""}),[S,_]=C.useState(()=>mt());function T(){h.trim()&&p(`/admin/search?q=${encodeURIComponent(h.trim())}`)}return r.jsxs("div",{className:"min-h-screen flex",children:[r.jsxs("aside",{className:"w-64 bg-black p-4",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"font-bold text-lg",children:n?.name||"User"}),r.jsx("div",{className:"text-sm text-slate-400",children:n?.role}),n?.role==="admin"&&r.jsx("button",{onClick:()=>p("/admin/all-users"),className:"mt-2 block px-2 py-1 bg-indigo-600 text-white rounded",children:"all users"})]}),r.jsx("nav",{className:"space-y-2 text-sm",children:e?.map(O=>O.action?r.jsx("button",{onClick:O.action,className:"block w-full text-left px-2 py-2 rounded hover:bg-black/80",children:O.label},O.label):r.jsx(oN,{to:O.to,className:({isActive:E})=>`block px-2 py-2 rounded hover:bg-black/80 ${E?"bg-black/70":""}`,children:O.label},O.label))})]}),r.jsxs("main",{className:"flex-1 p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:"/1__1_-removebg-preview.png",alt:"Dolphin Logo",className:"h-12 w-auto object-contain"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>y(!0),title:"Edit profile",className:"h-9 w-9 rounded-full bg-slate-700 flex items-center justify-center text-white font-bold",children:"E"}),r.jsxs("div",{className:"text-sm leading-tight",children:[r.jsx("div",{className:"text-xs text-slate-400",children:"Delivery to"}),r.jsxs("div",{className:"font-medium",children:["Home  23 Elm St ",r.jsx("span",{className:"text-xs",children:""})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("input",{value:h,onChange:O=>f(O.target.value),onKeyDown:O=>{O.key==="Enter"&&T()},placeholder:l("search"),className:"px-3 py-2 rounded bg-slate-700"}),r.jsx("button",{onClick:T,className:"px-3 py-2 bg-indigo-600 rounded text-white",children:"Search"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>p("/customer/coupons"),className:"px-3 py-2 bg-slate-700 rounded",children:""}),r.jsx("button",{onClick:()=>d(c==="ar"?"en":"ar"),className:"px-3 py-2 bg-slate-700 rounded",children:"Translate"}),r.jsx("button",{onClick:s,className:"px-3 py-2 bg-red-600 rounded",children:l("logout")})]})]}),r.jsx("div",{children:t})]}),r.jsx(g_,{showProfileForm:g,setShowProfileForm:y,profileDraft:N,setProfileDraft:w,updateUser:o,showAllUsers:b,setShowAllUsers:j,allUsersList:S,setAllUsersList:_})]})}function g_({showProfileForm:t,setShowProfileForm:e,profileDraft:s,setProfileDraft:n,updateUser:o,showAllUsers:l,setShowAllUsers:c,allUsersList:d,setAllUsersList:h}){return!t&&!l?null:r.jsxs("div",{children:[t&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-black/70 p-6 rounded w-11/12 max-w-md text-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Edit Profile"}),r.jsx("button",{onClick:()=>e(!1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{placeholder:"Name",value:s.name,onChange:f=>n({...s,name:f.target.value}),className:"w-full border rounded p-2"}),r.jsx("input",{placeholder:"Email",value:s.email,onChange:f=>n({...s,email:f.target.value}),className:"w-full border rounded p-2"}),r.jsx("input",{placeholder:"Phone",value:s.phone,onChange:f=>n({...s,phone:f.target.value}),className:"w-full border rounded p-2"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{o(s),e(!1)},className:"px-4 py-2 bg-green-600 text-white rounded",children:"Save"}),r.jsx("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"})]})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-black/70 p-6 rounded w-11/12 max-w-3xl max-h-[80vh] overflow-auto text-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"All Users"}),r.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsx("div",{className:"space-y-2",children:d.map(f=>r.jsx("div",{className:"flex justify-between items-center p-2 border-b",children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[f.name," ",r.jsxs("span",{className:"text-sm text-slate-500",children:["(@",f.username,")"]})]}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Status: ",f.status||"N/A","  Last login: ",f.lastLogin?new Date(f.lastLogin).toLocaleString():"Never"]})]})},f.id))})]})})]})}function x_(t){try{return new Date(t).toLocaleTimeString()}catch{return String(t)}}function y_(){const[t,e]=te.useState(!1),[s,n]=te.useState(()=>{try{return JSON.parse(localStorage.getItem("ADMIN_NOTIFS")||"[]")}catch{return[]}}),o=Pe();te.useEffect(()=>{const c=setInterval(()=>{const d=Date.now(),h={id:"o"+d,user:"customer"+(Math.floor(Math.random()*90)+10),total:(Math.random()*50+5).toFixed(2),ts:d};n(f=>{const p=[h,...f].slice(0,20);try{localStorage.setItem("ADMIN_NOTIFS",JSON.stringify(p))}catch{}return p})},1e4+Math.random()*8e3);return()=>clearInterval(c)},[]);function l(c){e(!1),o("/admin/orders")}return r.jsxs("div",{className:"relative inline-block text-left",children:[r.jsx("button",{onClick:()=>e(c=>!c),className:"p-2 rounded hover:bg-slate-700",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h11z"})})}),t&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-slate-800 rounded shadow-lg z-50 p-2",children:[r.jsx("h4",{className:"px-2 py-1 text-sm text-slate-300",children:"Live Orders"}),r.jsxs("div",{className:"max-h-56 overflow-auto",children:[s.slice(0,5).map(c=>r.jsxs("div",{className:"flex items-center justify-between px-2 py-2 border-t border-slate-700",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm",children:["Order ",r.jsx("strong",{children:c.id})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:[c.user,"  $",c.total,"  ",x_(c.ts)]})]}),r.jsx("div",{className:"flex flex-col gap-1",children:r.jsx("button",{onClick:()=>l(c.id),className:"px-2 py-1 bg-indigo-600 text-white text-xs rounded",children:"View"})})]},c.id)),s.length===0&&r.jsx("div",{className:"p-4 text-slate-400",children:"No live orders yet"})]}),r.jsx("div",{className:"border-t border-slate-700 mt-2 pt-2",children:r.jsx("button",{onClick:()=>{e(!1),o("/admin/offers")},className:"w-full text-sm px-2 py-2 bg-slate-700 rounded",children:" "})})]})]})}function v_(){return r.jsx("div",{className:"h-64 bg-slate-900 rounded flex items-center justify-center text-slate-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mb-2",children:"Map Placeholder"}),r.jsx("div",{className:"text-xs",children:"Leaflet map goes here (add API and tiles for production)"})]})})}const Ax=Array.from({length:6}).map((t,e)=>({id:1e3+e,name:`Driver ${e+1}`,status:["online","busy","offline"][e%3],task:e%2?`Order #${200+e}`:"Idle"}));function b_(){const[t,e]=te.useState(()=>{try{return JSON.parse(localStorage.getItem("DRIVERS"))||Ax}catch{return Ax}});te.useEffect(()=>{const o=setInterval(()=>{e(l=>l.map(c=>{if(Math.random()<.25){const d=c.status==="online"?"busy":c.status==="busy"||Math.random()<.5?"online":"offline";return{...c,status:d,task:d==="busy"?`Order #${Math.floor(Math.random()*400)+200}`:"Idle"}}return c}))},6e3);return()=>clearInterval(o)},[]),te.useEffect(()=>{try{localStorage.setItem("DRIVERS",JSON.stringify(t))}catch{}},[t]);function s(o){alert("Contacting "+o.name)}function n(o){confirm("Block "+o.name+"?")&&e(l=>l.map(c=>c.id===o.id?{...c,status:"offline",task:"Blocked"}:c))}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Live Tracking"}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Task"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:t.map(o=>r.jsxs("tr",{className:"border-t border-slate-700",children:[r.jsx("td",{className:"py-2",children:o.id}),r.jsx("td",{children:o.name}),r.jsx("td",{className:o.status==="online"?"text-green-400":o.status==="busy"?"text-yellow-400":"text-slate-400",children:o.status}),r.jsx("td",{children:o.task}),r.jsxs("td",{className:"space-x-2",children:[r.jsx("button",{onClick:()=>s(o),className:"px-2 py-1 bg-indigo-600 rounded text-xs",children:"Contact"}),r.jsx("button",{onClick:()=>n(o),className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Block"})]})]},o.id))})]}),r.jsx("div",{className:"mt-4",children:r.jsx(v_,{})})]})}function w_(){try{return JSON.parse(localStorage.getItem("PROMOS")||"[]")}catch{return[]}}function j_(){const[t,e]=te.useState(""),[s,n]=te.useState("percent"),[o,l]=te.useState(10),[c,d]=te.useState(""),[h,f]=te.useState(0),[p,g]=te.useState(()=>w_());function y(){if(!t)return alert("Enter code");const N=[{id:Date.now(),code:t,type:s,value:Number(o),exp:c||null,usage:Number(h)},...p];g(N);try{localStorage.setItem("PROMOS",JSON.stringify(N))}catch{}e("")}function b(j){if(!confirm("Remove promo?"))return;const N=p.filter(w=>w.id!==j);g(N);try{localStorage.setItem("PROMOS",JSON.stringify(N))}catch{}}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Promo Codes"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsx("input",{placeholder:"Code",value:t,onChange:j=>e(j.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsxs("select",{value:s,onChange:j=>n(j.target.value),className:"px-2 py-1 bg-slate-700 rounded",children:[r.jsx("option",{value:"percent",children:"Percentage"}),r.jsx("option",{value:"fixed",children:"Fixed"})]}),r.jsx("input",{type:"number",value:o,onChange:j=>l(j.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{type:"date",value:c,onChange:j=>d(j.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{type:"number",value:h,onChange:j=>f(j.target.value),className:"px-2 py-1 bg-slate-700 rounded col-span-2",placeholder:"Usage count"}),r.jsx("button",{onClick:y,className:"px-3 py-1 bg-indigo-600 rounded col-span-2",children:"Save Promo"})]}),r.jsx("div",{children:p.length===0?r.jsx("div",{className:"text-slate-400",children:"No promos"}):r.jsx("ul",{className:"space-y-2",children:p.map(j=>r.jsxs("li",{className:"flex items-center justify-between bg-slate-700 p-2 rounded",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[j.code," ",r.jsxs("span",{className:"text-xs text-slate-400",children:["(",j.type,")"]})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Value: ",j.value,"  Expires: ",j.exp||"","  Uses: ",j.usage]})]}),r.jsx("div",{className:"space-x-2",children:r.jsx("button",{onClick:()=>b(j.id),className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Delete"})})]},j.id))})})]})}function Io(t){return t+.5|0}const kn=(t,e,s)=>Math.max(Math.min(t,s),e);function ro(t){return kn(Io(t*2.55),0,255)}function Tn(t){return kn(Io(t*255),0,255)}function Gs(t){return kn(Io(t/2.55)/100,0,1)}function Rx(t){return kn(Io(t*100),0,100)}const as={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qu=[..."0123456789ABCDEF"],N_=t=>Qu[t&15],S_=t=>Qu[(t&240)>>4]+Qu[t&15],Ga=t=>(t&240)>>4===(t&15),k_=t=>Ga(t.r)&&Ga(t.g)&&Ga(t.b)&&Ga(t.a);function C_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&as[t[1]]*17,g:255&as[t[2]]*17,b:255&as[t[3]]*17,a:e===5?as[t[4]]*17:255}:(e===7||e===9)&&(s={r:as[t[1]]<<4|as[t[2]],g:as[t[3]]<<4|as[t[4]],b:as[t[5]]<<4|as[t[6]],a:e===9?as[t[7]]<<4|as[t[8]]:255})),s}const __=(t,e)=>t<255?e(t):"";function P_(t){var e=k_(t)?N_:S_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+__(t.a,e):void 0}const M_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tb(t,e,s){const n=e*Math.min(s,1-s),o=(l,c=(l+t/30)%12)=>s-n*Math.max(Math.min(c-3,9-c,1),-1);return[o(0),o(8),o(4)]}function T_(t,e,s){const n=(o,l=(o+t/60)%6)=>s-s*e*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function E_(t,e,s){const n=tb(t,1,.5);let o;for(e+s>1&&(o=1/(e+s),e*=o,s*=o),o=0;o<3;o++)n[o]*=1-e-s,n[o]+=e;return n}function O_(t,e,s,n,o){return t===o?(e-s)/n+(e<s?6:0):e===o?(s-t)/n+2:(t-e)/n+4}function Wh(t){const s=t.r/255,n=t.g/255,o=t.b/255,l=Math.max(s,n,o),c=Math.min(s,n,o),d=(l+c)/2;let h,f,p;return l!==c&&(p=l-c,f=d>.5?p/(2-l-c):p/(l+c),h=O_(s,n,o,p,l),h=h*60+.5),[h|0,f||0,d]}function Hh(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Tn)}function qh(t,e,s){return Hh(tb,t,e,s)}function D_(t,e,s){return Hh(E_,t,e,s)}function A_(t,e,s){return Hh(T_,t,e,s)}function sb(t){return(t%360+360)%360}function R_(t){const e=M_.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ro(+e[5]):Tn(+e[5]));const o=sb(+e[2]),l=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=D_(o,l,c):e[1]==="hsv"?n=A_(o,l,c):n=qh(o,l,c),{r:n[0],g:n[1],b:n[2],a:s}}function I_(t,e){var s=Wh(t);s[0]=sb(s[0]+e),s=qh(s),t.r=s[0],t.g=s[1],t.b=s[2]}function L_(t){if(!t)return;const e=Wh(t),s=e[0],n=Rx(e[1]),o=Rx(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${o}%, ${Gs(t.a)})`:`hsl(${s}, ${n}%, ${o}%)`}const Ix={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function F_(){const t={},e=Object.keys(Lx),s=Object.keys(Ix);let n,o,l,c,d;for(n=0;n<e.length;n++){for(c=d=e[n],o=0;o<s.length;o++)l=s[o],d=d.replace(l,Ix[l]);l=parseInt(Lx[c],16),t[d]=[l>>16&255,l>>8&255,l&255]}return t}let Qa;function V_(t){Qa||(Qa=F_(),Qa.transparent=[0,0,0,0]);const e=Qa[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const z_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function B_(t){const e=z_.exec(t);let s=255,n,o,l;if(e){if(e[7]!==n){const c=+e[7];s=e[8]?ro(c):kn(c*255,0,255)}return n=+e[1],o=+e[3],l=+e[5],n=255&(e[2]?ro(n):kn(n,0,255)),o=255&(e[4]?ro(o):kn(o,0,255)),l=255&(e[6]?ro(l):kn(l,0,255)),{r:n,g:o,b:l,a:s}}}function $_(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const eu=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function U_(t,e,s){const n=zi(Gs(t.r)),o=zi(Gs(t.g)),l=zi(Gs(t.b));return{r:Tn(eu(n+s*(zi(Gs(e.r))-n))),g:Tn(eu(o+s*(zi(Gs(e.g))-o))),b:Tn(eu(l+s*(zi(Gs(e.b))-l))),a:t.a+s*(e.a-t.a)}}function Xa(t,e,s){if(t){let n=Wh(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=qh(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function nb(t,e){return t&&Object.assign(e||{},t)}function Fx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Tn(t[3]))):(e=nb(t,{r:0,g:0,b:0,a:1}),e.a=Tn(e.a)),e}function W_(t){return t.charAt(0)==="r"?B_(t):R_(t)}class So{constructor(e){if(e instanceof So)return e;const s=typeof e;let n;s==="object"?n=Fx(e):s==="string"&&(n=C_(e)||V_(e)||W_(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=nb(this._rgb);return e&&(e.a=Gs(e.a)),e}set rgb(e){this._rgb=Fx(e)}rgbString(){return this._valid?$_(this._rgb):void 0}hexString(){return this._valid?P_(this._rgb):void 0}hslString(){return this._valid?L_(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,o=e.rgb;let l;const c=s===l?.5:s,d=2*c-1,h=n.a-o.a,f=((d*h===-1?d:(d+h)/(1+d*h))+1)/2;l=1-f,n.r=255&f*n.r+l*o.r+.5,n.g=255&f*n.g+l*o.g+.5,n.b=255&f*n.b+l*o.b+.5,n.a=c*n.a+(1-c)*o.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=U_(this._rgb,e._rgb,s)),this}clone(){return new So(this.rgb)}alpha(e){return this._rgb.a=Tn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Io(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xa(this._rgb,2,e),this}darken(e){return Xa(this._rgb,2,-e),this}saturate(e){return Xa(this._rgb,1,e),this}desaturate(e){return Xa(this._rgb,1,-e),this}rotate(e){return I_(this._rgb,e),this}}function Hs(){}const H_=(()=>{let t=0;return()=>t++})();function We(t){return t==null}function vt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Le(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function hs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Os(t,e){return hs(t)?t:e}function Ee(t,e){return typeof t>"u"?e:t}const q_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ye(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ze(t,e,s,n){let o,l,c;if(vt(t))for(l=t.length,o=0;o<l;o++)e.call(s,t[o],o);else if(Le(t))for(c=Object.keys(t),l=c.length,o=0;o<l;o++)e.call(s,t[c[o]],c[o])}function Sl(t,e){let s,n,o,l;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(o=t[s],l=e[s],o.datasetIndex!==l.datasetIndex||o.index!==l.index)return!1;return!0}function kl(t){if(vt(t))return t.map(kl);if(Le(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let o=0;for(;o<n;++o)e[s[o]]=kl(t[s[o]]);return e}return t}function ib(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Y_(t,e,s,n){if(!ib(t))return;const o=e[t],l=s[t];Le(o)&&Le(l)?ko(o,l,n):e[t]=kl(l)}function ko(t,e,s){const n=vt(e)?e:[e],o=n.length;if(!Le(t))return t;s=s||{};const l=s.merger||Y_;let c;for(let d=0;d<o;++d){if(c=n[d],!Le(c))continue;const h=Object.keys(c);for(let f=0,p=h.length;f<p;++f)l(h[f],t,c,s)}return t}function fo(t,e){return ko(t,e,{merger:K_})}function K_(t,e,s){if(!ib(t))return;const n=e[t],o=s[t];Le(n)&&Le(o)?fo(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=kl(o))}const Vx={"":t=>t,x:t=>t.x,y:t=>t.y};function G_(t){const e=t.split("."),s=[];let n="";for(const o of e)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function Q_(t){const e=G_(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Cl(t,e){return(Vx[e]||(Vx[e]=Q_(e)))(t)}function Yh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _l=t=>typeof t<"u",An=t=>typeof t=="function",zx=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function X_(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $e=Math.PI,St=2*$e,J_=St+$e,Pl=Number.POSITIVE_INFINITY,Z_=$e/180,Nt=$e/2,Xn=$e/4,Bx=$e*2/3,rb=Math.log10,tr=Math.sign;function mo(t,e,s){return Math.abs(t-e)<s}function $x(t){const e=Math.round(t);t=mo(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(rb(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function e4(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((o,l)=>o-l).pop(),e}function t4(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Co(t){return!t4(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function s4(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function n4(t,e,s){let n,o,l;for(n=0,o=t.length;n<o;n++)l=t[n][s],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function ri(t){return t*($e/180)}function i4(t){return t*(180/$e)}function Ux(t){if(!hs(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function ob(t,e){const s=e.x-t.x,n=e.y-t.y,o=Math.sqrt(s*s+n*n);let l=Math.atan2(n,s);return l<-.5*$e&&(l+=St),{angle:l,distance:o}}function Xu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r4(t,e){return(t-e+J_)%St-$e}function ks(t){return(t%St+St)%St}function Kh(t,e,s,n){const o=ks(t),l=ks(e),c=ks(s),d=ks(l-o),h=ks(c-o),f=ks(o-l),p=ks(o-c);return o===l||o===c||n&&l===c||d>h&&f<p}function Ot(t,e,s){return Math.max(e,Math.min(s,t))}function o4(t){return Ot(t,-32768,32767)}function Cn(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Gh(t,e,s){s=s||(c=>t[c]<e);let n=t.length-1,o=0,l;for(;n-o>1;)l=o+n>>1,s(l)?o=l:n=l;return{lo:o,hi:n}}const oi=(t,e,s,n)=>Gh(t,s,n?o=>{const l=t[o][e];return l<s||l===s&&t[o+1][e]===s}:o=>t[o][e]<s),a4=(t,e,s)=>Gh(t,s,n=>t[n][e]>=s);function l4(t,e,s){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>s;)o--;return n>0||o<t.length?t.slice(n,o):t}const ab=["push","pop","shift","splice","unshift"];function c4(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ab.forEach(s=>{const n="_onData"+Yh(s),o=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...l){const c=o.apply(this,l);return t._chartjs.listeners.forEach(d=>{typeof d[n]=="function"&&d[n](...l)}),c}})})}function Wx(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,o=n.indexOf(e);o!==-1&&n.splice(o,1),!(n.length>0)&&(ab.forEach(l=>{delete t[l]}),delete t._chartjs)}function d4(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const lb=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function cb(t,e){let s=[],n=!1;return function(...o){s=o,n||(n=!0,lb.call(window,()=>{n=!1,t.apply(e,s)}))}}function u4(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Qh=t=>t==="start"?"left":t==="end"?"right":"center",Mt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,h4=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function f4(t,e,s){const n=e.length;let o=0,l=n;if(t._sorted){const{iScale:c,vScale:d,_parsed:h}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=c.axis,{min:g,max:y,minDefined:b,maxDefined:j}=c.getUserBounds();if(b){if(o=Math.min(oi(h,p,g).lo,s?n:oi(e,p,c.getPixelForValue(g)).lo),f){const N=h.slice(0,o+1).reverse().findIndex(w=>!We(w[d.axis]));o-=Math.max(0,N)}o=Ot(o,0,n-1)}if(j){let N=Math.max(oi(h,c.axis,y,!0).hi+1,s?0:oi(e,p,c.getPixelForValue(y),!0).hi+1);if(f){const w=h.slice(N-1).findIndex(S=>!We(S[d.axis]));N+=Math.max(0,w)}l=Ot(N,o,n)-o}else l=n-o}return{start:o,count:l}}function m4(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=o,!0;const l=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,o),l}const Ja=t=>t===0||t===1,Hx=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*St/s)),qx=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*St/s)+1,po={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Nt)+1,easeOutSine:t=>Math.sin(t*Nt),easeInOutSine:t=>-.5*(Math.cos($e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ja(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ja(t)?t:Hx(t,.075,.3),easeOutElastic:t=>Ja(t)?t:qx(t,.075,.3),easeInOutElastic(t){return Ja(t)?t:t<.5?.5*Hx(t*2,.1125,.45):.5+.5*qx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-po.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?po.easeInBounce(t*2)*.5:po.easeOutBounce(t*2-1)*.5+.5};function Xh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Yx(t){return Xh(t)?t:new So(t)}function tu(t){return Xh(t)?t:new So(t).saturate(.5).darken(.1).hexString()}const p4=["x","y","borderWidth","radius","tension"],g4=["color","borderColor","backgroundColor"];function x4(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:g4},numbers:{type:"number",properties:p4}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function y4(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Kx=new Map;function v4(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Kx.get(s);return n||(n=new Intl.NumberFormat(t,e),Kx.set(s,n)),n}function db(t,e,s){return v4(e,s).format(t)}const b4={values(t){return vt(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let o,l=t;if(s.length>1){const f=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(f<1e-4||f>1e15)&&(o="scientific"),l=w4(t,s)}const c=rb(Math.abs(l)),d=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),h={notation:o,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(h,this.options.ticks.format),db(t,n,h)}};function w4(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var ub={formatters:b4};function j4(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ub.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ui=Object.create(null),Ju=Object.create(null);function go(t,e){if(!e)return t;const s=e.split(".");for(let n=0,o=s.length;n<o;++n){const l=s[n];t=t[l]||(t[l]=Object.create(null))}return t}function su(t,e,s){return typeof e=="string"?ko(go(t,e),s):ko(go(t,""),e)}class N4{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>tu(o.backgroundColor),this.hoverBorderColor=(n,o)=>tu(o.borderColor),this.hoverColor=(n,o)=>tu(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return su(this,e,s)}get(e){return go(this,e)}describe(e,s){return su(Ju,e,s)}override(e,s){return su(ui,e,s)}route(e,s,n,o){const l=go(this,e),c=go(this,n),d="_"+s;Object.defineProperties(l,{[d]:{value:l[s],writable:!0},[s]:{enumerable:!0,get(){const h=this[d],f=c[o];return Le(h)?Object.assign({},f,h):Ee(h,f)},set(h){this[d]=h}}})}apply(e){e.forEach(s=>s(this))}}var at=new N4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[x4,y4,j4]);function S4(t){return!t||We(t.size)||We(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Gx(t,e,s,n,o){let l=e[o];return l||(l=e[o]=t.measureText(o).width,s.push(o)),l>n&&(n=l),n}function Jn(t,e,s){const n=t.currentDevicePixelRatio,o=s!==0?Math.max(s/2,.5):0;return Math.round((e-o)*n)/n+o}function Qx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Zu(t,e,s,n){hb(t,e,s,n,null)}function hb(t,e,s,n,o){let l,c,d,h,f,p,g,y;const b=e.pointStyle,j=e.rotation,N=e.radius;let w=(j||0)*Z_;if(b&&typeof b=="object"&&(l=b.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(w),t.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),t.restore();return}if(!(isNaN(N)||N<=0)){switch(t.beginPath(),b){default:o?t.ellipse(s,n,o/2,N,0,0,St):t.arc(s,n,N,0,St),t.closePath();break;case"triangle":p=o?o/2:N,t.moveTo(s+Math.sin(w)*p,n-Math.cos(w)*N),w+=Bx,t.lineTo(s+Math.sin(w)*p,n-Math.cos(w)*N),w+=Bx,t.lineTo(s+Math.sin(w)*p,n-Math.cos(w)*N),t.closePath();break;case"rectRounded":f=N*.516,h=N-f,c=Math.cos(w+Xn)*h,g=Math.cos(w+Xn)*(o?o/2-f:h),d=Math.sin(w+Xn)*h,y=Math.sin(w+Xn)*(o?o/2-f:h),t.arc(s-g,n-d,f,w-$e,w-Nt),t.arc(s+y,n-c,f,w-Nt,w),t.arc(s+g,n+d,f,w,w+Nt),t.arc(s-y,n+c,f,w+Nt,w+$e),t.closePath();break;case"rect":if(!j){h=Math.SQRT1_2*N,p=o?o/2:h,t.rect(s-p,n-h,2*p,2*h);break}w+=Xn;case"rectRot":g=Math.cos(w)*(o?o/2:N),c=Math.cos(w)*N,d=Math.sin(w)*N,y=Math.sin(w)*(o?o/2:N),t.moveTo(s-g,n-d),t.lineTo(s+y,n-c),t.lineTo(s+g,n+d),t.lineTo(s-y,n+c),t.closePath();break;case"crossRot":w+=Xn;case"cross":g=Math.cos(w)*(o?o/2:N),c=Math.cos(w)*N,d=Math.sin(w)*N,y=Math.sin(w)*(o?o/2:N),t.moveTo(s-g,n-d),t.lineTo(s+g,n+d),t.moveTo(s+y,n-c),t.lineTo(s-y,n+c);break;case"star":g=Math.cos(w)*(o?o/2:N),c=Math.cos(w)*N,d=Math.sin(w)*N,y=Math.sin(w)*(o?o/2:N),t.moveTo(s-g,n-d),t.lineTo(s+g,n+d),t.moveTo(s+y,n-c),t.lineTo(s-y,n+c),w+=Xn,g=Math.cos(w)*(o?o/2:N),c=Math.cos(w)*N,d=Math.sin(w)*N,y=Math.sin(w)*(o?o/2:N),t.moveTo(s-g,n-d),t.lineTo(s+g,n+d),t.moveTo(s+y,n-c),t.lineTo(s-y,n+c);break;case"line":c=o?o/2:Math.cos(w)*N,d=Math.sin(w)*N,t.moveTo(s-c,n-d),t.lineTo(s+c,n+d);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(w)*(o?o/2:N),n+Math.sin(w)*N);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _o(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Jh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Zh(t){t.restore()}function k4(t,e,s,n,o){if(!e)return t.lineTo(s.x,s.y);if(o==="middle"){const l=(e.x+s.x)/2;t.lineTo(l,e.y),t.lineTo(l,s.y)}else o==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function C4(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function _4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),We(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function P4(t,e,s,n,o){if(o.strikethrough||o.underline){const l=t.measureText(n),c=e-l.actualBoundingBoxLeft,d=e+l.actualBoundingBoxRight,h=s-l.actualBoundingBoxAscent,f=s+l.actualBoundingBoxDescent,p=o.strikethrough?(h+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(c,p),t.lineTo(d,p),t.stroke()}}function M4(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Po(t,e,s,n,o,l={}){const c=vt(e)?e:[e],d=l.strokeWidth>0&&l.strokeColor!=="";let h,f;for(t.save(),t.font=o.string,_4(t,l),h=0;h<c.length;++h)f=c[h],l.backdrop&&M4(t,l.backdrop),d&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),We(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(f,s,n,l.maxWidth)),t.fillText(f,s,n,l.maxWidth),P4(t,s,n,f,l),n+=Number(o.lineHeight);t.restore()}function Ml(t,e){const{x:s,y:n,w:o,h:l,radius:c}=e;t.arc(s+c.topLeft,n+c.topLeft,c.topLeft,1.5*$e,$e,!0),t.lineTo(s,n+l-c.bottomLeft),t.arc(s+c.bottomLeft,n+l-c.bottomLeft,c.bottomLeft,$e,Nt,!0),t.lineTo(s+o-c.bottomRight,n+l),t.arc(s+o-c.bottomRight,n+l-c.bottomRight,c.bottomRight,Nt,0,!0),t.lineTo(s+o,n+c.topRight),t.arc(s+o-c.topRight,n+c.topRight,c.topRight,0,-Nt,!0),t.lineTo(s+c.topLeft,n)}const T4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,E4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function O4(t,e){const s=(""+t).match(T4);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const D4=t=>+t||0;function ef(t,e){const s={},n=Le(e),o=n?Object.keys(e):e,l=Le(t)?n?c=>Ee(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of o)s[c]=D4(l(c));return s}function fb(t){return ef(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gi(t){return ef(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fs(t){const e=fb(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||at.font;let s=Ee(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Ee(t.style,e.style);n&&!(""+n).match(E4)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:Ee(t.family,e.family),lineHeight:O4(Ee(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Ee(t.weight,e.weight),string:""};return o.string=S4(o),o}function Za(t,e,s,n){let o,l,c;for(o=0,l=t.length;o<l;++o)if(c=t[o],c!==void 0&&c!==void 0)return c}function A4(t,e,s){const{min:n,max:o}=t,l=q_(e,(o-n)/2),c=(d,h)=>s&&d===0?0:d+h;return{min:c(n,-Math.abs(l)),max:c(o,l)}}function fi(t,e){return Object.assign(Object.create(t),e)}function tf(t,e=[""],s,n,o=()=>t[0]){const l=s||t;typeof n>"u"&&(n=xb("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:n,_getTarget:o,override:d=>tf([d,...t],e,l,n)};return new Proxy(c,{deleteProperty(d,h){return delete d[h],delete d._keys,delete t[0][h],!0},get(d,h){return pb(d,h,()=>$4(h,e,t,d))},getOwnPropertyDescriptor(d,h){return Reflect.getOwnPropertyDescriptor(d._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,h){return Jx(d).includes(h)},ownKeys(d){return Jx(d)},set(d,h,f){const p=d._storage||(d._storage=o());return d[h]=p[h]=f,delete d._keys,!0}})}function sr(t,e,s,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:mb(t,n),setContext:l=>sr(t,l,s,n),override:l=>sr(t.override(l),e,s,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete t[c],!0},get(l,c,d){return pb(l,c,()=>I4(l,c,d))},getOwnPropertyDescriptor(l,c){return l._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(l,c,d){return t[c]=d,delete l[c],!0}})}function mb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:s,indexable:n,isScriptable:An(s)?s:()=>s,isIndexable:An(n)?n:()=>n}}const R4=(t,e)=>t?t+Yh(e):e,sf=(t,e)=>Le(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pb(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function I4(t,e,s){const{_proxy:n,_context:o,_subProxy:l,_descriptors:c}=t;let d=n[e];return An(d)&&c.isScriptable(e)&&(d=L4(e,d,t,s)),vt(d)&&d.length&&(d=F4(e,d,t,c.isIndexable)),sf(e,d)&&(d=sr(d,o,l&&l[e],c)),d}function L4(t,e,s,n){const{_proxy:o,_context:l,_subProxy:c,_stack:d}=s;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let h=e(l,c||n);return d.delete(t),sf(t,h)&&(h=nf(o._scopes,o,t,h)),h}function F4(t,e,s,n){const{_proxy:o,_context:l,_subProxy:c,_descriptors:d}=s;if(typeof l.index<"u"&&n(t))return e[l.index%e.length];if(Le(e[0])){const h=e,f=o._scopes.filter(p=>p!==h);e=[];for(const p of h){const g=nf(f,o,t,p);e.push(sr(g,l,c&&c[t],d))}}return e}function gb(t,e,s){return An(t)?t(e,s):t}const V4=(t,e)=>t===!0?e:typeof t=="string"?Cl(e,t):void 0;function z4(t,e,s,n,o){for(const l of e){const c=V4(s,l);if(c){t.add(c);const d=gb(c._fallback,s,o);if(typeof d<"u"&&d!==s&&d!==n)return d}else if(c===!1&&typeof n<"u"&&s!==n)return null}return!1}function nf(t,e,s,n){const o=e._rootScopes,l=gb(e._fallback,s,n),c=[...t,...o],d=new Set;d.add(n);let h=Xx(d,c,s,l||s,n);return h===null||typeof l<"u"&&l!==s&&(h=Xx(d,c,l,h,n),h===null)?!1:tf(Array.from(d),[""],o,l,()=>B4(e,s,n))}function Xx(t,e,s,n,o){for(;s;)s=z4(t,e,s,n,o);return s}function B4(t,e,s){const n=t._getTarget();e in n||(n[e]={});const o=n[e];return vt(o)&&Le(s)?s:o||{}}function $4(t,e,s,n){let o;for(const l of e)if(o=xb(R4(l,t),s),typeof o<"u")return sf(t,o)?nf(s,n,t,o):o}function xb(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Jx(t){let e=t._keys;return e||(e=t._keys=U4(t._scopes)),e}function U4(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(o=>!o.startsWith("_")))e.add(n);return Array.from(e)}const W4=Number.EPSILON||1e-14,nr=(t,e)=>e<t.length&&!t[e].skip&&t[e],yb=t=>t==="x"?"y":"x";function H4(t,e,s,n){const o=t.skip?e:t,l=e,c=s.skip?e:s,d=Xu(l,o),h=Xu(c,l);let f=d/(d+h),p=h/(d+h);f=isNaN(f)?0:f,p=isNaN(p)?0:p;const g=n*f,y=n*p;return{previous:{x:l.x-g*(c.x-o.x),y:l.y-g*(c.y-o.y)},next:{x:l.x+y*(c.x-o.x),y:l.y+y*(c.y-o.y)}}}function q4(t,e,s){const n=t.length;let o,l,c,d,h,f=nr(t,0);for(let p=0;p<n-1;++p)if(h=f,f=nr(t,p+1),!(!h||!f)){if(mo(e[p],0,W4)){s[p]=s[p+1]=0;continue}o=s[p]/e[p],l=s[p+1]/e[p],d=Math.pow(o,2)+Math.pow(l,2),!(d<=9)&&(c=3/Math.sqrt(d),s[p]=o*c*e[p],s[p+1]=l*c*e[p])}}function Y4(t,e,s="x"){const n=yb(s),o=t.length;let l,c,d,h=nr(t,0);for(let f=0;f<o;++f){if(c=d,d=h,h=nr(t,f+1),!d)continue;const p=d[s],g=d[n];c&&(l=(p-c[s])/3,d[`cp1${s}`]=p-l,d[`cp1${n}`]=g-l*e[f]),h&&(l=(h[s]-p)/3,d[`cp2${s}`]=p+l,d[`cp2${n}`]=g+l*e[f])}}function K4(t,e="x"){const s=yb(e),n=t.length,o=Array(n).fill(0),l=Array(n);let c,d,h,f=nr(t,0);for(c=0;c<n;++c)if(d=h,h=f,f=nr(t,c+1),!!h){if(f){const p=f[e]-h[e];o[c]=p!==0?(f[s]-h[s])/p:0}l[c]=d?f?tr(o[c-1])!==tr(o[c])?0:(o[c-1]+o[c])/2:o[c-1]:o[c]}q4(t,o,l),Y4(t,l,e)}function el(t,e,s){return Math.max(Math.min(t,s),e)}function G4(t,e){let s,n,o,l,c,d=_o(t[0],e);for(s=0,n=t.length;s<n;++s)c=l,l=d,d=s<n-1&&_o(t[s+1],e),l&&(o=t[s],c&&(o.cp1x=el(o.cp1x,e.left,e.right),o.cp1y=el(o.cp1y,e.top,e.bottom)),d&&(o.cp2x=el(o.cp2x,e.left,e.right),o.cp2y=el(o.cp2y,e.top,e.bottom)))}function Q4(t,e,s,n,o){let l,c,d,h;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")K4(t,o);else{let f=n?t[t.length-1]:t[0];for(l=0,c=t.length;l<c;++l)d=t[l],h=H4(f,d,t[Math.min(l+1,c-(n?0:1))%c],e.tension),d.cp1x=h.previous.x,d.cp1y=h.previous.y,d.cp2x=h.next.x,d.cp2y=h.next.y,f=d}e.capBezierPoints&&G4(t,s)}function rf(){return typeof window<"u"&&typeof document<"u"}function of(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Tl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Bl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function X4(t,e){return Bl(t).getPropertyValue(e)}const J4=["top","right","bottom","left"];function di(t,e,s){const n={};s=s?"-"+s:"";for(let o=0;o<4;o++){const l=J4[o];n[l]=parseFloat(t[e+"-"+l+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Z4=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function e3(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:o,offsetY:l}=n;let c=!1,d,h;if(Z4(o,l,t.target))d=o,h=l;else{const f=e.getBoundingClientRect();d=n.clientX-f.left,h=n.clientY-f.top,c=!0}return{x:d,y:h,box:c}}function ti(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,o=Bl(s),l=o.boxSizing==="border-box",c=di(o,"padding"),d=di(o,"border","width"),{x:h,y:f,box:p}=e3(t,s),g=c.left+(p&&d.left),y=c.top+(p&&d.top);let{width:b,height:j}=e;return l&&(b-=c.width+d.width,j-=c.height+d.height),{x:Math.round((h-g)/b*s.width/n),y:Math.round((f-y)/j*s.height/n)}}function t3(t,e,s){let n,o;if(e===void 0||s===void 0){const l=t&&of(t);if(!l)e=t.clientWidth,s=t.clientHeight;else{const c=l.getBoundingClientRect(),d=Bl(l),h=di(d,"border","width"),f=di(d,"padding");e=c.width-f.width-h.width,s=c.height-f.height-h.height,n=Tl(d.maxWidth,l,"clientWidth"),o=Tl(d.maxHeight,l,"clientHeight")}}return{width:e,height:s,maxWidth:n||Pl,maxHeight:o||Pl}}const _n=t=>Math.round(t*10)/10;function s3(t,e,s,n){const o=Bl(t),l=di(o,"margin"),c=Tl(o.maxWidth,t,"clientWidth")||Pl,d=Tl(o.maxHeight,t,"clientHeight")||Pl,h=t3(t,e,s);let{width:f,height:p}=h;if(o.boxSizing==="content-box"){const y=di(o,"border","width"),b=di(o,"padding");f-=b.width+y.width,p-=b.height+y.height}return f=Math.max(0,f-l.width),p=Math.max(0,n?f/n:p-l.height),f=_n(Math.min(f,c,h.maxWidth)),p=_n(Math.min(p,d,h.maxHeight)),f&&!p&&(p=_n(f/2)),(e!==void 0||s!==void 0)&&n&&h.height&&p>h.height&&(p=h.height,f=_n(Math.floor(p*n))),{width:f,height:p}}function Zx(t,e,s){const n=e||1,o=_n(t.height*n),l=_n(t.width*n);t.height=_n(t.height),t.width=_n(t.width);const c=t.canvas;return c.style&&(s||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==o||c.width!==l?(t.currentDevicePixelRatio=n,c.height=o,c.width=l,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const n3=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};rf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function e0(t,e){const s=X4(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function si(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function i3(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function r3(t,e,s,n){const o={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},c=si(t,o,s),d=si(o,l,s),h=si(l,e,s),f=si(c,d,s),p=si(d,h,s);return si(f,p,s)}const o3=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},a3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qi(t,e,s){return t?o3(e,s):a3()}function vb(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function bb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wb(t){return t==="angle"?{between:Kh,compare:r4,normalize:ks}:{between:Cn,compare:(e,s)=>e-s,normalize:e=>e}}function t0({start:t,end:e,count:s,loop:n,style:o}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:o}}function l3(t,e,s){const{property:n,start:o,end:l}=s,{between:c,normalize:d}=wb(n),h=e.length;let{start:f,end:p,loop:g}=t,y,b;if(g){for(f+=h,p+=h,y=0,b=h;y<b&&c(d(e[f%h][n]),o,l);++y)f--,p--;f%=h,p%=h}return p<f&&(p+=h),{start:f,end:p,loop:g,style:t.style}}function c3(t,e,s){if(!s)return[t];const{property:n,start:o,end:l}=s,c=e.length,{compare:d,between:h,normalize:f}=wb(n),{start:p,end:g,loop:y,style:b}=l3(t,e,s),j=[];let N=!1,w=null,S,_,T;const O=()=>h(o,T,S)&&d(o,T)!==0,E=()=>d(l,S)===0||h(l,T,S),$=()=>N||O(),z=()=>!N||E();for(let L=p,M=p;L<=g;++L)_=e[L%c],!_.skip&&(S=f(_[n]),S!==T&&(N=h(S,o,l),w===null&&$()&&(w=d(S,o)===0?L:M),w!==null&&z()&&(j.push(t0({start:w,end:L,loop:y,count:c,style:b})),w=null),M=L,T=S));return w!==null&&j.push(t0({start:w,end:g,loop:y,count:c,style:b})),j}function d3(t,e){const s=[],n=t.segments;for(let o=0;o<n.length;o++){const l=c3(n[o],t.points,e);l.length&&s.push(...l)}return s}function u3(t,e,s,n){let o=0,l=e-1;if(s&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,s&&(l+=o);l>o&&t[l%e].skip;)l--;return l%=e,{start:o,end:l}}function h3(t,e,s,n){const o=t.length,l=[];let c=e,d=t[e],h;for(h=e+1;h<=s;++h){const f=t[h%o];f.skip||f.stop?d.skip||(n=!1,l.push({start:e%o,end:(h-1)%o,loop:n}),e=c=f.stop?h:null):(c=h,d.skip&&(e=h)),d=f}return c!==null&&l.push({start:e%o,end:c%o,loop:n}),l}function f3(t,e){const s=t.points,n=t.options.spanGaps,o=s.length;if(!o)return[];const l=!!t._loop,{start:c,end:d}=u3(s,o,l,n);if(n===!0)return s0(t,[{start:c,end:d,loop:l}],s,e);const h=d<c?d+o:d,f=!!t._fullLoop&&c===0&&d===o-1;return s0(t,h3(s,c,h,f),s,e)}function s0(t,e,s,n){return!n||!n.setContext||!s?e:m3(t,e,s,n)}function m3(t,e,s,n){const o=t._chart.getContext(),l=n0(t.options),{_datasetIndex:c,options:{spanGaps:d}}=t,h=s.length,f=[];let p=l,g=e[0].start,y=g;function b(j,N,w,S){const _=d?-1:1;if(j!==N){for(j+=h;s[j%h].skip;)j-=_;for(;s[N%h].skip;)N+=_;j%h!==N%h&&(f.push({start:j%h,end:N%h,loop:w,style:S}),p=S,g=N%h)}}for(const j of e){g=d?g:j.start;let N=s[g%h],w;for(y=g+1;y<=j.end;y++){const S=s[y%h];w=n0(n.setContext(fi(o,{type:"segment",p0:N,p1:S,p0DataIndex:(y-1)%h,p1DataIndex:y%h,datasetIndex:c}))),p3(w,p)&&b(g,y-1,j.loop,p),N=S,p=w}g<y-1&&b(g,y-1,j.loop,p)}return f}function n0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function p3(t,e){if(!e)return!1;const s=[],n=function(o,l){return Xh(l)?(s.includes(l)||s.push(l),s.indexOf(l)):l};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function tl(t,e,s){return t.options.clip?t[s]:e[s]}function g3(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:tl(s,e,"left"),right:tl(s,e,"right"),top:tl(n,e,"top"),bottom:tl(n,e,"bottom")}:e}function x3(t,e){const s=e._clip;if(s.disabled)return!1;const n=g3(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}class y3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,o){const l=s.listeners[o],c=s.duration;l.forEach(d=>d({chart:e,initial:s.initial,numSteps:c,currentStep:Math.min(n-s.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=lb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;const l=n.items;let c=l.length-1,d=!1,h;for(;c>=0;--c)h=l[c],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(e),d=!0):(l[c]=l[l.length-1],l.pop());d&&(o.draw(),this._notify(o,n,e,"progress")),l.length||(n.running=!1,this._notify(o,n,e,"complete"),n.initial=!1),s+=l.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qs=new y3;const i0="transparent",v3={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Yx(t||i0),o=n.valid&&Yx(e||i0);return o&&o.valid?o.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class b3{constructor(e,s,n,o){const l=s[n];o=Za([e.to,o,l,e.from]);const c=Za([e.from,l,o]);this._active=!0,this._fn=e.fn||v3[e.type||typeof c],this._easing=po[e.easing]||po.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=c,this._to=o,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const o=this._target[this._prop],l=n-this._start,c=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Za([e.to,s,o,e.from]),this._from=Za([e.from,o,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,o=this._prop,l=this._from,c=this._loop,d=this._to;let h;if(this._active=l!==d&&(c||s<n),!this._active){this._target[o]=d,this._notify(!0);return}if(s<0){this._target[o]=l;return}h=s/n%2,h=c&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[o]=this._fn(l,d,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][s]()}}class jb{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Le(e))return;const s=Object.keys(at.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const l=e[o];if(!Le(l))return;const c={};for(const d of s)c[d]=l[d];(vt(l.properties)&&l.properties||[o]).forEach(d=>{(d===o||!n.has(d))&&n.set(d,c)})})}_animateOptions(e,s){const n=s.options,o=j3(e,n);if(!o)return[];const l=this._createAnimations(o,n);return n.$shared&&w3(e.options.$animations,n).then(()=>{e.options=n},()=>{}),l}_createAnimations(e,s){const n=this._properties,o=[],l=e.$animations||(e.$animations={}),c=Object.keys(s),d=Date.now();let h;for(h=c.length-1;h>=0;--h){const f=c[h];if(f.charAt(0)==="$")continue;if(f==="options"){o.push(...this._animateOptions(e,s));continue}const p=s[f];let g=l[f];const y=n.get(f);if(g)if(y&&g.active()){g.update(y,p,d);continue}else g.cancel();if(!y||!y.duration){e[f]=p;continue}l[f]=g=new b3(y,e,f,p),o.push(g)}return o}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return qs.add(this._chart,n),!0}}function w3(t,e){const s=[],n=Object.keys(e);for(let o=0;o<n.length;o++){const l=t[n[o]];l&&l.active()&&s.push(l.wait())}return Promise.all(s)}function j3(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function r0(t,e){const s=t&&t.options||{},n=s.reverse,o=s.min===void 0?e:0,l=s.max===void 0?e:0;return{start:n?l:o,end:n?o:l}}function N3(t,e,s){if(s===!1)return!1;const n=r0(t,s),o=r0(e,s);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function S3(t){let e,s,n,o;return Le(t)?(e=t.top,s=t.right,n=t.bottom,o=t.left):e=s=n=o=t,{top:e,right:s,bottom:n,left:o,disabled:t===!1}}function Nb(t,e){const s=[],n=t._getSortedDatasetMetas(e);let o,l;for(o=0,l=n.length;o<l;++o)s.push(n[o].index);return s}function o0(t,e,s,n={}){const o=t.keys,l=n.mode==="single";let c,d,h,f;if(e===null)return;let p=!1;for(c=0,d=o.length;c<d;++c){if(h=+o[c],h===s){if(p=!0,n.all)continue;break}f=t.values[h],hs(f)&&(l||e===0||tr(e)===tr(f))&&(e+=f)}return!p&&!n.all?0:e}function k3(t,e){const{iScale:s,vScale:n}=e,o=s.axis==="x"?"x":"y",l=n.axis==="x"?"x":"y",c=Object.keys(t),d=new Array(c.length);let h,f,p;for(h=0,f=c.length;h<f;++h)p=c[h],d[h]={[o]:p,[l]:t[p]};return d}function nu(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function C3(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function _3(t){const{min:e,max:s,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?s:Number.POSITIVE_INFINITY}}function P3(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function a0(t,e,s,n){for(const o of e.getMatchingVisibleMetas(n).reverse()){const l=t[o.index];if(s&&l>0||!s&&l<0)return o.index}return null}function l0(t,e){const{chart:s,_cachedMeta:n}=t,o=s._stacks||(s._stacks={}),{iScale:l,vScale:c,index:d}=n,h=l.axis,f=c.axis,p=C3(l,c,n),g=e.length;let y;for(let b=0;b<g;++b){const j=e[b],{[h]:N,[f]:w}=j,S=j._stacks||(j._stacks={});y=S[f]=P3(o,p,N),y[d]=w,y._top=a0(y,c,!0,n.type),y._bottom=a0(y,c,!1,n.type);const _=y._visualValues||(y._visualValues={});_[d]=w}}function iu(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function M3(t,e){return fi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function T3(t,e,s){return fi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Jr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const o of e){const l=o._stacks;if(!l||l[n]===void 0||l[n][s]===void 0)return;delete l[n][s],l[n]._visualValues!==void 0&&l[n]._visualValues[s]!==void 0&&delete l[n]._visualValues[s]}}}const ru=t=>t==="reset"||t==="none",c0=(t,e)=>e?t:Object.assign({},t),E3=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Nb(s,!0),values:null};class Sb{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),o=(g,y,b,j)=>g==="x"?y:g==="r"?j:b,l=s.xAxisID=Ee(n.xAxisID,iu(e,"x")),c=s.yAxisID=Ee(n.yAxisID,iu(e,"y")),d=s.rAxisID=Ee(n.rAxisID,iu(e,"r")),h=s.indexAxis,f=s.iAxisID=o(h,l,c,d),p=s.vAxisID=o(h,c,l,d);s.xScale=this.getScaleForId(l),s.yScale=this.getScaleForId(c),s.rScale=this.getScaleForId(d),s.iScale=this.getScaleForId(f),s.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Wx(this._data,this),e._stacked&&Jr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(Le(s)){const o=this._cachedMeta;this._data=k3(s,o)}else if(n!==s){if(n){Wx(n,this);const o=this._cachedMeta;Jr(o),o._parsed=[]}s&&Object.isExtensible(s)&&c4(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const l=s._stacked;s._stacked=nu(s.vScale,s),s.stack!==n.stack&&(o=!0,Jr(s),s.stack=n.stack),this._resyncElements(e),(o||l!==s._stacked)&&(l0(this,s._parsed),s._stacked=nu(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:o}=this,{iScale:l,_stacked:c}=n,d=l.axis;let h=e===0&&s===o.length?!0:n._sorted,f=e>0&&n._parsed[e-1],p,g,y;if(this._parsing===!1)n._parsed=o,n._sorted=!0,y=o;else{vt(o[e])?y=this.parseArrayData(n,o,e,s):Le(o[e])?y=this.parseObjectData(n,o,e,s):y=this.parsePrimitiveData(n,o,e,s);const b=()=>g[d]===null||f&&g[d]<f[d];for(p=0;p<s;++p)n._parsed[p+e]=g=y[p],h&&(b()&&(h=!1),f=g);n._sorted=h}c&&l0(this,y)}parsePrimitiveData(e,s,n,o){const{iScale:l,vScale:c}=e,d=l.axis,h=c.axis,f=l.getLabels(),p=l===c,g=new Array(o);let y,b,j;for(y=0,b=o;y<b;++y)j=y+n,g[y]={[d]:p||l.parse(f[j],j),[h]:c.parse(s[j],j)};return g}parseArrayData(e,s,n,o){const{xScale:l,yScale:c}=e,d=new Array(o);let h,f,p,g;for(h=0,f=o;h<f;++h)p=h+n,g=s[p],d[h]={x:l.parse(g[0],p),y:c.parse(g[1],p)};return d}parseObjectData(e,s,n,o){const{xScale:l,yScale:c}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,f=new Array(o);let p,g,y,b;for(p=0,g=o;p<g;++p)y=p+n,b=s[y],f[p]={x:l.parse(Cl(b,d),y),y:c.parse(Cl(b,h),y)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const o=this.chart,l=this._cachedMeta,c=s[e.axis],d={keys:Nb(o,!0),values:s._stacks[e.axis]._visualValues};return o0(d,c,l.index,{mode:n})}updateRangeFromParsed(e,s,n,o){const l=n[s.axis];let c=l===null?NaN:l;const d=o&&n._stacks[s.axis];o&&d&&(o.values=d,c=o0(o,l,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,s){const n=this._cachedMeta,o=n._parsed,l=n._sorted&&e===n.iScale,c=o.length,d=this._getOtherScale(e),h=E3(s,n,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:g}=_3(d);let y,b;function j(){b=o[y];const N=b[d.axis];return!hs(b[e.axis])||p>N||g<N}for(y=0;y<c&&!(!j()&&(this.updateRangeFromParsed(f,e,b,h),l));++y);if(l){for(y=c-1;y>=0;--y)if(!j()){this.updateRangeFromParsed(f,e,b,h);break}}return f}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let o,l,c;for(o=0,l=s.length;o<l;++o)c=s[o][e.axis],hs(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,o=s.vScale,l=this.getParsed(e);return{label:n?""+n.getLabelForValue(l[n.axis]):"",value:o?""+o.getLabelForValue(l[o.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=S3(Ee(this.options.clip,N3(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,o=n.data||[],l=s.chartArea,c=[],d=this._drawStart||0,h=this._drawCount||o.length-d,f=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(e,l,d,h),p=d;p<d+h;++p){const g=o[p];g.hidden||(g.active&&f?c.push(g):g.draw(e,l))}for(p=0;p<c.length;++p)c[p].draw(e,l)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const o=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];l=c.$context||(c.$context=T3(this.getContext(),e,c)),l.parsed=this.getParsed(e),l.raw=o.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=M3(this.chart.getContext(),this.index)),l.dataset=o,l.index=l.datasetIndex=this.index;return l.active=!!s,l.mode=n,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const o=s==="active",l=this._cachedDataOpts,c=e+"-"+s,d=l[c],h=this.enableOptionSharing&&_l(n);if(d)return c0(d,h);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,e),g=o?[`${e}Hover`,"hover",e,""]:[e,""],y=f.getOptionScopes(this.getDataset(),p),b=Object.keys(at.elements[e]),j=()=>this.getContext(n,o,s),N=f.resolveNamedOptions(y,b,j,g);return N.$shared&&(N.$shared=h,l[c]=Object.freeze(c0(N,h))),N}_resolveAnimations(e,s,n){const o=this.chart,l=this._cachedDataOpts,c=`animation-${s}`,d=l[c];if(d)return d;let h;if(o.options.animation!==!1){const p=this.chart.config,g=p.datasetAnimationScopeKeys(this._type,s),y=p.getOptionScopes(this.getDataset(),g);h=p.createResolver(y,this.getContext(e,n,s))}const f=new jb(o,h&&h.animations);return h&&h._cacheable&&(l[c]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ru(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),o=this._sharedOptions,l=this.getSharedOptions(n),c=this.includeOptions(s,l)||l!==o;return this.updateSharedOptions(l,s,n),{sharedOptions:l,includeOptions:c}}updateElement(e,s,n,o){ru(o)?Object.assign(e,n):this._resolveAnimations(s,o).update(e,n)}updateSharedOptions(e,s,n){e&&!ru(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,o){e.active=o;const l=this.getStyle(s,o);this._resolveAnimations(s,n,o).update(e,{options:!o&&this.getSharedOptions(l)||l})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[d,h,f]of this._syncList)this[d](h,f);this._syncList=[];const o=n.length,l=s.length,c=Math.min(l,o);c&&this.parse(0,c),l>o?this._insertElements(o,l-o,e):l<o&&this._removeElements(l,o-l)}_insertElements(e,s,n=!0){const o=this._cachedMeta,l=o.data,c=e+s;let d;const h=f=>{for(f.length+=s,d=f.length-1;d>=c;d--)f[d]=f[d-s]};for(h(l),d=e;d<c;++d)l[d]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(e,s),n&&this.updateElements(l,e,s,"reset")}updateElements(e,s,n,o){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(e,s);n._stacked&&Jr(n,o)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,o]=e;this[s](n,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class O3 extends Sb{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:o=[],_dataset:l}=s,c=this.chart._animationsDisabled;let{start:d,count:h}=f4(s,o,c);this._drawStart=d,this._drawCount=h,m4(s)&&(d=0,h=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!l._decimated,n.points=o;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:f},e),this.updateElements(o,d,h,e)}updateElements(e,s,n,o){const l=o==="reset",{iScale:c,vScale:d,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(s,o),y=c.axis,b=d.axis,{spanGaps:j,segment:N}=this.options,w=Co(j)?j:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||l||o==="none",_=s+n,T=e.length;let O=s>0&&this.getParsed(s-1);for(let E=0;E<T;++E){const $=e[E],z=S?$:{};if(E<s||E>=_){z.skip=!0;continue}const L=this.getParsed(E),M=We(L[b]),R=z[y]=c.getPixelForValue(L[y],E),Z=z[b]=l||M?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,L,h):L[b],E);z.skip=isNaN(R)||isNaN(Z)||M,z.stop=E>0&&Math.abs(L[y]-O[y])>w,N&&(z.parsed=L,z.raw=f.data[E]),g&&(z.options=p||this.resolveDataElementOptions(E,$.active?"active":o)),S||this.updateElement($,E,z,o),O=L}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const l=o[0].size(this.resolveDataElementOptions(0)),c=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,l,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Zn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class af{static override(e){Object.assign(af.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Zn()}parse(){return Zn()}format(){return Zn()}add(){return Zn()}diff(){return Zn()}startOf(){return Zn()}endOf(){return Zn()}}var D3={_date:af};function A3(t,e,s,n){const{controller:o,data:l,_sorted:c}=t,d=o._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&c&&l.length){const f=d._reversePixels?a4:oi;if(n){if(o._sharedOptions){const p=l[0],g=typeof p.getRange=="function"&&p.getRange(e);if(g){const y=f(l,e,s-g),b=f(l,e,s+g);return{lo:y.lo,hi:b.hi}}}}else{const p=f(l,e,s);if(h){const{vScale:g}=o._cachedMeta,{_parsed:y}=t,b=y.slice(0,p.lo+1).reverse().findIndex(N=>!We(N[g.axis]));p.lo-=Math.max(0,b);const j=y.slice(p.hi).findIndex(N=>!We(N[g.axis]));p.hi+=Math.max(0,j)}return p}}return{lo:0,hi:l.length-1}}function $l(t,e,s,n,o){const l=t.getSortedVisibleDatasetMetas(),c=s[e];for(let d=0,h=l.length;d<h;++d){const{index:f,data:p}=l[d],{lo:g,hi:y}=A3(l[d],e,c,o);for(let b=g;b<=y;++b){const j=p[b];j.skip||n(j,f,b)}}}function R3(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,o){const l=e?Math.abs(n.x-o.x):0,c=s?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}function ou(t,e,s,n,o){const l=[];return!o&&!t.isPointInArea(e)||$l(t,s,e,function(d,h,f){!o&&!_o(d,t.chartArea,0)||d.inRange(e.x,e.y,n)&&l.push({element:d,datasetIndex:h,index:f})},!0),l}function I3(t,e,s,n){let o=[];function l(c,d,h){const{startAngle:f,endAngle:p}=c.getProps(["startAngle","endAngle"],n),{angle:g}=ob(c,{x:e.x,y:e.y});Kh(g,f,p)&&o.push({element:c,datasetIndex:d,index:h})}return $l(t,s,e,l),o}function L3(t,e,s,n,o,l){let c=[];const d=R3(s);let h=Number.POSITIVE_INFINITY;function f(p,g,y){const b=p.inRange(e.x,e.y,o);if(n&&!b)return;const j=p.getCenterPoint(o);if(!(!!l||t.isPointInArea(j))&&!b)return;const w=d(e,j);w<h?(c=[{element:p,datasetIndex:g,index:y}],h=w):w===h&&c.push({element:p,datasetIndex:g,index:y})}return $l(t,s,e,f),c}function au(t,e,s,n,o,l){return!l&&!t.isPointInArea(e)?[]:s==="r"&&!n?I3(t,e,s,o):L3(t,e,s,n,o,l)}function d0(t,e,s,n,o){const l=[],c=s==="x"?"inXRange":"inYRange";let d=!1;return $l(t,s,e,(h,f,p)=>{h[c]&&h[c](e[s],o)&&(l.push({element:h,datasetIndex:f,index:p}),d=d||h.inRange(e.x,e.y,o))}),n&&!d?[]:l}var F3={modes:{index(t,e,s,n){const o=ti(e,t),l=s.axis||"x",c=s.includeInvisible||!1,d=s.intersect?ou(t,o,l,n,c):au(t,o,l,!1,n,c),h=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const p=d[0].index,g=f.data[p];g&&!g.skip&&h.push({element:g,datasetIndex:f.index,index:p})}),h):[]},dataset(t,e,s,n){const o=ti(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;let d=s.intersect?ou(t,o,l,n,c):au(t,o,l,!1,n,c);if(d.length>0){const h=d[0].datasetIndex,f=t.getDatasetMeta(h).data;d=[];for(let p=0;p<f.length;++p)d.push({element:f[p],datasetIndex:h,index:p})}return d},point(t,e,s,n){const o=ti(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return ou(t,o,l,n,c)},nearest(t,e,s,n){const o=ti(e,t),l=s.axis||"xy",c=s.includeInvisible||!1;return au(t,o,l,s.intersect,n,c)},x(t,e,s,n){const o=ti(e,t);return d0(t,o,"x",s.intersect,n)},y(t,e,s,n){const o=ti(e,t);return d0(t,o,"y",s.intersect,n)}}};const kb=["left","top","right","bottom"];function Zr(t,e){return t.filter(s=>s.pos===e)}function u0(t,e){return t.filter(s=>kb.indexOf(s.pos)===-1&&s.box.axis===e)}function eo(t,e){return t.sort((s,n)=>{const o=e?n:s,l=e?s:n;return o.weight===l.weight?o.index-l.index:o.weight-l.weight})}function V3(t){const e=[];let s,n,o,l,c,d;for(s=0,n=(t||[]).length;s<n;++s)o=t[s],{position:l,options:{stack:c,stackWeight:d=1}}=o,e.push({index:s,box:o,pos:l,horizontal:o.isHorizontal(),weight:o.weight,stack:c&&l+c,stackWeight:d});return e}function z3(t){const e={};for(const s of t){const{stack:n,pos:o,stackWeight:l}=s;if(!n||!kb.includes(o))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=l}return e}function B3(t,e){const s=z3(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let l,c,d;for(l=0,c=t.length;l<c;++l){d=t[l];const{fullSize:h}=d.box,f=s[d.stack],p=f&&d.stackWeight/f.weight;d.horizontal?(d.width=p?p*n:h&&e.availableWidth,d.height=o):(d.width=n,d.height=p?p*o:h&&e.availableHeight)}return s}function $3(t){const e=V3(t),s=eo(e.filter(f=>f.box.fullSize),!0),n=eo(Zr(e,"left"),!0),o=eo(Zr(e,"right")),l=eo(Zr(e,"top"),!0),c=eo(Zr(e,"bottom")),d=u0(e,"x"),h=u0(e,"y");return{fullSize:s,leftAndTop:n.concat(l),rightAndBottom:o.concat(h).concat(c).concat(d),chartArea:Zr(e,"chartArea"),vertical:n.concat(o).concat(h),horizontal:l.concat(c).concat(d)}}function h0(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Cb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function U3(t,e,s,n){const{pos:o,box:l}=s,c=t.maxPadding;if(!Le(o)){s.size&&(t[o]-=s.size);const g=n[s.stack]||{size:0,count:1};g.size=Math.max(g.size,s.horizontal?l.height:l.width),s.size=g.size/g.count,t[o]+=s.size}l.getPadding&&Cb(c,l.getPadding());const d=Math.max(0,e.outerWidth-h0(c,t,"left","right")),h=Math.max(0,e.outerHeight-h0(c,t,"top","bottom")),f=d!==t.w,p=h!==t.h;return t.w=d,t.h=h,s.horizontal?{same:f,other:p}:{same:p,other:f}}function W3(t){const e=t.maxPadding;function s(n){const o=Math.max(e[n]-t[n],0);return t[n]+=o,o}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function H3(t,e){const s=e.maxPadding;function n(o){const l={left:0,top:0,right:0,bottom:0};return o.forEach(c=>{l[c]=Math.max(e[c],s[c])}),l}return n(t?["left","right"]:["top","bottom"])}function oo(t,e,s,n){const o=[];let l,c,d,h,f,p;for(l=0,c=t.length,f=0;l<c;++l){d=t[l],h=d.box,h.update(d.width||e.w,d.height||e.h,H3(d.horizontal,e));const{same:g,other:y}=U3(e,s,d,n);f|=g&&o.length,p=p||y,h.fullSize||o.push(d)}return f&&oo(o,e,s,n)||p}function sl(t,e,s,n,o){t.top=s,t.left=e,t.right=e+n,t.bottom=s+o,t.width=n,t.height=o}function f0(t,e,s,n){const o=s.padding;let{x:l,y:c}=e;for(const d of t){const h=d.box,f=n[d.stack]||{placed:0,weight:1},p=d.stackWeight/f.weight||1;if(d.horizontal){const g=e.w*p,y=f.size||h.height;_l(f.start)&&(c=f.start),h.fullSize?sl(h,o.left,c,s.outerWidth-o.right-o.left,y):sl(h,e.left+f.placed,c,g,y),f.start=c,f.placed+=g,c=h.bottom}else{const g=e.h*p,y=f.size||h.width;_l(f.start)&&(l=f.start),h.fullSize?sl(h,l,o.top,y,s.outerHeight-o.bottom-o.top):sl(h,l,e.top+f.placed,y,g),f.start=l,f.placed+=g,l=h.right}}e.x=l,e.y=c}var ds={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const o=fs(t.options.layout.padding),l=Math.max(e-o.width,0),c=Math.max(s-o.height,0),d=$3(t.boxes),h=d.vertical,f=d.horizontal;ze(t.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const p=h.reduce((N,w)=>w.box.options&&w.box.options.display===!1?N:N+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:s,padding:o,availableWidth:l,availableHeight:c,vBoxMaxWidth:l/2/p,hBoxMaxHeight:c/2}),y=Object.assign({},o);Cb(y,fs(n));const b=Object.assign({maxPadding:y,w:l,h:c,x:o.left,y:o.top},o),j=B3(h.concat(f),g);oo(d.fullSize,b,g,j),oo(h,b,g,j),oo(f,b,g,j)&&oo(h,b,g,j),W3(b),f0(d.leftAndTop,b,g,j),b.x+=b.w,b.y+=b.h,f0(d.rightAndBottom,b,g,j),t.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},ze(d.chartArea,N=>{const w=N.box;Object.assign(w,t.chartArea),w.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class _b{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,o){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,o?Math.floor(s/o):n)}}isAttached(e){return!0}updateConfig(e){}}class q3 extends _b{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hl="$chartjs",Y3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},m0=t=>t===null||t==="";function K3(t,e){const s=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t[hl]={initial:{height:n,width:o,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",m0(o)){const l=e0(t,"width");l!==void 0&&(t.width=l)}if(m0(n))if(t.style.height==="")t.height=t.width/(e||2);else{const l=e0(t,"height");l!==void 0&&(t.height=l)}return t}const Pb=n3?{passive:!0}:!1;function G3(t,e,s){t&&t.addEventListener(e,s,Pb)}function Q3(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Pb)}function X3(t,e){const s=Y3[t.type]||t.type,{x:n,y:o}=ti(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:o!==void 0?o:null}}function El(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function J3(t,e,s){const n=t.canvas,o=new MutationObserver(l=>{let c=!1;for(const d of l)c=c||El(d.addedNodes,n),c=c&&!El(d.removedNodes,n);c&&s()});return o.observe(document,{childList:!0,subtree:!0}),o}function Z3(t,e,s){const n=t.canvas,o=new MutationObserver(l=>{let c=!1;for(const d of l)c=c||El(d.removedNodes,n),c=c&&!El(d.addedNodes,n);c&&s()});return o.observe(document,{childList:!0,subtree:!0}),o}const Mo=new Map;let p0=0;function Mb(){const t=window.devicePixelRatio;t!==p0&&(p0=t,Mo.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function eP(t,e){Mo.size||window.addEventListener("resize",Mb),Mo.set(t,e)}function tP(t){Mo.delete(t),Mo.size||window.removeEventListener("resize",Mb)}function sP(t,e,s){const n=t.canvas,o=n&&of(n);if(!o)return;const l=cb((d,h)=>{const f=o.clientWidth;s(d,h),f<o.clientWidth&&s()},window),c=new ResizeObserver(d=>{const h=d[0],f=h.contentRect.width,p=h.contentRect.height;f===0&&p===0||l(f,p)});return c.observe(o),eP(t,l),c}function lu(t,e,s){s&&s.disconnect(),e==="resize"&&tP(t)}function nP(t,e,s){const n=t.canvas,o=cb(l=>{t.ctx!==null&&s(X3(l,t))},t);return G3(n,e,o),o}class iP extends _b{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(K3(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[hl])return!1;const n=s[hl].initial;["height","width"].forEach(l=>{const c=n[l];We(c)?s.removeAttribute(l):s.setAttribute(l,c)});const o=n.style||{};return Object.keys(o).forEach(l=>{s.style[l]=o[l]}),s.width=s.width,delete s[hl],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const o=e.$proxies||(e.$proxies={}),c={attach:J3,detach:Z3,resize:sP}[s]||nP;o[s]=c(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),o=n[s];if(!o)return;({attach:lu,detach:lu,resize:lu}[s]||Q3)(e,s,o),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,o){return s3(e,s,n,o)}isAttached(e){const s=e&&of(e);return!!(s&&s.isConnected)}}function rP(t){return!rf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?q3:iP}let tn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Co(this.x)&&Co(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const o={};return e.forEach(l=>{o[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),o}};function oP(t,e){const s=t.options.ticks,n=aP(t),o=Math.min(s.maxTicksLimit||n,n),l=s.major.enabled?cP(e):[],c=l.length,d=l[0],h=l[c-1],f=[];if(c>o)return dP(e,f,l,c/o),f;const p=lP(l,e,o);if(c>0){let g,y;const b=c>1?Math.round((h-d)/(c-1)):null;for(nl(e,f,p,We(b)?0:d-b,d),g=0,y=c-1;g<y;g++)nl(e,f,p,l[g],l[g+1]);return nl(e,f,p,h,We(b)?e.length:h+b),f}return nl(e,f,p),f}function aP(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),o=t._maxLength/s;return Math.floor(Math.min(n,o))}function lP(t,e,s){const n=uP(t),o=e.length/s;if(!n)return Math.max(o,1);const l=e4(n);for(let c=0,d=l.length-1;c<d;c++){const h=l[c];if(h>o)return h}return Math.max(o,1)}function cP(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function dP(t,e,s,n){let o=0,l=s[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===l&&(e.push(t[c]),o++,l=s[o*n])}function nl(t,e,s,n,o){const l=Ee(n,0),c=Math.min(Ee(o,t.length),t.length);let d=0,h,f,p;for(s=Math.ceil(s),o&&(h=o-n,s=h/Math.floor(h/s)),p=l;p<0;)d++,p=Math.round(l+d*s);for(f=Math.max(l,0);f<c;f++)f===p&&(e.push(t[f]),d++,p=Math.round(l+d*s))}function uP(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const hP=t=>t==="left"?"right":t==="right"?"left":t,g0=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,x0=(t,e)=>Math.min(e||t,t);function y0(t,e){const s=[],n=t.length/e,o=t.length;let l=0;for(;l<o;l+=n)s.push(t[Math.floor(l)]);return s}function fP(t,e,s){const n=t.ticks.length,o=Math.min(e,n-1),l=t._startPixel,c=t._endPixel,d=1e-6;let h=t.getPixelForTick(o),f;if(!(s&&(n===1?f=Math.max(h-l,c-h):e===0?f=(t.getPixelForTick(1)-h)/2:f=(h-t.getPixelForTick(o-1))/2,h+=o<e?f:-f,h<l-d||h>c+d)))return h}function mP(t,e){ze(t,s=>{const n=s.gc,o=n.length/2;let l;if(o>e){for(l=0;l<o;++l)delete s.data[n[l]];n.splice(0,o)}})}function to(t){return t.drawTicks?t.tickLength:0}function v0(t,e){if(!t.display)return 0;const s=Dt(t.font,e),n=fs(t.padding);return(vt(t.text)?t.text.length:1)*s.lineHeight+n.height}function pP(t,e){return fi(t,{scale:e,type:"scale"})}function gP(t,e,s){return fi(t,{tick:s,index:e,type:"tick"})}function xP(t,e,s){let n=Qh(t);return(s&&e!=="right"||!s&&e==="right")&&(n=hP(n)),n}function yP(t,e,s,n){const{top:o,left:l,bottom:c,right:d,chart:h}=t,{chartArea:f,scales:p}=h;let g=0,y,b,j;const N=c-o,w=d-l;if(t.isHorizontal()){if(b=Mt(n,l,d),Le(s)){const S=Object.keys(s)[0],_=s[S];j=p[S].getPixelForValue(_)+N-e}else s==="center"?j=(f.bottom+f.top)/2+N-e:j=g0(t,s,e);y=d-l}else{if(Le(s)){const S=Object.keys(s)[0],_=s[S];b=p[S].getPixelForValue(_)-w+e}else s==="center"?b=(f.left+f.right)/2-w+e:b=g0(t,s,e);j=Mt(n,c,o),g=s==="left"?-Nt:Nt}return{titleX:b,titleY:j,maxWidth:y,rotation:g}}class dr extends tn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:o}=this;return e=Os(e,Number.POSITIVE_INFINITY),s=Os(s,Number.NEGATIVE_INFINITY),n=Os(n,Number.POSITIVE_INFINITY),o=Os(o,Number.NEGATIVE_INFINITY),{min:Os(e,n),max:Os(s,o),minDefined:hs(e),maxDefined:hs(s)}}getMinMax(e){let{min:s,max:n,minDefined:o,maxDefined:l}=this.getUserBounds(),c;if(o&&l)return{min:s,max:n};const d=this.getMatchingVisibleMetas();for(let h=0,f=d.length;h<f;++h)c=d[h].controller.getMinMax(this,e),o||(s=Math.min(s,c.min)),l||(n=Math.max(n,c.max));return s=l&&s>n?n:s,n=o&&s>n?s:n,{min:Os(s,Os(n,s)),max:Os(n,Os(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ye(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:o,grace:l,ticks:c}=this.options,d=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=A4(this,l,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=d<this.ticks.length;this._convertTicksToLabels(h?y0(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=oP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ye(this.options.afterUpdate,[this])}beforeSetDimensions(){Ye(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ye(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ye(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ye(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,o,l;for(n=0,o=e.length;n<o;n++)l=e[n],l.label=Ye(s.callback,[l.value,n,e],this)}afterTickToLabelConversion(){Ye(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ye(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=x0(this.ticks.length,e.ticks.maxTicksLimit),o=s.minRotation||0,l=s.maxRotation;let c=o,d,h,f;if(!this._isVisible()||!s.display||o>=l||n<=1||!this.isHorizontal()){this.labelRotation=o;return}const p=this._getLabelSizes(),g=p.widest.width,y=p.highest.height,b=Ot(this.chart.width-g,0,this.maxWidth);d=e.offset?this.maxWidth/n:b/(n-1),g+6>d&&(d=b/(n-(e.offset?.5:1)),h=this.maxHeight-to(e.grid)-s.padding-v0(e.title,this.chart.options.font),f=Math.sqrt(g*g+y*y),c=i4(Math.min(Math.asin(Ot((p.highest.height+6)/d,-1,1)),Math.asin(Ot(h/f,-1,1))-Math.asin(Ot(y/f,-1,1)))),c=Math.max(o,Math.min(l,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ye(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ye(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:o,grid:l}}=this,c=this._isVisible(),d=this.isHorizontal();if(c){const h=v0(o,s.options.font);if(d?(e.width=this.maxWidth,e.height=to(l)+h):(e.height=this.maxHeight,e.width=to(l)+h),n.display&&this.ticks.length){const{first:f,last:p,widest:g,highest:y}=this._getLabelSizes(),b=n.padding*2,j=ri(this.labelRotation),N=Math.cos(j),w=Math.sin(j);if(d){const S=n.mirror?0:w*g.width+N*y.height;e.height=Math.min(this.maxHeight,e.height+S+b)}else{const S=n.mirror?0:N*g.width+w*y.height;e.width=Math.min(this.maxWidth,e.width+S+b)}this._calculatePadding(f,p,w,N)}}this._handleMargins(),d?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,o){const{ticks:{align:l,padding:c},position:d}=this.options,h=this.labelRotation!==0,f=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,b=0;h?f?(y=o*e.width,b=n*s.height):(y=n*e.height,b=o*s.width):l==="start"?b=s.width:l==="end"?y=e.width:l!=="inner"&&(y=e.width/2,b=s.width/2),this.paddingLeft=Math.max((y-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((b-g+c)*this.width/(this.width-g),0)}else{let p=s.height/2,g=e.height/2;l==="start"?(p=0,g=e.height):l==="end"&&(p=s.height,g=0),this.paddingTop=p+c,this.paddingBottom=g+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ye(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)We(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=y0(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:o,_longestTextCache:l}=this,c=[],d=[],h=Math.floor(s/x0(s,n));let f=0,p=0,g,y,b,j,N,w,S,_,T,O,E;for(g=0;g<s;g+=h){if(j=e[g].label,N=this._resolveTickFontOptions(g),o.font=w=N.string,S=l[w]=l[w]||{data:{},gc:[]},_=N.lineHeight,T=O=0,!We(j)&&!vt(j))T=Gx(o,S.data,S.gc,T,j),O=_;else if(vt(j))for(y=0,b=j.length;y<b;++y)E=j[y],!We(E)&&!vt(E)&&(T=Gx(o,S.data,S.gc,T,E),O+=_);c.push(T),d.push(O),f=Math.max(T,f),p=Math.max(O,p)}mP(l,s);const $=c.indexOf(f),z=d.indexOf(p),L=M=>({width:c[M]||0,height:d[M]||0});return{first:L(0),last:L(s-1),widest:L($),highest:L(z),widths:c,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return o4(this._alignToPixels?Jn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=gP(this.getContext(),e,n))}return this.$context||(this.$context=pP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=ri(this.labelRotation),n=Math.abs(Math.cos(s)),o=Math.abs(Math.sin(s)),l=this._getLabelSizes(),c=e.autoSkipPadding||0,d=l?l.widest.width+c:0,h=l?l.highest.height+c:0;return this.isHorizontal()?h*n>d*o?d/n:h/o:h*o<d*n?h/n:d/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,o=this.options,{grid:l,position:c,border:d}=o,h=l.offset,f=this.isHorizontal(),g=this.ticks.length+(h?1:0),y=to(l),b=[],j=d.setContext(this.getContext()),N=j.display?j.width:0,w=N/2,S=function(V){return Jn(n,V,N)};let _,T,O,E,$,z,L,M,R,Z,re,ee;if(c==="top")_=S(this.bottom),z=this.bottom-y,M=_-w,Z=S(e.top)+w,ee=e.bottom;else if(c==="bottom")_=S(this.top),Z=e.top,ee=S(e.bottom)-w,z=_+w,M=this.top+y;else if(c==="left")_=S(this.right),$=this.right-y,L=_-w,R=S(e.left)+w,re=e.right;else if(c==="right")_=S(this.left),R=e.left,re=S(e.right)-w,$=_+w,L=this.left+y;else if(s==="x"){if(c==="center")_=S((e.top+e.bottom)/2+.5);else if(Le(c)){const V=Object.keys(c)[0],X=c[V];_=S(this.chart.scales[V].getPixelForValue(X))}Z=e.top,ee=e.bottom,z=_+w,M=z+y}else if(s==="y"){if(c==="center")_=S((e.left+e.right)/2);else if(Le(c)){const V=Object.keys(c)[0],X=c[V];_=S(this.chart.scales[V].getPixelForValue(X))}$=_-w,L=$-y,R=e.left,re=e.right}const de=Ee(o.ticks.maxTicksLimit,g),he=Math.max(1,Math.ceil(g/de));for(T=0;T<g;T+=he){const V=this.getContext(T),X=l.setContext(V),B=d.setContext(V),q=X.lineWidth,se=X.color,D=B.dash||[],G=B.dashOffset,xe=X.tickWidth,ge=X.tickColor,Se=X.tickBorderDash||[],we=X.tickBorderDashOffset;O=fP(this,T,h),O!==void 0&&(E=Jn(n,O,q),f?$=L=R=re=E:z=M=Z=ee=E,b.push({tx1:$,ty1:z,tx2:L,ty2:M,x1:R,y1:Z,x2:re,y2:ee,width:q,color:se,borderDash:D,borderDashOffset:G,tickWidth:xe,tickColor:ge,tickBorderDash:Se,tickBorderDashOffset:we}))}return this._ticksLength=g,this._borderValue=_,b}_computeLabelItems(e){const s=this.axis,n=this.options,{position:o,ticks:l}=n,c=this.isHorizontal(),d=this.ticks,{align:h,crossAlign:f,padding:p,mirror:g}=l,y=to(n.grid),b=y+p,j=g?-p:b,N=-ri(this.labelRotation),w=[];let S,_,T,O,E,$,z,L,M,R,Z,re,ee="middle";if(o==="top")$=this.bottom-j,z=this._getXAxisLabelAlignment();else if(o==="bottom")$=this.top+j,z=this._getXAxisLabelAlignment();else if(o==="left"){const he=this._getYAxisLabelAlignment(y);z=he.textAlign,E=he.x}else if(o==="right"){const he=this._getYAxisLabelAlignment(y);z=he.textAlign,E=he.x}else if(s==="x"){if(o==="center")$=(e.top+e.bottom)/2+b;else if(Le(o)){const he=Object.keys(o)[0],V=o[he];$=this.chart.scales[he].getPixelForValue(V)+b}z=this._getXAxisLabelAlignment()}else if(s==="y"){if(o==="center")E=(e.left+e.right)/2-b;else if(Le(o)){const he=Object.keys(o)[0],V=o[he];E=this.chart.scales[he].getPixelForValue(V)}z=this._getYAxisLabelAlignment(y).textAlign}s==="y"&&(h==="start"?ee="top":h==="end"&&(ee="bottom"));const de=this._getLabelSizes();for(S=0,_=d.length;S<_;++S){T=d[S],O=T.label;const he=l.setContext(this.getContext(S));L=this.getPixelForTick(S)+l.labelOffset,M=this._resolveTickFontOptions(S),R=M.lineHeight,Z=vt(O)?O.length:1;const V=Z/2,X=he.color,B=he.textStrokeColor,q=he.textStrokeWidth;let se=z;c?(E=L,z==="inner"&&(S===_-1?se=this.options.reverse?"left":"right":S===0?se=this.options.reverse?"right":"left":se="center"),o==="top"?f==="near"||N!==0?re=-Z*R+R/2:f==="center"?re=-de.highest.height/2-V*R+R:re=-de.highest.height+R/2:f==="near"||N!==0?re=R/2:f==="center"?re=de.highest.height/2-V*R:re=de.highest.height-Z*R,g&&(re*=-1),N!==0&&!he.showLabelBackdrop&&(E+=R/2*Math.sin(N))):($=L,re=(1-Z)*R/2);let D;if(he.showLabelBackdrop){const G=fs(he.backdropPadding),xe=de.heights[S],ge=de.widths[S];let Se=re-G.top,we=0-G.left;switch(ee){case"middle":Se-=xe/2;break;case"bottom":Se-=xe;break}switch(z){case"center":we-=ge/2;break;case"right":we-=ge;break;case"inner":S===_-1?we-=ge:S>0&&(we-=ge/2);break}D={left:we,top:Se,width:ge+G.width,height:xe+G.height,color:he.backdropColor}}w.push({label:O,font:M,textOffset:re,options:{rotation:N,color:X,strokeColor:B,strokeWidth:q,textAlign:se,textBaseline:ee,translation:[E,$],backdrop:D}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-ri(this.labelRotation))return e==="top"?"left":"right";let o="center";return s.align==="start"?o="left":s.align==="end"?o="right":s.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:o,padding:l}}=this.options,c=this._getLabelSizes(),d=e+l,h=c.widest.width;let f,p;return s==="left"?o?(p=this.right+l,n==="near"?f="left":n==="center"?(f="center",p+=h/2):(f="right",p+=h)):(p=this.right-d,n==="near"?f="right":n==="center"?(f="center",p-=h/2):(f="left",p=this.left)):s==="right"?o?(p=this.left+l,n==="near"?f="right":n==="center"?(f="center",p-=h/2):(f="left",p-=h)):(p=this.left+d,n==="near"?f="left":n==="center"?(f="center",p+=h/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:o,width:l,height:c}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,o,l,c),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const o=this.ticks.findIndex(l=>l.value===e);return o>=0?s.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,c;const d=(h,f,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(f.x,f.y),n.stroke(),n.restore())};if(s.display)for(l=0,c=o.length;l<c;++l){const h=o[l];s.drawOnChartArea&&d({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),s.drawTicks&&d({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:o}}=this,l=n.setContext(this.getContext()),c=n.display?l.width:0;if(!c)return;const d=o.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,p,g,y;this.isHorizontal()?(f=Jn(e,this.left,c)-c/2,p=Jn(e,this.right,d)+d/2,g=y=h):(g=Jn(e,this.top,c)-c/2,y=Jn(e,this.bottom,d)+d/2,f=p=h),s.save(),s.lineWidth=l.width,s.strokeStyle=l.color,s.beginPath(),s.moveTo(f,g),s.lineTo(p,y),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,o=this._computeLabelArea();o&&Jh(n,o);const l=this.getLabelItems(e);for(const c of l){const d=c.options,h=c.font,f=c.label,p=c.textOffset;Po(n,f,0,p,h,d)}o&&Zh(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:o}}=this;if(!n.display)return;const l=Dt(n.font),c=fs(n.padding),d=n.align;let h=l.lineHeight/2;s==="bottom"||s==="center"||Le(s)?(h+=c.bottom,vt(n.text)&&(h+=l.lineHeight*(n.text.length-1))):h+=c.top;const{titleX:f,titleY:p,maxWidth:g,rotation:y}=yP(this,h,s,d);Po(e,n.text,0,0,l,{color:n.color,maxWidth:g,rotation:y,textAlign:xP(d,s,o),textBaseline:"middle",translation:[f,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Ee(e.grid&&e.grid.z,-1),o=Ee(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==dr.prototype.draw?[{z:s,draw:l=>{this.draw(l)}}]:[{z:n,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let l,c;for(l=0,c=s.length;l<c;++l){const d=s[l];d[n]===this.id&&(!e||d.type===e)&&o.push(d)}return o}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Dt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class il{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;wP(s)&&(n=this.register(s));const o=this.items,l=e.id,c=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in o||(o[l]=e,vP(e,c,n),this.override&&at.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,o=this.scope;n in s&&delete s[n],o&&n in at[o]&&(delete at[o][n],this.override&&delete ui[n])}}function vP(t,e,s){const n=ko(Object.create(null),[s?at.get(s):{},at.get(e),t.defaults]);at.set(e,n),t.defaultRoutes&&bP(e,t.defaultRoutes),t.descriptors&&at.describe(e,t.descriptors)}function bP(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),o=n.pop(),l=[t].concat(n).join("."),c=e[s].split("."),d=c.pop(),h=c.join(".");at.route(l,o,h,d)})}function wP(t){return"id"in t&&"defaults"in t}class jP{constructor(){this.controllers=new il(Sb,"datasets",!0),this.elements=new il(tn,"elements"),this.plugins=new il(Object,"plugins"),this.scales=new il(dr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(o=>{const l=n||this._getRegistryForType(o);n||l.isForType(o)||l===this.plugins&&o.id?this._exec(e,l,o):ze(o,c=>{const d=n||this._getRegistryForType(c);this._exec(e,d,c)})})}_exec(e,s,n){const o=Yh(e);Ye(n["before"+o],[],n),s[e](n),Ye(n["after"+o],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const o=s.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return o}}var As=new jP;class NP{constructor(){this._init=void 0}notify(e,s,n,o){if(s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const l=o?this._descriptors(e).filter(o):this._descriptors(e),c=this._notify(l,e,s,n);return s==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),c}_notify(e,s,n,o){o=o||{};for(const l of e){const c=l.plugin,d=c[n],h=[s,o,l.options];if(Ye(d,h,c)===!1&&o.cancelable)return!1}return!0}invalidate(){We(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,o=Ee(n.options&&n.options.plugins,{}),l=SP(n);return o===!1&&!s?[]:CP(e,l,o,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,o=(l,c)=>l.filter(d=>!c.some(h=>d.plugin.id===h.plugin.id));this._notify(o(s,n),e,"stop"),this._notify(o(n,s),e,"start")}}function SP(t){const e={},s=[],n=Object.keys(As.plugins.items);for(let l=0;l<n.length;l++)s.push(As.getPlugin(n[l]));const o=t.plugins||[];for(let l=0;l<o.length;l++){const c=o[l];s.indexOf(c)===-1&&(s.push(c),e[c.id]=!0)}return{plugins:s,localIds:e}}function kP(t,e){return!e&&t===!1?null:t===!0?{}:t}function CP(t,{plugins:e,localIds:s},n,o){const l=[],c=t.getContext();for(const d of e){const h=d.id,f=kP(n[h],o);f!==null&&l.push({plugin:d,options:_P(t.config,{plugin:d,local:s[h]},f,c)})}return l}function _P(t,{plugin:e,local:s},n,o){const l=t.pluginScopeKeys(e),c=t.getOptionScopes(n,l);return s&&e.defaults&&c.push(e.defaults),t.createResolver(c,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eh(t,e){const s=at.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function PP(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function MP(t,e){return t===e?"_index_":"_value_"}function b0(t){if(t==="x"||t==="y"||t==="r")return t}function TP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function th(t,...e){if(b0(t))return t;for(const s of e){const n=s.axis||TP(s.position)||t.length>1&&b0(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function w0(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function EP(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return w0(t,"x",s[0])||w0(t,"y",s[0])}return{}}function OP(t,e){const s=ui[t.type]||{scales:{}},n=e.scales||{},o=eh(t.type,e),l=Object.create(null);return Object.keys(n).forEach(c=>{const d=n[c];if(!Le(d))return console.error(`Invalid scale configuration for scale: ${c}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const h=th(c,d,EP(c,t),at.scales[d.type]),f=MP(h,o),p=s.scales||{};l[c]=fo(Object.create(null),[{axis:h},d,p[h],p[f]])}),t.data.datasets.forEach(c=>{const d=c.type||t.type,h=c.indexAxis||eh(d,e),p=(ui[d]||{}).scales||{};Object.keys(p).forEach(g=>{const y=PP(g,h),b=c[y+"AxisID"]||y;l[b]=l[b]||Object.create(null),fo(l[b],[{axis:y},n[b],p[g]])})}),Object.keys(l).forEach(c=>{const d=l[c];fo(d,[at.scales[d.type],at.scale])}),l}function Tb(t){const e=t.options||(t.options={});e.plugins=Ee(e.plugins,{}),e.scales=OP(t,e)}function Eb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function DP(t){return t=t||{},t.data=Eb(t.data),Tb(t),t}const j0=new Map,Ob=new Set;function rl(t,e){let s=j0.get(t);return s||(s=e(),j0.set(t,s),Ob.add(s)),s}const so=(t,e,s)=>{const n=Cl(e,s);n!==void 0&&t.add(n)};class AP{constructor(e){this._config=DP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Eb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return rl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return rl(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return rl(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return rl(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let o=n.get(e);return(!o||s)&&(o=new Map,n.set(e,o)),o}getOptionScopes(e,s,n){const{options:o,type:l}=this,c=this._cachedScopes(e,n),d=c.get(s);if(d)return d;const h=new Set;s.forEach(p=>{e&&(h.add(e),p.forEach(g=>so(h,e,g))),p.forEach(g=>so(h,o,g)),p.forEach(g=>so(h,ui[l]||{},g)),p.forEach(g=>so(h,at,g)),p.forEach(g=>so(h,Ju,g))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),Ob.has(s)&&c.set(s,f),f}chartOptionScopes(){const{options:e,type:s}=this;return[e,ui[s]||{},at.datasets[s]||{},{type:s},at,Ju]}resolveNamedOptions(e,s,n,o=[""]){const l={$shared:!0},{resolver:c,subPrefixes:d}=N0(this._resolverCache,e,o);let h=c;if(IP(c,s)){l.$shared=!1,n=An(n)?n():n;const f=this.createResolver(e,n,d);h=sr(c,n,f)}for(const f of s)l[f]=h[f];return l}createResolver(e,s,n=[""],o){const{resolver:l}=N0(this._resolverCache,e,n);return Le(s)?sr(l,s,void 0,o):l}}function N0(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=s.join();let l=n.get(o);return l||(l={resolver:tf(e,s),subPrefixes:s.filter(d=>!d.toLowerCase().includes("hover"))},n.set(o,l)),l}const RP=t=>Le(t)&&Object.getOwnPropertyNames(t).some(e=>An(t[e]));function IP(t,e){const{isScriptable:s,isIndexable:n}=mb(t);for(const o of e){const l=s(o),c=n(o),d=(c||l)&&t[o];if(l&&(An(d)||RP(d))||c&&vt(d))return!0}return!1}var LP="4.5.1";const FP=["top","bottom","left","right","chartArea"];function S0(t,e){return t==="top"||t==="bottom"||FP.indexOf(t)===-1&&e==="x"}function k0(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function C0(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ye(s&&s.onComplete,[t],e)}function VP(t){const e=t.chart,s=e.options.animation;Ye(s&&s.onProgress,[t],e)}function Db(t){return rf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fl={},_0=t=>{const e=Db(t);return Object.values(fl).filter(s=>s.canvas===e).pop()};function zP(t,e,s){const n=Object.keys(t);for(const o of n){const l=+o;if(l>=e){const c=t[o];delete t[o],(s>0||l>e)&&(t[l+s]=c)}}}function BP(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let ur=class{static defaults=at;static instances=fl;static overrides=ui;static registry=As;static version=LP;static getChart=_0;static register(...e){As.add(...e),P0()}static unregister(...e){As.remove(...e),P0()}constructor(e,s){const n=this.config=new AP(s),o=Db(e),l=_0(o);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||rP(o)),this.platform.updateConfig(n);const d=this.platform.acquireContext(o,c.aspectRatio),h=d&&d.canvas,f=h&&h.height,p=h&&h.width;if(this.id=H_(),this.ctx=d,this.canvas=h,this.width=p,this.height=f,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u4(g=>this.update(g),c.resizeDelay||0),this._dataChanges=[],fl[this.id]=this,!d||!h){console.error("Failed to create chart: can't acquire context from the given item");return}qs.listen(this,"complete",C0),qs.listen(this,"progress",VP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:o,_aspectRatio:l}=this;return We(e)?s&&l?l:o?n/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return As}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qx(this.canvas,this.ctx),this}stop(){return qs.stop(this),this}resize(e,s){qs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,o=this.canvas,l=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(o,e,s,l),d=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,Zx(this,d,!0)&&(this.notifyPlugins("resize",{size:c}),Ye(n.onResize,[this,c],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ze(s,(n,o)=>{n.id=o})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,o=Object.keys(n).reduce((c,d)=>(c[d]=!1,c),{});let l=[];s&&(l=l.concat(Object.keys(s).map(c=>{const d=s[c],h=th(c,d),f=h==="r",p=h==="x";return{options:d,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),ze(l,c=>{const d=c.options,h=d.id,f=th(h,d),p=Ee(d.type,c.dtype);(d.position===void 0||S0(d.position,f)!==S0(c.dposition))&&(d.position=c.dposition),o[h]=!0;let g=null;if(h in n&&n[h].type===p)g=n[h];else{const y=As.getScale(p);g=new y({id:h,type:p,ctx:this.ctx,chart:this}),n[g.id]=g}g.init(d,e)}),ze(o,(c,d)=>{c||delete n[d]}),ze(n,c=>{ds.configure(this,c,c.options),ds.addBox(this,c)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((o,l)=>o.index-l.index),n>s){for(let o=s;o<n;++o)this._destroyDatasetMeta(o);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(k0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,o)=>{s.filter(l=>l===n._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=s.length;n<o;n++){const l=s[n];let c=this.getDatasetMeta(n);const d=l.type||this.config.type;if(c.type&&c.type!==d&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=d,c.indexAxis=l.indexAxis||eh(d,this.options),c.order=l.order||0,c.index=n,c.label=""+l.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const h=As.getController(d),{datasetElementType:f,dataElementType:p}=at.datasets[d];Object.assign(h,{dataElementType:As.getElement(p),datasetElementType:f&&As.getElement(f)}),c.controller=new h(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){ze(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:g}=this.getDatasetMeta(f),y=!o&&l.indexOf(g)===-1;g.buildOrUpdateElements(y),c=Math.max(+g.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),o||ze(l,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(k0("z","_idx"));const{_active:d,_lastEvent:h}=this;h?this._eventHandler(h,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){ze(this.scales,e=>{ds.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!zx(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:l}of s){const c=n==="_removeElements"?-l:l;zP(e,o,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=l=>new Set(e.filter(c=>c[0]===l).map((c,d)=>d+","+c.splice(1).join(","))),o=n(0);for(let l=1;l<s;l++)if(!zx(o,n(l)))return;return Array.from(o).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ds.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],ze(this.boxes,o=>{n&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,l)=>{o._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,An(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),o={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(n.controller._update(s),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qs.has(this)?this.attached&&!qs.running(this)&&qs.start(this):(this.draw(),C0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let o,l;for(o=0,l=s.length;o<l;++o){const c=s[o];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},o=x3(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(o&&Jh(s,o),e.controller.draw(),o&&Zh(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return _o(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,o){const l=F3.modes[s];return typeof l=="function"?l(this,e,n,o):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let o=n.filter(l=>l&&l._dataset===s).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const o=n?"show":"hide",l=this.getDatasetMeta(e),c=l.controller._resolveAnimations(void 0,o);_l(s)?(l.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(l,{visible:n}),this.update(d=>d.datasetIndex===e?o:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),qs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Qx(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete fl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},o=(l,c,d)=>{l.offsetX=c,l.offsetY=d,this._eventHandler(l)};ze(this.options.events,l=>n(l,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(h,f)=>{s.addEventListener(this,h,f),e[h]=f},o=(h,f)=>{e[h]&&(s.removeEventListener(this,h,f),delete e[h])},l=(h,f)=>{this.canvas&&this.resize(h,f)};let c;const d=()=>{o("attach",d),this.attached=!0,this.resize(),n("resize",l),n("detach",c)};c=()=>{this.attached=!1,o("resize",l),this._stop(),this._resize(0,0),n("attach",d)},s.isAttached(this.canvas)?d():c()}unbindEvents(){ze(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ze(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const o=n?"set":"remove";let l,c,d,h;for(s==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+o+"DatasetHoverStyle"]()),d=0,h=e.length;d<h;++d){c=e[d];const f=c&&this.getDatasetMeta(c.datasetIndex).controller;f&&f[o+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:l,index:c})=>{const d=this.getDatasetMeta(l);if(!d)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:d.data[c],index:c}});!Sl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const o=this.options.hover,l=(h,f)=>h.filter(p=>!f.some(g=>p.datasetIndex===g.datasetIndex&&p.index===g.index)),c=l(s,e),d=n?e:l(e,s);c.length&&this.updateHoverStyle(c,o.mode,!1),d.length&&o.mode&&this.updateHoverStyle(d,o.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},o=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,o)===!1)return;const l=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(l||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:o=[],options:l}=this,c=s,d=this._getActiveElements(e,o,n,c),h=X_(e),f=BP(e,this._lastEvent,n,h);n&&(this._lastEvent=null,Ye(l.onHover,[e,d,this],this),h&&Ye(l.onClick,[e,d,this],this));const p=!Sl(d,o);return(p||s)&&(this._active=d,this._updateHoverStyles(d,o,s)),this._lastEvent=f,p}_getActiveElements(e,s,n,o){if(e.type==="mouseout")return[];if(!n)return s;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,o)}};function P0(){return ze(ur.instances,t=>t._plugins.invalidate())}function $P(t,e,s){const{startAngle:n,x:o,y:l,outerRadius:c,innerRadius:d,options:h}=e,{borderWidth:f,borderJoinStyle:p}=h,g=Math.min(f/c,ks(n-s));if(t.beginPath(),t.arc(o,l,c-f/2,n+g/2,s-g/2),d>0){const y=Math.min(f/d,ks(n-s));t.arc(o,l,d+f/2,s-y/2,n+y/2,!0)}else{const y=Math.min(f/2,c*ks(n-s));if(p==="round")t.arc(o,l,y,s-$e/2,n+$e/2,!0);else if(p==="bevel"){const b=2*y*y,j=-b*Math.cos(s+$e/2)+o,N=-b*Math.sin(s+$e/2)+l,w=b*Math.cos(n+$e/2)+o,S=b*Math.sin(n+$e/2)+l;t.lineTo(j,N),t.lineTo(w,S)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function UP(t,e,s){const{startAngle:n,pixelMargin:o,x:l,y:c,outerRadius:d,innerRadius:h}=e;let f=o/d;t.beginPath(),t.arc(l,c,d,n-f,s+f),h>o?(f=o/h,t.arc(l,c,h,s+f,n-f,!0)):t.arc(l,c,o,s+Nt,n-Nt),t.closePath(),t.clip()}function WP(t){return ef(t,["outerStart","outerEnd","innerStart","innerEnd"])}function HP(t,e,s,n){const o=WP(t.options.borderRadius),l=(s-e)/2,c=Math.min(l,n*e/2),d=h=>{const f=(s-Math.min(l,h))*n/2;return Ot(h,0,Math.min(l,f))};return{outerStart:d(o.outerStart),outerEnd:d(o.outerEnd),innerStart:Ot(o.innerStart,0,c),innerEnd:Ot(o.innerEnd,0,c)}}function Bi(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function Ol(t,e,s,n,o,l){const{x:c,y:d,startAngle:h,pixelMargin:f,innerRadius:p}=e,g=Math.max(e.outerRadius+n+s-f,0),y=p>0?p+n+s+f:0;let b=0;const j=o-h;if(n){const he=p>0?p-n:0,V=g>0?g-n:0,X=(he+V)/2,B=X!==0?j*X/(X+n):j;b=(j-B)/2}const N=Math.max(.001,j*g-s/$e)/g,w=(j-N)/2,S=h+w+b,_=o-w-b,{outerStart:T,outerEnd:O,innerStart:E,innerEnd:$}=HP(e,y,g,_-S),z=g-T,L=g-O,M=S+T/z,R=_-O/L,Z=y+E,re=y+$,ee=S+E/Z,de=_-$/re;if(t.beginPath(),l){const he=(M+R)/2;if(t.arc(c,d,g,M,he),t.arc(c,d,g,he,R),O>0){const q=Bi(L,R,c,d);t.arc(q.x,q.y,O,R,_+Nt)}const V=Bi(re,_,c,d);if(t.lineTo(V.x,V.y),$>0){const q=Bi(re,de,c,d);t.arc(q.x,q.y,$,_+Nt,de+Math.PI)}const X=(_-$/y+(S+E/y))/2;if(t.arc(c,d,y,_-$/y,X,!0),t.arc(c,d,y,X,S+E/y,!0),E>0){const q=Bi(Z,ee,c,d);t.arc(q.x,q.y,E,ee+Math.PI,S-Nt)}const B=Bi(z,S,c,d);if(t.lineTo(B.x,B.y),T>0){const q=Bi(z,M,c,d);t.arc(q.x,q.y,T,S-Nt,M)}}else{t.moveTo(c,d);const he=Math.cos(M)*g+c,V=Math.sin(M)*g+d;t.lineTo(he,V);const X=Math.cos(R)*g+c,B=Math.sin(R)*g+d;t.lineTo(X,B)}t.closePath()}function qP(t,e,s,n,o){const{fullCircles:l,startAngle:c,circumference:d}=e;let h=e.endAngle;if(l){Ol(t,e,s,n,h,o);for(let f=0;f<l;++f)t.fill();isNaN(d)||(h=c+(d%St||St))}return Ol(t,e,s,n,h,o),t.fill(),h}function YP(t,e,s,n,o){const{fullCircles:l,startAngle:c,circumference:d,options:h}=e,{borderWidth:f,borderJoinStyle:p,borderDash:g,borderDashOffset:y,borderRadius:b}=h,j=h.borderAlign==="inner";if(!f)return;t.setLineDash(g||[]),t.lineDashOffset=y,j?(t.lineWidth=f*2,t.lineJoin=p||"round"):(t.lineWidth=f,t.lineJoin=p||"bevel");let N=e.endAngle;if(l){Ol(t,e,s,n,N,o);for(let w=0;w<l;++w)t.stroke();isNaN(d)||(N=c+(d%St||St))}j&&UP(t,e,N),h.selfJoin&&N-c>=$e&&b===0&&p!=="miter"&&$P(t,e,N),l||(Ol(t,e,s,n,N,o),t.stroke())}class KP extends tn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.getProps(["x","y"],n),{angle:l,distance:c}=ob(o,{x:e,y:s}),{startAngle:d,endAngle:h,innerRadius:f,outerRadius:p,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),y=(this.options.spacing+this.options.borderWidth)/2,b=Ee(g,h-d),j=Kh(l,d,h)&&d!==h,N=b>=St||j,w=Cn(c,f+y,p+y);return N&&w}getCenterPoint(e){const{x:s,y:n,startAngle:o,endAngle:l,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,p=(o+l)/2,g=(c+d+f+h)/2;return{x:s+Math.cos(p)*g,y:n+Math.sin(p)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,o=(s.offset||0)/4,l=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>St?Math.floor(n/St):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*o,Math.sin(d)*o);const h=1-Math.sin(Math.min($e,n||0)),f=o*h;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,qP(e,this,f,l,c),YP(e,this,f,l,c),e.restore()}}function Ab(t,e,s=e){t.lineCap=Ee(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Ee(s.borderDash,e.borderDash)),t.lineDashOffset=Ee(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Ee(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ee(s.borderWidth,e.borderWidth),t.strokeStyle=Ee(s.borderColor,e.borderColor)}function GP(t,e,s){t.lineTo(s.x,s.y)}function QP(t){return t.stepped?k4:t.tension||t.cubicInterpolationMode==="monotone"?C4:GP}function Rb(t,e,s={}){const n=t.length,{start:o=0,end:l=n-1}=s,{start:c,end:d}=e,h=Math.max(o,c),f=Math.min(l,d),p=o<c&&l<c||o>d&&l>d;return{count:n,start:h,loop:e.loop,ilen:f<h&&!p?n+f-h:f-h}}function XP(t,e,s,n){const{points:o,options:l}=e,{count:c,start:d,loop:h,ilen:f}=Rb(o,s,n),p=QP(l);let{move:g=!0,reverse:y}=n||{},b,j,N;for(b=0;b<=f;++b)j=o[(d+(y?f-b:b))%c],!j.skip&&(g?(t.moveTo(j.x,j.y),g=!1):p(t,N,j,y,l.stepped),N=j);return h&&(j=o[(d+(y?f:0))%c],p(t,N,j,y,l.stepped)),!!h}function JP(t,e,s,n){const o=e.points,{count:l,start:c,ilen:d}=Rb(o,s,n),{move:h=!0,reverse:f}=n||{};let p=0,g=0,y,b,j,N,w,S;const _=O=>(c+(f?d-O:O))%l,T=()=>{N!==w&&(t.lineTo(p,w),t.lineTo(p,N),t.lineTo(p,S))};for(h&&(b=o[_(0)],t.moveTo(b.x,b.y)),y=0;y<=d;++y){if(b=o[_(y)],b.skip)continue;const O=b.x,E=b.y,$=O|0;$===j?(E<N?N=E:E>w&&(w=E),p=(g*p+O)/++g):(T(),t.lineTo(O,E),j=$,g=0,N=w=E),S=E}T()}function sh(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?JP:XP}function ZP(t){return t.stepped?i3:t.tension||t.cubicInterpolationMode==="monotone"?r3:si}function eM(t,e,s,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,s,n)&&o.closePath()),Ab(t,e.options),t.stroke(o)}function tM(t,e,s,n){const{segments:o,options:l}=e,c=sh(e);for(const d of o)Ab(t,l,d.style),t.beginPath(),c(t,e,d,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const sM=typeof Path2D=="function";function nM(t,e,s,n){sM&&!e.options.segment?eM(t,e,s,n):tM(t,e,s,n)}class lf extends tn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;Q4(this._points,n,e,o,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=f3(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,o=e[s],l=this.points,c=d3(this,{property:s,start:o,end:o});if(!c.length)return;const d=[],h=ZP(n);let f,p;for(f=0,p=c.length;f<p;++f){const{start:g,end:y}=c[f],b=l[g],j=l[y];if(b===j){d.push(b);continue}const N=Math.abs((o-b[s])/(j[s]-b[s])),w=h(b,j,N,n.stepped);w[s]=e[s],d.push(w)}return d.length===1?d[0]:d}pathSegment(e,s,n){return sh(this)(e,this,s,n)}path(e,s,n){const o=this.segments,l=sh(this);let c=this._loop;s=s||0,n=n||this.points.length-s;for(const d of o)c&=l(e,this,d,{start:s,end:s+n-1});return!!c}draw(e,s,n,o){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),nM(e,this,n,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function M0(t,e,s,n){const o=t.options,{[s]:l}=t.getProps([s],n);return Math.abs(e-l)<o.radius+o.hitRadius}class cf extends tn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.options,{x:l,y:c}=this.getProps(["x","y"],n);return Math.pow(e-l,2)+Math.pow(s-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,s){return M0(this,e,"x",s)}inYRange(e,s){return M0(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!_o(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Zu(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ib(t,e){const{x:s,y:n,base:o,width:l,height:c}=t.getProps(["x","y","base","width","height"],e);let d,h,f,p,g;return t.horizontal?(g=c/2,d=Math.min(s,o),h=Math.max(s,o),f=n-g,p=n+g):(g=l/2,d=s-g,h=s+g,f=Math.min(n,o),p=Math.max(n,o)),{left:d,top:f,right:h,bottom:p}}function Pn(t,e,s,n){return t?0:Ot(e,s,n)}function iM(t,e,s){const n=t.options.borderWidth,o=t.borderSkipped,l=fb(n);return{t:Pn(o.top,l.top,0,s),r:Pn(o.right,l.right,0,e),b:Pn(o.bottom,l.bottom,0,s),l:Pn(o.left,l.left,0,e)}}function rM(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,l=Gi(o),c=Math.min(e,s),d=t.borderSkipped,h=n||Le(o);return{topLeft:Pn(!h||d.top||d.left,l.topLeft,0,c),topRight:Pn(!h||d.top||d.right,l.topRight,0,c),bottomLeft:Pn(!h||d.bottom||d.left,l.bottomLeft,0,c),bottomRight:Pn(!h||d.bottom||d.right,l.bottomRight,0,c)}}function oM(t){const e=Ib(t),s=e.right-e.left,n=e.bottom-e.top,o=iM(t,s/2,n/2),l=rM(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:l},inner:{x:e.left+o.l,y:e.top+o.t,w:s-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,l.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(o.b,o.r))}}}}function cu(t,e,s,n){const o=e===null,l=s===null,d=t&&!(o&&l)&&Ib(t,n);return d&&(o||Cn(e,d.left,d.right))&&(l||Cn(s,d.top,d.bottom))}function aM(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function lM(t,e){t.rect(e.x,e.y,e.w,e.h)}function du(t,e,s={}){const n=t.x!==s.x?-e:0,o=t.y!==s.y?-e:0,l=(t.x+t.w!==s.x+s.w?e:0)-n,c=(t.y+t.h!==s.y+s.h?e:0)-o;return{x:t.x+n,y:t.y+o,w:t.w+l,h:t.h+c,radius:t.radius}}class cM extends tn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:o}}=this,{inner:l,outer:c}=oM(this),d=aM(c.radius)?Ml:lM;e.save(),(c.w!==l.w||c.h!==l.h)&&(e.beginPath(),d(e,du(c,s,l)),e.clip(),d(e,du(l,-s,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),d(e,du(l,s)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,s,n){return cu(this,e,s,n)}inXRange(e,s){return cu(this,e,null,s)}inYRange(e,s){return cu(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:o,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(s+o)/2:s,y:l?n:(n+o)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const T0=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},dM=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class E0 extends tn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ye(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,o)=>e.sort(n,o,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,o=Dt(n.font),l=o.size,c=this._computeTitleHeight(),{boxWidth:d,itemHeight:h}=T0(n,l);let f,p;s.font=o.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(c,l,d,h)+10):(p=this.maxHeight,f=this._fitCols(c,o,d,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,o){const{ctx:l,maxWidth:c,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],p=o+d;let g=e;l.textAlign="left",l.textBaseline="middle";let y=-1,b=-p;return this.legendItems.forEach((j,N)=>{const w=n+s/2+l.measureText(j.text).width;(N===0||f[f.length-1]+w+2*d>c)&&(g+=p,f[f.length-(N>0?0:1)]=0,b+=p,y++),h[N]={left:0,top:b,row:y,width:w,height:o},f[f.length-1]+=w+d}),g}_fitCols(e,s,n,o){const{ctx:l,maxHeight:c,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],p=c-e;let g=d,y=0,b=0,j=0,N=0;return this.legendItems.forEach((w,S)=>{const{itemWidth:_,itemHeight:T}=uM(n,s,l,w,o);S>0&&b+T+2*d>p&&(g+=y+d,f.push({width:y,height:b}),j+=y+d,N++,y=b=0),h[S]={left:j,top:b,col:N,width:_,height:T},y=Math.max(y,_),b+=T+d}),g+=y,f.push({width:y,height:b}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:o},rtl:l}}=this,c=Qi(l,this.left,this.width);if(this.isHorizontal()){let d=0,h=Mt(n,this.left+o,this.right-this.lineWidths[d]);for(const f of s)d!==f.row&&(d=f.row,h=Mt(n,this.left+o,this.right-this.lineWidths[d])),f.top+=this.top+e+o,f.left=c.leftForLtr(c.x(h),f.width),h+=f.width+o}else{let d=0,h=Mt(n,this.top+e+o,this.bottom-this.columnSizes[d].height);for(const f of s)f.col!==d&&(d=f.col,h=Mt(n,this.top+e+o,this.bottom-this.columnSizes[d].height)),f.top=h,f.left+=this.left+o,f.left=c.leftForLtr(c.x(f.left),f.width),h+=f.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Jh(e,this),this._draw(),Zh(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:o}=this,{align:l,labels:c}=e,d=at.color,h=Qi(e.rtl,this.left,this.width),f=Dt(c.font),{padding:p}=c,g=f.size,y=g/2;let b;this.drawTitle(),o.textAlign=h.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=f.string;const{boxWidth:j,boxHeight:N,itemHeight:w}=T0(c,g),S=function($,z,L){if(isNaN(j)||j<=0||isNaN(N)||N<0)return;o.save();const M=Ee(L.lineWidth,1);if(o.fillStyle=Ee(L.fillStyle,d),o.lineCap=Ee(L.lineCap,"butt"),o.lineDashOffset=Ee(L.lineDashOffset,0),o.lineJoin=Ee(L.lineJoin,"miter"),o.lineWidth=M,o.strokeStyle=Ee(L.strokeStyle,d),o.setLineDash(Ee(L.lineDash,[])),c.usePointStyle){const R={radius:N*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:M},Z=h.xPlus($,j/2),re=z+y;hb(o,R,Z,re,c.pointStyleWidth&&j)}else{const R=z+Math.max((g-N)/2,0),Z=h.leftForLtr($,j),re=Gi(L.borderRadius);o.beginPath(),Object.values(re).some(ee=>ee!==0)?Ml(o,{x:Z,y:R,w:j,h:N,radius:re}):o.rect(Z,R,j,N),o.fill(),M!==0&&o.stroke()}o.restore()},_=function($,z,L){Po(o,L.text,$,z+w/2,f,{strikethrough:L.hidden,textAlign:h.textAlign(L.textAlign)})},T=this.isHorizontal(),O=this._computeTitleHeight();T?b={x:Mt(l,this.left+p,this.right-n[0]),y:this.top+p+O,line:0}:b={x:this.left+p,y:Mt(l,this.top+O+p,this.bottom-s[0].height),line:0},vb(this.ctx,e.textDirection);const E=w+p;this.legendItems.forEach(($,z)=>{o.strokeStyle=$.fontColor,o.fillStyle=$.fontColor;const L=o.measureText($.text).width,M=h.textAlign($.textAlign||($.textAlign=c.textAlign)),R=j+y+L;let Z=b.x,re=b.y;h.setWidth(this.width),T?z>0&&Z+R+p>this.right&&(re=b.y+=E,b.line++,Z=b.x=Mt(l,this.left+p,this.right-n[b.line])):z>0&&re+E>this.bottom&&(Z=b.x=Z+s[b.line].width+p,b.line++,re=b.y=Mt(l,this.top+O+p,this.bottom-s[b.line].height));const ee=h.x(Z);if(S(ee,re,$),Z=h4(M,Z+j+y,T?Z+R:this.right,e.rtl),_(h.x(Z),re,$),T)b.x+=R+p;else if(typeof $.text!="string"){const de=f.lineHeight;b.y+=Lb($,de)+p}else b.y+=E}),bb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Dt(s.font),o=fs(s.padding);if(!s.display)return;const l=Qi(e.rtl,this.left,this.width),c=this.ctx,d=s.position,h=n.size/2,f=o.top+h;let p,g=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),p=this.top+f,g=Mt(e.align,g,this.right-y);else{const j=this.columnSizes.reduce((N,w)=>Math.max(N,w.height),0);p=f+Mt(e.align,this.top,this.bottom-j-e.labels.padding-this._computeTitleHeight())}const b=Mt(d,g,g+y);c.textAlign=l.textAlign(Qh(d)),c.textBaseline="middle",c.strokeStyle=s.color,c.fillStyle=s.color,c.font=n.string,Po(c,s.text,b,p,n)}_computeTitleHeight(){const e=this.options.title,s=Dt(e.font),n=fs(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,o,l;if(Cn(e,this.left,this.right)&&Cn(s,this.top,this.bottom)){for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(o=l[n],Cn(e,o.left,o.left+o.width)&&Cn(s,o.top,o.top+o.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!mM(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,l=dM(o,n);o&&!l&&Ye(s.onLeave,[e,o,this],this),this._hoveredItem=n,n&&!l&&Ye(s.onHover,[e,n,this],this)}else n&&Ye(s.onClick,[e,n,this],this)}}function uM(t,e,s,n,o){const l=hM(n,t,e,s),c=fM(o,n,e.lineHeight);return{itemWidth:l,itemHeight:c}}function hM(t,e,s,n){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((l,c)=>l.length>c.length?l:c)),e+s.size/2+n.measureText(o).width}function fM(t,e,s){let n=t;return typeof e.text!="string"&&(n=Lb(e,s)),n}function Lb(t,e){const s=t.text?t.text.length:0;return e*s}function mM(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var df={id:"legend",_element:E0,start(t,e,s){const n=t.legend=new E0({ctx:t.ctx,options:s,chart:t});ds.configure(t,n,s),ds.addBox(t,n)},stop(t){ds.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;ds.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,o=s.chart;o.isDatasetVisible(n)?(o.hide(n),e.hidden=!0):(o.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:o,color:l,useBorderRadius:c,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(s?0:void 0),p=fs(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:l,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:n||f.pointStyle,rotation:f.rotation,textAlign:o||f.textAlign,borderRadius:c&&(d||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Fb extends tn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const o=vt(n.text)?n.text.length:1;this._padding=fs(n.padding);const l=o*Dt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:o,right:l,options:c}=this,d=c.align;let h=0,f,p,g;return this.isHorizontal()?(p=Mt(d,n,l),g=s+e,f=l-n):(c.position==="left"?(p=n+e,g=Mt(d,o,s),h=$e*-.5):(p=l-e,g=Mt(d,s,o),h=$e*.5),f=o-s),{titleX:p,titleY:g,maxWidth:f,rotation:h}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Dt(s.font),l=n.lineHeight/2+this._padding.top,{titleX:c,titleY:d,maxWidth:h,rotation:f}=this._drawArgs(l);Po(e,s.text,0,0,n,{color:s.color,maxWidth:h,rotation:f,textAlign:Qh(s.align),textBaseline:"middle",translation:[c,d]})}}function pM(t,e){const s=new Fb({ctx:t.ctx,options:e,chart:t});ds.configure(t,s,e),ds.addBox(t,s),t.titleBlock=s}var gM={id:"title",_element:Fb,start(t,e,s){pM(t,s)},stop(t){const e=t.titleBlock;ds.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;ds.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ao={average(t){if(!t.length)return!1;let e,s,n=new Set,o=0,l=0;for(e=0,s=t.length;e<s;++e){const d=t[e].element;if(d&&d.hasValue()){const h=d.tooltipPosition();n.add(h.x),o+=h.y,++l}}return l===0||n.size===0?!1:{x:[...n].reduce((d,h)=>d+h)/n.size,y:o/l}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,o=Number.POSITIVE_INFINITY,l,c,d;for(l=0,c=t.length;l<c;++l){const h=t[l].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),p=Xu(e,f);p<o&&(o=p,d=h)}}if(d){const h=d.tooltipPosition();s=h.x,n=h.y}return{x:s,y:n}}};function Ds(t,e){return e&&(vt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ys(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xM(t,e){const{element:s,datasetIndex:n,index:o}=e,l=t.getDatasetMeta(n).controller,{label:c,value:d}=l.getLabelAndValue(o);return{chart:t,label:c,parsed:l.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:d,dataset:l.getDataset(),dataIndex:o,datasetIndex:n,element:s}}function O0(t,e){const s=t.chart.ctx,{body:n,footer:o,title:l}=t,{boxWidth:c,boxHeight:d}=e,h=Dt(e.bodyFont),f=Dt(e.titleFont),p=Dt(e.footerFont),g=l.length,y=o.length,b=n.length,j=fs(e.padding);let N=j.height,w=0,S=n.reduce((O,E)=>O+E.before.length+E.lines.length+E.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,g&&(N+=g*f.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),S){const O=e.displayColors?Math.max(d,h.lineHeight):h.lineHeight;N+=b*O+(S-b)*h.lineHeight+(S-1)*e.bodySpacing}y&&(N+=e.footerMarginTop+y*p.lineHeight+(y-1)*e.footerSpacing);let _=0;const T=function(O){w=Math.max(w,s.measureText(O).width+_)};return s.save(),s.font=f.string,ze(t.title,T),s.font=h.string,ze(t.beforeBody.concat(t.afterBody),T),_=e.displayColors?c+2+e.boxPadding:0,ze(n,O=>{ze(O.before,T),ze(O.lines,T),ze(O.after,T)}),_=0,s.font=p.string,ze(t.footer,T),s.restore(),w+=j.width,{width:w,height:N}}function yM(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function vM(t,e,s,n){const{x:o,width:l}=n,c=s.caretSize+s.caretPadding;if(t==="left"&&o+l+c>e.width||t==="right"&&o-l-c<0)return!0}function bM(t,e,s,n){const{x:o,width:l}=s,{width:c,chartArea:{left:d,right:h}}=t;let f="center";return n==="center"?f=o<=(d+h)/2?"left":"right":o<=l/2?f="left":o>=c-l/2&&(f="right"),vM(f,t,e,s)&&(f="center"),f}function D0(t,e,s){const n=s.yAlign||e.yAlign||yM(t,s);return{xAlign:s.xAlign||e.xAlign||bM(t,e,s,n),yAlign:n}}function wM(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function jM(t,e,s){let{y:n,height:o}=t;return e==="top"?n+=s:e==="bottom"?n-=o+s:n-=o/2,n}function A0(t,e,s,n){const{caretSize:o,caretPadding:l,cornerRadius:c}=t,{xAlign:d,yAlign:h}=s,f=o+l,{topLeft:p,topRight:g,bottomLeft:y,bottomRight:b}=Gi(c);let j=wM(e,d);const N=jM(e,h,f);return h==="center"?d==="left"?j+=f:d==="right"&&(j-=f):d==="left"?j-=Math.max(p,y)+o:d==="right"&&(j+=Math.max(g,b)+o),{x:Ot(j,0,n.width-e.width),y:Ot(N,0,n.height-e.height)}}function ol(t,e,s){const n=fs(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function R0(t){return Ds([],Ys(t))}function NM(t,e,s){return fi(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function I0(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Vb={beforeTitle:Hs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Hs,beforeBody:Hs,beforeLabel:Hs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return We(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Hs,afterBody:Hs,beforeFooter:Hs,footer:Hs,afterFooter:Hs};function Wt(t,e,s,n){const o=t[e].call(s,n);return typeof o>"u"?Vb[e].call(s,n):o}class L0 extends tn{static positioners=ao;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&s.options.animation&&n.animations,l=new jb(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=NM(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,o=Wt(n,"beforeTitle",this,e),l=Wt(n,"title",this,e),c=Wt(n,"afterTitle",this,e);let d=[];return d=Ds(d,Ys(o)),d=Ds(d,Ys(l)),d=Ds(d,Ys(c)),d}getBeforeBody(e,s){return R0(Wt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,o=[];return ze(e,l=>{const c={before:[],lines:[],after:[]},d=I0(n,l);Ds(c.before,Ys(Wt(d,"beforeLabel",this,l))),Ds(c.lines,Wt(d,"label",this,l)),Ds(c.after,Ys(Wt(d,"afterLabel",this,l))),o.push(c)}),o}getAfterBody(e,s){return R0(Wt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,o=Wt(n,"beforeFooter",this,e),l=Wt(n,"footer",this,e),c=Wt(n,"afterFooter",this,e);let d=[];return d=Ds(d,Ys(o)),d=Ds(d,Ys(l)),d=Ds(d,Ys(c)),d}_createItems(e){const s=this._active,n=this.chart.data,o=[],l=[],c=[];let d=[],h,f;for(h=0,f=s.length;h<f;++h)d.push(xM(this.chart,s[h]));return e.filter&&(d=d.filter((p,g,y)=>e.filter(p,g,y,n))),e.itemSort&&(d=d.sort((p,g)=>e.itemSort(p,g,n))),ze(d,p=>{const g=I0(e.callbacks,p);o.push(Wt(g,"labelColor",this,p)),l.push(Wt(g,"labelPointStyle",this,p)),c.push(Wt(g,"labelTextColor",this,p))}),this.labelColors=o,this.labelPointStyles=l,this.labelTextColors=c,this.dataPoints=d,d}update(e,s){const n=this.options.setContext(this.getContext()),o=this._active;let l,c=[];if(!o.length)this.opacity!==0&&(l={opacity:0});else{const d=ao[n.position].call(this,o,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const h=this._size=O0(this,n),f=Object.assign({},d,h),p=D0(this.chart,n,f),g=A0(n,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,l={opacity:1,x:g.x,y:g.y,width:h.width,height:h.height,caretX:d.x,caretY:d.y}}this._tooltipItems=c,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,o){const l=this.getCaretPosition(e,n,o);s.lineTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineTo(l.x3,l.y3)}getCaretPosition(e,s,n){const{xAlign:o,yAlign:l}=this,{caretSize:c,cornerRadius:d}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=Gi(d),{x:y,y:b}=e,{width:j,height:N}=s;let w,S,_,T,O,E;return l==="center"?(O=b+N/2,o==="left"?(w=y,S=w-c,T=O+c,E=O-c):(w=y+j,S=w+c,T=O-c,E=O+c),_=w):(o==="left"?S=y+Math.max(h,p)+c:o==="right"?S=y+j-Math.max(f,g)-c:S=this.caretX,l==="top"?(T=b,O=T-c,w=S-c,_=S+c):(T=b+N,O=T+c,w=S+c,_=S-c),E=T),{x1:w,x2:S,x3:_,y1:T,y2:O,y3:E}}drawTitle(e,s,n){const o=this.title,l=o.length;let c,d,h;if(l){const f=Qi(n.rtl,this.x,this.width);for(e.x=ol(this,n.titleAlign,n),s.textAlign=f.textAlign(n.titleAlign),s.textBaseline="middle",c=Dt(n.titleFont),d=n.titleSpacing,s.fillStyle=n.titleColor,s.font=c.string,h=0;h<l;++h)s.fillText(o[h],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+d,h+1===l&&(e.y+=n.titleMarginBottom-d)}}_drawColorBox(e,s,n,o,l){const c=this.labelColors[n],d=this.labelPointStyles[n],{boxHeight:h,boxWidth:f}=l,p=Dt(l.bodyFont),g=ol(this,"left",l),y=o.x(g),b=h<p.lineHeight?(p.lineHeight-h)/2:0,j=s.y+b;if(l.usePointStyle){const N={radius:Math.min(f,h)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},w=o.leftForLtr(y,f)+f/2,S=j+h/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,Zu(e,N,w,S),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,Zu(e,N,w,S)}else{e.lineWidth=Le(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const N=o.leftForLtr(y,f),w=o.leftForLtr(o.xPlus(y,1),f-2),S=Gi(c.borderRadius);Object.values(S).some(_=>_!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,Ml(e,{x:N,y:j,w:f,h,radius:S}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),Ml(e,{x:w,y:j+1,w:f-2,h:h-2,radius:S}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(N,j,f,h),e.strokeRect(N,j,f,h),e.fillStyle=c.backgroundColor,e.fillRect(w,j+1,f-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:o}=this,{bodySpacing:l,bodyAlign:c,displayColors:d,boxHeight:h,boxWidth:f,boxPadding:p}=n,g=Dt(n.bodyFont);let y=g.lineHeight,b=0;const j=Qi(n.rtl,this.x,this.width),N=function(L){s.fillText(L,j.x(e.x+b),e.y+y/2),e.y+=y+l},w=j.textAlign(c);let S,_,T,O,E,$,z;for(s.textAlign=c,s.textBaseline="middle",s.font=g.string,e.x=ol(this,w,n),s.fillStyle=n.bodyColor,ze(this.beforeBody,N),b=d&&w!=="right"?c==="center"?f/2+p:f+2+p:0,O=0,$=o.length;O<$;++O){for(S=o[O],_=this.labelTextColors[O],s.fillStyle=_,ze(S.before,N),T=S.lines,d&&T.length&&(this._drawColorBox(s,e,O,j,n),y=Math.max(g.lineHeight,h)),E=0,z=T.length;E<z;++E)N(T[E]),y=g.lineHeight;ze(S.after,N)}b=0,y=g.lineHeight,ze(this.afterBody,N),e.y-=l}drawFooter(e,s,n){const o=this.footer,l=o.length;let c,d;if(l){const h=Qi(n.rtl,this.x,this.width);for(e.x=ol(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=h.textAlign(n.footerAlign),s.textBaseline="middle",c=Dt(n.footerFont),s.fillStyle=n.footerColor,s.font=c.string,d=0;d<l;++d)s.fillText(o[d],h.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,s,n,o){const{xAlign:l,yAlign:c}=this,{x:d,y:h}=e,{width:f,height:p}=n,{topLeft:g,topRight:y,bottomLeft:b,bottomRight:j}=Gi(o.cornerRadius);s.fillStyle=o.backgroundColor,s.strokeStyle=o.borderColor,s.lineWidth=o.borderWidth,s.beginPath(),s.moveTo(d+g,h),c==="top"&&this.drawCaret(e,s,n,o),s.lineTo(d+f-y,h),s.quadraticCurveTo(d+f,h,d+f,h+y),c==="center"&&l==="right"&&this.drawCaret(e,s,n,o),s.lineTo(d+f,h+p-j),s.quadraticCurveTo(d+f,h+p,d+f-j,h+p),c==="bottom"&&this.drawCaret(e,s,n,o),s.lineTo(d+b,h+p),s.quadraticCurveTo(d,h+p,d,h+p-b),c==="center"&&l==="left"&&this.drawCaret(e,s,n,o),s.lineTo(d,h+g),s.quadraticCurveTo(d,h,d+g,h),s.closePath(),s.fill(),o.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,o=n&&n.x,l=n&&n.y;if(o||l){const c=ao[e.position].call(this,this._active,this._eventPosition);if(!c)return;const d=this._size=O0(this,e),h=Object.assign({},c,this._size),f=D0(s,e,h),p=A0(e,h,f,s);(o._to!==p.x||l._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=d.width,this.height=d.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const o={width:this.width,height:this.height},l={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=fs(s.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&d&&(e.save(),e.globalAlpha=n,this.drawBackground(l,e,o,s),vb(e,s.textDirection),l.y+=c.top,this.drawTitle(l,e,s),this.drawBody(l,e,s),this.drawFooter(l,e,s),bb(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,o=e.map(({datasetIndex:d,index:h})=>{const f=this.chart.getDatasetMeta(d);if(!f)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:f.data[h],index:h}}),l=!Sl(n,o),c=this._positionChanged(o,s);(l||c)&&(this._active=o,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,l=this._active||[],c=this._getActiveElements(e,l,s,n),d=this._positionChanged(c,e),h=s||!Sl(c,l)||d;return h&&(this._active=c,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),h}_getActiveElements(e,s,n,o){const l=this.options;if(e.type==="mouseout")return[];if(!o)return s.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,l.mode,l,n);return l.reverse&&c.reverse(),c}_positionChanged(e,s){const{caretX:n,caretY:o,options:l}=this,c=ao[l.position].call(this,e,s);return c!==!1&&(n!==c.x||o!==c.y)}}var uf={id:"tooltip",_element:L0,positioners:ao,afterInit(t,e,s){s&&(t.tooltip=new L0({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Vb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SM=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function kM(t,e,s,n){const o=t.indexOf(e);if(o===-1)return SM(t,e,s,n);const l=t.lastIndexOf(e);return o!==l?s:o}const CM=(t,e)=>t===null?null:Ot(Math.round(t),0,e);function F0(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class hf extends dr{static id="category";static defaults={ticks:{callback:F0}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:o,label:l}of s)n[o]===l&&n.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(We(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:kM(n,e,Ee(s,e),this._addedLabels),CM(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,o=[];let l=this.getLabels();l=e===0&&s===l.length-1?l:l.slice(e,s+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=s;c++)o.push({value:c});return o}getLabelForValue(e){return F0.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _M(t,e){const s=[],{bounds:o,step:l,min:c,max:d,precision:h,count:f,maxTicks:p,maxDigits:g,includeBounds:y}=t,b=l||1,j=p-1,{min:N,max:w}=e,S=!We(c),_=!We(d),T=!We(f),O=(w-N)/(g+1);let E=$x((w-N)/j/b)*b,$,z,L,M;if(E<1e-14&&!S&&!_)return[{value:N},{value:w}];M=Math.ceil(w/E)-Math.floor(N/E),M>j&&(E=$x(M*E/j/b)*b),We(h)||($=Math.pow(10,h),E=Math.ceil(E*$)/$),o==="ticks"?(z=Math.floor(N/E)*E,L=Math.ceil(w/E)*E):(z=N,L=w),S&&_&&l&&s4((d-c)/l,E/1e3)?(M=Math.round(Math.min((d-c)/E,p)),E=(d-c)/M,z=c,L=d):T?(z=S?c:z,L=_?d:L,M=f-1,E=(L-z)/M):(M=(L-z)/E,mo(M,Math.round(M),E/1e3)?M=Math.round(M):M=Math.ceil(M));const R=Math.max(Ux(E),Ux(z));$=Math.pow(10,We(h)?R:h),z=Math.round(z*$)/$,L=Math.round(L*$)/$;let Z=0;for(S&&(y&&z!==c?(s.push({value:c}),z<c&&Z++,mo(Math.round((z+Z*E)*$)/$,c,V0(c,O,t))&&Z++):z<c&&Z++);Z<M;++Z){const re=Math.round((z+Z*E)*$)/$;if(_&&re>d)break;s.push({value:re})}return _&&y&&L!==d?s.length&&mo(s[s.length-1].value,d,V0(d,O,t))?s[s.length-1].value=d:s.push({value:d}):(!_||L===d)&&s.push({value:L}),s}function V0(t,e,{horizontal:s,minRotation:n}){const o=ri(n),l=(s?Math.sin(o):Math.cos(o))||.001,c=.75*e*(""+t).length;return Math.min(e/l,c)}class PM extends dr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return We(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:o,max:l}=this;const c=h=>o=s?o:h,d=h=>l=n?l:h;if(e){const h=tr(o),f=tr(l);h<0&&f<0?d(0):h>0&&f>0&&c(0)}if(o===l){let h=l===0?1:Math.abs(l*.05);d(l+h),e||c(o-h)}this.min=o,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),s=s||11),s&&(o=Math.min(s,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},l=this._range||this,c=_M(o,l);return e.bounds==="ticks"&&n4(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const o=(n-s)/Math.max(e.length-1,1)/2;s-=o,n+=o}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return db(e,this.chart.options.locale,this.options.ticks.format)}}class ff extends PM{static id="linear";static defaults={ticks:{callback:ub.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=hs(e)?e:0,this.max=hs(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=ri(this.options.ticks.minRotation),o=(e?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,l.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ul={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ht=Object.keys(Ul);function z0(t,e){return t-e}function B0(t,e){if(We(e))return null;const s=t._adapter,{parser:n,round:o,isoWeekday:l}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),hs(c)||(c=typeof n=="string"?s.parse(c,n):s.parse(c)),c===null?null:(o&&(c=o==="week"&&(Co(l)||l===!0)?s.startOf(c,"isoWeek",l):s.startOf(c,o)),+c)}function $0(t,e,s,n){const o=Ht.length;for(let l=Ht.indexOf(t);l<o-1;++l){const c=Ul[Ht[l]],d=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((s-e)/(d*c.size))<=n)return Ht[l]}return Ht[o-1]}function MM(t,e,s,n,o){for(let l=Ht.length-1;l>=Ht.indexOf(s);l--){const c=Ht[l];if(Ul[c].common&&t._adapter.diff(o,n,c)>=e-1)return c}return Ht[s?Ht.indexOf(s):0]}function TM(t){for(let e=Ht.indexOf(t)+1,s=Ht.length;e<s;++e)if(Ul[Ht[e]].common)return Ht[e]}function U0(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:o}=Gh(s,e),l=s[n]>=e?s[n]:s[o];t[l]=!0}}function EM(t,e,s,n){const o=t._adapter,l=+o.startOf(e[0].value,n),c=e[e.length-1].value;let d,h;for(d=l;d<=c;d=+o.add(d,1,n))h=s[d],h>=0&&(e[h].major=!0);return e}function W0(t,e,s){const n=[],o={},l=e.length;let c,d;for(c=0;c<l;++c)d=e[c],o[d]=c,n.push({value:d,major:!1});return l===0||!s?n:EM(t,n,o,s)}class H0 extends dr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),o=this._adapter=new D3._date(e.adapters.date);o.init(s),fo(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:B0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:o,max:l,minDefined:c,maxDefined:d}=this.getUserBounds();function h(f){!c&&!isNaN(f.min)&&(o=Math.min(o,f.min)),!d&&!isNaN(f.max)&&(l=Math.max(l,f.max))}(!c||!d)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),o=hs(o)&&!isNaN(o)?o:+s.startOf(Date.now(),n),l=hs(l)&&!isNaN(l)?l:+s.endOf(Date.now(),n)+1,this.min=Math.min(o,l-1),this.max=Math.max(o+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,o=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const l=this.min,c=this.max,d=l4(o,l,c);return this._unit=s.unit||(n.autoSkip?$0(s.minUnit,this.min,this.max,this._getLabelCapacity(l)):MM(this,d.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:TM(this._unit),this.initOffsets(o),e.reverse&&d.reverse(),W0(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,o,l;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?s=1-o:s=(this.getDecimalForValue(e[1])-o)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?n=l:n=(l-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;s=Ot(s,0,c),n=Ot(n,0,c),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,o=this.options,l=o.time,c=l.unit||$0(l.minUnit,s,n,this._getLabelCapacity(s)),d=Ee(o.ticks.stepSize,1),h=c==="week"?l.isoWeekday:!1,f=Co(h)||h===!0,p={};let g=s,y,b;if(f&&(g=+e.startOf(g,"isoWeek",h)),g=+e.startOf(g,f?"day":c),e.diff(n,s,c)>1e5*d)throw new Error(s+" and "+n+" are too far apart with stepSize of "+d+" "+c);const j=o.ticks.source==="data"&&this.getDataTimestamps();for(y=g,b=0;y<n;y=+e.add(y,d,c),b++)U0(p,y,j);return(y===n||o.bounds==="ticks"||b===1)&&U0(p,y,j),Object.keys(p).sort(z0).map(N=>+N)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const o=this.options.time.displayFormats,l=this._unit,c=s||o[l];return this._adapter.format(e,c)}_tickFormatFunction(e,s,n,o){const l=this.options,c=l.ticks.callback;if(c)return Ye(c,[e,s,n],this);const d=l.time.displayFormats,h=this._unit,f=this._majorUnit,p=h&&d[h],g=f&&d[f],y=n[s],b=f&&g&&y&&y.major;return this._adapter.format(e,o||(b?g:p))}generateTickLabels(e){let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s],o.label=this._tickFormatFunction(o.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,o=ri(this.isHorizontal()?s.maxRotation:s.minRotation),l=Math.cos(o),c=Math.sin(o),d=this._resolveTickFontOptions(0).size;return{w:n*l+d*c,h:n*c+d*l}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,o=n[s.unit]||n.millisecond,l=this._tickFormatFunction(e,0,W0(this,[e],this._majorUnit),o),c=this._getLabelSize(l),d=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(s=0,n=o.length;s<n;++s)e=e.concat(o[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const o=this.getLabels();for(s=0,n=o.length;s<n;++s)e.push(B0(this,o[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return d4(e.sort(z0))}}function al(t,e,s){let n=0,o=t.length-1,l,c,d,h;s?(e>=t[n].pos&&e<=t[o].pos&&({lo:n,hi:o}=oi(t,"pos",e)),{pos:l,time:d}=t[n],{pos:c,time:h}=t[o]):(e>=t[n].time&&e<=t[o].time&&({lo:n,hi:o}=oi(t,"time",e)),{time:l,pos:d}=t[n],{time:c,pos:h}=t[o]);const f=c-l;return f?d+(h-d)*(e-l)/f:d}class OE extends H0{static id="timeseries";static defaults=H0.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=al(s,this.min),this._tableRange=al(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,o=[],l=[];let c,d,h,f,p;for(c=0,d=e.length;c<d;++c)f=e[c],f>=s&&f<=n&&o.push(f);if(o.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(c=0,d=o.length;c<d;++c)p=o[c+1],h=o[c-1],f=o[c],Math.round((p+h)/2)!==f&&l.push({time:f,pos:c/(d-1)});return l}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((o,l)=>o-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(al(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return al(this._table,n*this._tableRange+this._minPos,!0)}}const zb="label";function q0(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function OM(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Bb(t,e){t.labels=e}function $b(t,e,s=zb){const n=[];t.datasets=e.map(o=>{const l=t.datasets.find(c=>c[s]===o[s]);return!l||!o.data||n.includes(l)?{...o}:(n.push(l),Object.assign(l,o),l)})}function DM(t,e=zb){const s={labels:[],datasets:[]};return Bb(s,t.labels),$b(s,t.datasets,e),s}function AM(t,e){const{height:s=150,width:n=300,redraw:o=!1,datasetIdKey:l,type:c,data:d,options:h,plugins:f=[],fallbackContent:p,updateMode:g,...y}=t,b=C.useRef(null),j=C.useRef(null),N=()=>{b.current&&(j.current=new ur(b.current,{type:c,data:DM(d,l),options:h&&{...h},plugins:f}),q0(e,j.current))},w=()=>{q0(e,null),j.current&&(j.current.destroy(),j.current=null)};return C.useEffect(()=>{!o&&j.current&&h&&OM(j.current,h)},[o,h]),C.useEffect(()=>{!o&&j.current&&Bb(j.current.config.data,d.labels)},[o,d.labels]),C.useEffect(()=>{!o&&j.current&&d.datasets&&$b(j.current.config.data,d.datasets,l)},[o,d.datasets]),C.useEffect(()=>{j.current&&(o?(w(),setTimeout(N)):j.current.update(g))},[o,h,d.labels,d.datasets,g]),C.useEffect(()=>{j.current&&(w(),setTimeout(N))},[c]),C.useEffect(()=>(N(),()=>w()),[]),r.jsx("canvas",{ref:b,role:"img",height:s,width:n,...y,children:p})}const RM=C.forwardRef(AM);function IM(t,e){return ur.register(e),C.forwardRef((s,n)=>r.jsx(RM,{...s,ref:n,type:t}))}const Ub=IM("line",O3);ur.register(hf,ff,cf,lf,uf,df,gM);function LM(t=7){const e=new Date;return Array.from({length:t}).map((s,n)=>{const o=new Date(e);return o.setDate(e.getDate()-(t-1-n)),{date:o.toLocaleDateString(),revenue:Math.floor(Math.random()*2e3)+200,orders:Math.floor(Math.random()*40)+5}})}function FM(){const[t,e]=te.useState({start:"",end:""}),[s,n]=te.useState(()=>LM(14)),l={labels:s.map(d=>d.date),datasets:[{label:"Revenue",data:s.map(d=>d.revenue),borderColor:"#60a5fa",backgroundColor:"#60a5fa33",tension:.3},{label:"Orders",data:s.map(d=>d.orders),borderColor:"#34d399",backgroundColor:"#34d39933",tension:.3}]},c=s.reduce((d,h)=>(d.revenue+=h.revenue,d.orders+=h.orders,d),{revenue:0,orders:0});return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold",children:"Revenue & Stats"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"date",value:t.start,onChange:d=>e(h=>({...h,start:d.target.value})),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{type:"date",value:t.end,onChange:d=>e(h=>({...h,end:d.target.value})),className:"px-2 py-1 bg-slate-700 rounded"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[r.jsxs("div",{className:"p-3 bg-slate-900 rounded",children:["Total Revenue",r.jsx("br",{}),r.jsxs("strong",{children:["$",c.revenue]})]}),r.jsxs("div",{className:"p-3 bg-slate-900 rounded",children:["Total Orders",r.jsx("br",{}),r.jsx("strong",{children:c.orders})]}),r.jsxs("div",{className:"p-3 bg-slate-900 rounded",children:["Active Customers",r.jsx("br",{}),r.jsx("strong",{children:Math.floor(Math.random()*300)+20})]})]}),r.jsx("div",{className:"h-48",children:r.jsx(Ub,{data:l,options:{responsive:!0,maintainAspectRatio:!1}})})]})}function Y0(){return[{id:1,user:"Ali",text:"Great service!",approved:!1},{id:2,user:"Sara",text:"Package damaged",approved:!1},{id:3,user:"Omar",text:"Fast delivery",approved:!0}]}function VM(){function t(){try{return JSON.parse(localStorage.getItem("STORE_OPEN"))??!0}catch{return!0}}function e(){try{return JSON.parse(localStorage.getItem("REVIEWS"))||Y0()}catch{return Y0()}}const[s,n]=te.useState(t),[o,l]=te.useState(e);te.useEffect(()=>{try{localStorage.setItem("STORE_OPEN",JSON.stringify(s))}catch{}},[s]),te.useEffect(()=>{try{localStorage.setItem("REVIEWS",JSON.stringify(o))}catch{}},[o]);function c(h){l(f=>f.map(p=>p.id===h?{...p,approved:!0}:p))}function d(h){confirm("Delete review?")&&l(f=>f.filter(p=>p.id!==h))}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold",children:"Store Management"}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:s,onChange:h=>n(h.target.checked)})," Open"]})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm mb-2",children:"Review Moderation"}),o.length===0?r.jsx("div",{className:"text-slate-400",children:"No reviews"}):r.jsx("ul",{className:"space-y-2",children:o.map(h=>r.jsxs("li",{className:"bg-slate-700 p-2 rounded flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[h.user," ",h.approved?r.jsx("span",{className:"text-xs text-green-400",children:"(approved)"}):null]}),r.jsx("div",{className:"text-sm text-slate-300",children:h.text})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[!h.approved&&r.jsx("button",{onClick:()=>c(h.id),className:"px-2 py-1 bg-indigo-600 rounded text-xs",children:"Approve"}),r.jsx("button",{onClick:()=>d(h.id),className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Delete"})]})]},h.id))})]})]})}function zM({message:t="No data found"}){return r.jsx("div",{className:"flex items-center justify-center p-6 text-slate-400",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",className:"mx-auto mb-2",children:[r.jsx("path",{d:"M3 6h18",stroke:"#94a3b8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M8 6v11a3 3 0 003 3h2a3 3 0 003-3V6",stroke:"#94a3b8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.jsx("div",{className:"text-sm",children:t})]})})}const uu="GEOFENCES";function BM(){function t(){try{return JSON.parse(localStorage.getItem(uu)||"[]")}catch{return[]}}const[e,s]=te.useState(t),[n,o]=te.useState(""),[l,c]=te.useState(""),[d,h]=te.useState(""),[f,p]=te.useState(3e3),[g,y]=te.useState(0);function b(){if(!n||!l||!d)return alert("Enter name and coords");const w=[{id:Date.now(),name:n,center:{lat:Number(l),lng:Number(d)},radius:Number(f),price:Number(g)},...e];s(w);try{localStorage.setItem(uu,JSON.stringify(w))}catch{}o(""),c(""),h(""),p(3e3),y(0)}function j(N){if(!confirm("Remove zone?"))return;const w=e.filter(S=>S.id!==N);s(w);try{localStorage.setItem(uu,JSON.stringify(w))}catch{}}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Geofencing & Delivery Pricing"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsx("input",{placeholder:"Zone name",value:n,onChange:N=>o(N.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{placeholder:"Price",type:"number",value:g,onChange:N=>y(N.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{placeholder:"Latitude",value:l,onChange:N=>c(N.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{placeholder:"Longitude",value:d,onChange:N=>h(N.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{placeholder:"Radius (m)",type:"number",value:f,onChange:N=>p(N.target.value),className:"px-2 py-1 bg-slate-700 rounded col-span-2"}),r.jsx("button",{onClick:b,className:"px-3 py-1 bg-indigo-600 rounded col-span-2",children:"Add Zone"})]}),r.jsx("div",{children:e.length===0?r.jsx("div",{className:"text-slate-400",children:"No zones defined"}):r.jsx("ul",{className:"space-y-2",children:e.map(N=>r.jsxs("li",{className:"bg-slate-700 p-2 rounded flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[N.name,"  $",N.price]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Center: ",N.center.lat,",",N.center.lng,"  Radius: ",N.radius,"m"]})]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>j(N.id),className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Delete"})})]},N.id))})})]})}const hu="WALLETS";function $M(){function t(){try{return JSON.parse(localStorage.getItem(hu)||"{}")}catch{return{drivers:{},stores:{}}}}const[e,s]=te.useState(t),[n,o]=te.useState("driver"),[l,c]=te.useState(""),[d,h]=te.useState(0);function f(){if(!l)return alert("Enter id");const g=JSON.parse(JSON.stringify(e||{drivers:{},stores:{}})),y=n==="driver"?"drivers":"stores";g[y]=g[y]||{},g[y][l]=(g[y][l]||0)+Number(d),s(g);try{localStorage.setItem(hu,JSON.stringify(g))}catch{}c(""),h(0)}function p(){if(!confirm("Reset all wallets?"))return;const g={drivers:{},stores:{}};s(g);try{localStorage.setItem(hu,JSON.stringify(g))}catch{}}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Wallets (Driver cash / Store payouts)"}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("select",{value:n,onChange:g=>o(g.target.value),className:"px-2 py-1 bg-slate-700 rounded",children:[r.jsx("option",{value:"driver",children:"Driver"}),r.jsx("option",{value:"store",children:"Store"})]}),r.jsx("input",{placeholder:"ID",value:l,onChange:g=>c(g.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{placeholder:"Amount (+/-)",type:"number",value:d,onChange:g=>h(Number(g.target.value)),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("button",{onClick:f,className:"px-3 py-1 bg-indigo-600 rounded",children:"Adjust"})]}),r.jsx("div",{className:"mb-3",children:r.jsx("button",{onClick:p,className:"px-3 py-1 bg-red-600 rounded",children:"Reset Wallets"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm mb-2",children:"Drivers"}),r.jsx("ul",{className:"space-y-1 mb-3",children:Object.entries(e.drivers||{}).length===0?r.jsx("li",{className:"text-slate-400",children:"No driver balances"}):Object.entries(e.drivers||{}).map(([g,y])=>r.jsxs("li",{className:"flex justify-between bg-slate-700 p-2 rounded",children:[r.jsx("span",{children:g}),r.jsxs("span",{children:["$",y.toFixed(2)]})]},g))}),r.jsx("h4",{className:"text-sm mb-2",children:"Stores"}),r.jsx("ul",{className:"space-y-1",children:Object.entries(e.stores||{}).length===0?r.jsx("li",{className:"text-slate-400",children:"No store balances"}):Object.entries(e.stores||{}).map(([g,y])=>r.jsxs("li",{className:"flex justify-between bg-slate-700 p-2 rounded",children:[r.jsx("span",{children:g}),r.jsxs("span",{children:["$",y.toFixed(2)]})]},g))})]})]})}function UM(t,e){const s=p=>p*Math.PI/180,o=s(t.lat),l=s(e.lat),c=s(e.lat-t.lat),d=s(e.lng-t.lng),h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}function WM({orders:t=[],drivers:e=[]}){const[s,n]=te.useState([]);function o(){const l=[];t.forEach(c=>{if(!c.lat||!c.lng)return;let d=null;e.forEach(h=>{if(!h.lat||!h.lng)return;const f=UM({lat:c.lat,lng:c.lng},{lat:h.lat,lng:h.lng});(d===null||f<d.dist)&&(d={driver:h,dist:f})}),d&&l.push({orderId:c.id,driverId:d.driver.id,distance:Math.round(d.dist)})}),n(l)}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Auto-Assignment (Nearest Driver)"}),r.jsx("div",{className:"mb-3",children:r.jsx("button",{onClick:o,className:"px-3 py-1 bg-indigo-600 rounded",children:"Assign Nearest"})}),r.jsx("div",{children:s.length===0?r.jsx("div",{className:"text-slate-400",children:"No assignments yet"}):r.jsx("ul",{className:"space-y-2",children:s.map(l=>r.jsxs("li",{className:"bg-slate-700 p-2 rounded flex justify-between",children:[r.jsxs("div",{children:["Order #",l.orderId,"  Driver ",l.driverId]}),r.jsxs("div",{className:"text-slate-400",children:[l.distance," m"]})]},l.orderId))})})]})}const fu="AUDIT_LOGS";function HM(){function t(){try{return JSON.parse(localStorage.getItem(fu)||"[]")}catch{return[]}}const[e,s]=te.useState(t);te.useEffect(()=>{const o=setInterval(()=>{try{s(JSON.parse(localStorage.getItem(fu)||"[]"))}catch{}},2e3);return()=>clearInterval(o)},[]);function n(){confirm("Clear logs?")&&(localStorage.setItem(fu,"[]"),s([]))}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold",children:"Audit Logs"}),r.jsx("button",{onClick:n,className:"px-2 py-1 bg-red-600 rounded",children:"Clear"})]}),r.jsx("div",{className:"max-h-60 overflow-auto",children:e.length===0?r.jsx("div",{className:"text-slate-400",children:"No logs yet"}):r.jsx("ul",{className:"space-y-2 text-sm",children:e.map(o=>r.jsxs("li",{className:"bg-slate-700 p-2 rounded",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{children:o.action}),r.jsx("div",{className:"text-slate-400",children:new Date(o.ts).toLocaleString()})]}),r.jsx("div",{className:"text-slate-400 text-xs mt-1",children:JSON.stringify(o.details)})]},o.id))})})]})}const mu="BANNERS";function qM(){function t(){try{return JSON.parse(localStorage.getItem(mu)||"[]")}catch{return[]}}const[e,s]=te.useState(t),[n,o]=te.useState(""),[l,c]=te.useState(""),[d,h]=te.useState(""),[f,p]=te.useState("");function g(){if(!n)return alert("Enter image url");const j=[{id:Date.now(),image:n,title:l,start:d||null,end:f||null},...e];s(j);try{localStorage.setItem(mu,JSON.stringify(j))}catch{}o(""),c(""),h(""),p("")}function y(b){if(!confirm("Remove banner?"))return;const j=e.filter(N=>N.id!==b);s(j);try{localStorage.setItem(mu,JSON.stringify(j))}catch{}}return r.jsxs("div",{className:"rounded bg-slate-800 p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Banner Manager"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsx("input",{placeholder:"Image URL",value:n,onChange:b=>o(b.target.value),className:"px-2 py-1 bg-slate-700 rounded col-span-2"}),r.jsx("input",{placeholder:"Title",value:l,onChange:b=>c(b.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{type:"date",value:d,onChange:b=>h(b.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("input",{type:"date",value:f,onChange:b=>p(b.target.value),className:"px-2 py-1 bg-slate-700 rounded"}),r.jsx("button",{onClick:g,className:"px-3 py-1 bg-indigo-600 rounded col-span-2",children:"Add Banner"})]}),r.jsx("div",{className:"space-y-2",children:e.length===0?r.jsx("div",{className:"text-slate-400",children:"No banners"}):e.map(b=>r.jsxs("div",{className:"bg-slate-700 p-2 rounded flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:b.image,alt:b.title,className:"w-20 h-12 object-cover rounded"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:b.title||""}),r.jsxs("div",{className:"text-xs text-slate-400",children:[b.start||"","  ",b.end||""]})]})]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>y(b.id),className:"px-2 py-1 bg-red-600 rounded text-xs",children:"Delete"})})]},b.id))})]})}const Wb=te.createContext(null);function YM({children:t}){const[e,s]=te.useState(()=>{try{return localStorage.getItem("APP_DIR")||"ltr"}catch{return"ltr"}});te.useEffect(()=>{try{localStorage.setItem("APP_DIR",e)}catch{}document.documentElement.dir=e},[e]);const n=()=>s(o=>o==="ltr"?"rtl":"ltr");return r.jsx(Wb.Provider,{value:{dir:e,toggle:n},children:t})}function KM(){const t=te.useContext(Wb);if(!t)throw new Error("useLocale must be used within LocaleProvider");return t}ur.register(hf,ff,cf,lf,cM,KP,uf,df);function GM(){const t=Pe(),{dir:e,toggle:s}=KM(),[n,o]=te.useState(()=>Bh()),[l,c]=te.useState(()=>Ae()),[d]=te.useState(()=>mt()),[h]=te.useState(()=>Oe());te.useEffect(()=>{const p=Cs(g=>{g.type==="tick"?(o({...g.stats}),c([...g.orders])):g.type==="order"&&(o({...g.stats}),c(y=>[g.order,...y]))});return()=>p()},[]);const f=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:" ",to:"/admin/offers"},{label:"Create",to:"/admin/create-store"}];return r.jsxs(tt,{sideItems:f,children:[r.jsxs("div",{className:"flex items-center justify-end gap-3 mb-4",children:[r.jsx(y_,{}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("small",{className:"text-slate-400",children:"RTL"}),r.jsx("button",{onClick:()=>s(),className:"px-2 py-1 bg-slate-700 rounded",children:e==="ltr"?"EN":""})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("button",{onClick:()=>t("/admin/orders"),className:"p-4 bg-slate-800 rounded text-left hover:bg-slate-700 transition cursor-pointer",children:[" ",r.jsx("br",{}),r.jsx("strong",{children:n.totalOrders})]}),r.jsxs("button",{onClick:()=>t("/admin/revenue"),className:"p-4 bg-slate-800 rounded text-left hover:bg-slate-700 transition cursor-pointer",children:[" ",r.jsx("br",{}),r.jsxs("strong",{children:["$",n&&n.totalRevenue?Number(n.totalRevenue).toFixed(2):"0.00"]})]}),r.jsxs("button",{onClick:()=>t("/admin/users"),className:"p-4 bg-slate-800 rounded text-left hover:bg-slate-700 transition cursor-pointer",children:[" ",r.jsx("br",{}),r.jsx("strong",{children:n.activeUsers})]}),r.jsxs("button",{onClick:()=>t("/admin/products"),className:"p-4 bg-slate-800 rounded text-left hover:bg-slate-700 transition cursor-pointer",children:[" ",r.jsx("br",{}),r.jsx("strong",{children:n.activeStores})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(FM,{}),r.jsx("div",{className:"mt-4",children:r.jsx(j_,{})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(b_,{}),r.jsx(VM,{})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"col-span-1",children:r.jsx(BM,{})}),r.jsx("div",{className:"col-span-1",children:r.jsx($M,{})}),r.jsx("div",{className:"col-span-1",children:r.jsx(qM,{})})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[r.jsx("div",{children:r.jsx(WM,{orders:l.slice(0,10),drivers:d.filter(p=>p.role==="driver").map(p=>({id:p.id,lat:p.lat||31.95+Math.random()*.1,lng:p.lng||35.93+Math.random()*.1}))})}),r.jsx("div",{children:r.jsx(HM,{})}),r.jsx("div",{children:r.jsx("div",{className:"rounded bg-slate-800 p-4",children:"Operations panel"})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-semibold mb-4 text-white",children:"Recent Transactions"}),l.length===0?r.jsx(zM,{message:"No transactions yet"}):r.jsx("div",{className:"p-4 bg-slate-800 rounded",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"User"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{})]})}),r.jsx("tbody",{children:l.map(p=>r.jsxs("tr",{className:"border-t border-slate-700 hover:bg-slate-900 transition",children:[r.jsx("td",{className:"py-2",children:p.id}),r.jsx("td",{children:(d.find(g=>g.id===p.userId)||{}).name||p.userId}),r.jsxs("td",{children:["$",p.total]}),r.jsx("td",{children:r.jsx("span",{className:p.status==="delivered"?"text-green-400":"text-yellow-400",children:p.status})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>t("/admin/orders"),className:"text-blue-400 hover:underline",children:"View"})})]},p.id))})]})})]})]})}function QM(){const t=Pe(),[e,s]=C.useState(null),[n,o]=C.useState(()=>Ae()),[l,c]=te.useState(()=>new Set),[d]=te.useState(()=>mt()),[h]=te.useState(()=>Oe());te.useEffect(()=>{const M=Cs(R=>{if(R.type==="tick"||R.type==="order"||R.type==="app:newOrder"){const Z=Ae();o([...Z])}if(R.type==="order"||R.type==="app:newOrder")try{const Z=R.order&&R.order.id?R.order.id:null;if(Z){c(re=>{const ee=new Set(re);return ee.add(Z),ee});try{const re=new(window.AudioContext||window.webkitAudioContext),ee=re.createOscillator(),de=re.createGain();ee.type="sine",ee.frequency.value=880,de.gain.value=.02,ee.connect(de),de.connect(re.destination),ee.start(),setTimeout(()=>{ee.stop(),re.close().catch(()=>{})},120)}catch{}setTimeout(()=>{c(re=>{const ee=new Set(re);return ee.delete(Z),ee})},12e3)}}catch{}});return()=>M()},[]);const[f,p]=te.useState(""),[g,y]=te.useState(""),[b]=my(),j=b.get("stat"),N=$h,w=n.map(M=>{const R=M.estimatedReadyAt?Math.ceil((M.estimatedReadyAt-Date.now())/6e4):M.prepMinutes||0;return{...M,remaining:R}}),S=new Set(["pending","accepted","processing"]),_=M=>M.filter(R=>{if(!f)return!0;const Z=f.toString().toLowerCase(),re=(d.find(de=>de.id===R.userId)||{}).name||"",ee=R.store||(R.items||[])[0]&&h.find(de=>de.id===R.items[0].productId)?.store||"";return(""+R.id).includes(Z)||re.toLowerCase().includes(Z)||(""+(R.items||[]).length).includes(Z)||(""+R.total).includes(Z)||ee.toLowerCase().includes(Z)}).filter(R=>{if(!g)return!0;const Z=R.store||(R.items||[])[0]&&h.find(ee=>ee.id===R.items[0].productId)?.store||"",re=d.find(ee=>ee.role==="store"&&(ee.name===Z||ee.username===Z));return re?re.region===g:!1}),T=(M,R)=>M.getFullYear()===R.getFullYear()&&M.getMonth()===R.getMonth()&&M.getDate()===R.getDate();let O=[];if(j){const M=j.toLowerCase();M==="total"?O=w:M==="today"?O=w.filter(R=>R.date&&T(new Date(R.date),new Date)):M==="revenue"?O=w.filter(R=>R.date&&T(new Date(R.date),new Date)&&R.status!=="cancelled"):M==="late"?O=w.filter(R=>R.status!=="delivered"&&R.status!=="cancelled"&&R.estimatedReadyAt&&Date.now()>R.estimatedReadyAt):M==="outofstock"?O=w.filter(R=>(R.items||[]).some(Z=>{const re=h.find(ee=>ee.id===Z.productId);return!re||(re.stock??0)<=0})):M==="avg"?O=w.filter(R=>R.status!=="cancelled"):M==="cancelled"?O=w.filter(R=>(R.status||"").toLowerCase()==="cancelled"):O=w.filter(R=>S.has((R.status||"").toLowerCase())),O=_(O)}else O=_(w.filter(M=>S.has((M.status||"").toLowerCase())));const E=O.sort((M,R)=>(M.remaining||0)-(R.remaining||0)),$=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}],z=M=>{ot(M,{status:"cancelled"}),o([...Ae()])},L=M=>{ot(M,{status:"cancelled"}),o([...Ae()])};return r.jsxs(tt,{sideItems:$,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["All Orders (",n.length,")"]})]}),e?r.jsxs("div",{className:"p-6 bg-slate-800 rounded mb-6",children:[r.jsx("button",{onClick:()=>s(null),className:"mb-4 px-4 py-2 bg-slate-700 rounded text-white hover:bg-slate-600",children:" Back to Orders"}),r.jsxs("h3",{className:"text-2xl font-bold text-white mb-4",children:["Order #",e.id]}),r.jsxs("p",{className:"text-slate-400",children:["Date: ",e.date?new Date(e.date).toLocaleString():""]}),r.jsxs("div",{className:"bg-slate-900 p-4 rounded",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400",children:"Customer:"}),r.jsx("p",{className:"text-white font-semibold",children:(d.find(M=>M.id===e.userId)||{}).name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400",children:"Status:"}),(()=>{const M=(e.status||"").toLowerCase();return M==="cancelled"?r.jsx("p",{className:"font-bold text-red-400",children:"Order cancelled"}):M==="delivered"?r.jsx("p",{className:"font-bold text-green-400",children:"Delivered"}):(e.estimatedReadyAt?Math.max(0,Math.ceil((e.estimatedReadyAt-Date.now())/6e4)):e.prepMinutes||0)<=0?r.jsx("p",{className:"font-bold text-yellow-300",children:"Ready"}):r.jsx("p",{className:"font-bold text-yellow-400",children:"Processing"})})(),e.cancelledAt&&r.jsxs("p",{className:"text-slate-400 text-sm mt-2",children:["Cancelled at: ",new Date(e.cancelledAt).toLocaleString()]}),e.cancelReason&&r.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Cancel reason: ",e.cancelReason]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-slate-400",children:"Store:"}),r.jsxs("p",{className:"text-white",children:[e.store||e.items&&e.items[0]&&h.find(M=>M.id===e.items[0].productId)?.store||""," ",e.region?`- ${e.region}`:""]}),r.jsx("p",{className:"text-slate-400",children:"Preparation time:"}),r.jsx("div",{className:"mt-2",children:r.jsx(JM,{minutes:e.estimatedReadyAt?Math.max(0,Math.ceil((e.estimatedReadyAt-Date.now())/6e4)):e.prepMinutes||0})})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-slate-400 mb-2",children:["Items (",(e.items||[]).length,"):"]}),r.jsx("ul",{className:"list-disc ml-6",children:e.items.map((M,R)=>{const Z=h.find(ee=>ee.id===M.productId)||{name:{en:"Unknown",ar:" "},image:""},re=M.qty||M.quantity||1;return r.jsxs("li",{className:"text-white flex items-center gap-3",children:[Z.image?r.jsx("img",{src:Z.image,alt:Z.name?.en||Z.name,className:"w-12 h-8 object-cover rounded"}):null,r.jsxs("span",{children:[Z.name?.en||Z.name,"  ",re]})]},R)})})]}),r.jsxs("div",{className:"mt-4 text-right",children:[r.jsx("p",{className:"text-slate-400",children:"Total:"}),r.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["$",e.total]})]}),r.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>t(`/admin/invoice/${e.id}`),className:"px-4 py-2 bg-indigo-600 rounded text-white",children:"Invoice"}),(e.status||"").toLowerCase()!=="cancelled"&&(e.status||"").toLowerCase()!=="delivered"&&(e.estimatedReadyAt?Math.max(0,Math.ceil((e.estimatedReadyAt-Date.now())/6e4)):e.prepMinutes,r.jsx(r.Fragment,{children:r.jsx("button",{onClick:()=>z(e.id),className:"px-4 py-2 bg-red-600 rounded text-white hover:bg-red-700",children:" Cancel"})}))]})]})]}):r.jsxs("div",{className:"bg-slate-800 p-4 rounded mb-4",children:[r.jsxs("div",{className:"flex gap-3 items-center mb-3",children:[r.jsx("input",{type:"text",placeholder:"Search by order ID, customer name, item count, total, or store name",value:f,onChange:M=>p(M.target.value),className:"flex-1 px-3 py-2 rounded bg-slate-700 text-white"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-slate-300",children:"Region"}),r.jsxs("select",{value:g,onChange:M=>y(M.target.value),className:"px-2 py-2 rounded bg-slate-700 text-white",children:[r.jsx("option",{value:"",children:"All"}),N.map(M=>r.jsx("option",{value:M,children:M},M))]})]})]}),r.jsx(XM,{orders:E,users:d,products:h,onSelect:s,onDelete:L,stat:j,newOrderIds:l}),g&&r.jsx(ZM,{region:g,users:d,orderList:n,products:h})]})]})}function XM({orders:t,users:e,products:s,onSelect:n,onDelete:o,stat:l,newOrderIds:c}){const d=["avg","today","revenue"].includes((l||"").toLowerCase());(l||"").toLowerCase(),(l||"").toLowerCase(),(l||"").toLowerCase();function h(f){const p=(f.status||"").toLowerCase();return p==="cancelled"?"Cancelled":p==="delivered"?"Delivered":p==="processing"||p==="accepted"?"Processing":p==="pending"?"Pending":p==="delivering"||p==="out_for_delivery"||p==="on_delivery"?"Out for delivery":f.status||""}return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs table-auto min-w-[1000px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-white text-black text-[11px] uppercase",children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Order"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Store"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Placed At"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Time Left"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Customer"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Phone"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Payment"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:t.map(f=>{const p=e.find(T=>T.id===f.userId)||{},g=f.store||f.items&&f.items[0]&&s.find(T=>T.id===f.items[0].productId)?.store||"",y=e.find(T=>T.role==="store"&&(T.name===g||T.username===g));new Set((f.items||[]).map(T=>T.productId)).size;let b=y&&y.region||f.region||"";const j=new Set($h||[]);(!b||!j.has(b))&&(b="");const N=f.date?new Date(f.date).toLocaleString():"",w=f.estimatedReadyAt?Math.max(0,Math.ceil((f.estimatedReadyAt-Date.now())/6e4))+" m":f.prepMinutes?f.prepMinutes+" m":"",S=p.phone||"",_=f.paymentMethod||(f.paid?"Paid":"");return r.jsxs("tr",{className:"border-b border-slate-200/10 hover:bg-slate-900 transition text-slate-300",children:[r.jsx("td",{className:"px-3 py-2",children:f.id}),r.jsx("td",{className:"px-3 py-2",children:f.id}),r.jsx("td",{className:"px-3 py-2",children:g}),r.jsx("td",{className:"px-3 py-2",children:h(f)}),r.jsx("td",{className:"px-3 py-2",children:N}),r.jsx("td",{className:"px-3 py-2",children:w}),r.jsx("td",{className:"px-3 py-2",children:p.name||f.userId}),r.jsx("td",{className:"px-3 py-2",children:S}),r.jsx("td",{className:"px-3 py-2",children:_}),r.jsxs("td",{className:"px-3 py-2 text-right font-semibold text-green-400",children:["$",f.total]}),r.jsx("td",{className:"px-3 py-2 text-right",children:!d&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>n(f),className:"text-blue-400 hover:underline ml-2",children:"View"}),l!=="cancelled"&&r.jsx("button",{onClick:()=>o(f.id),className:"text-red-400 hover:underline ml-2",children:"Cancel"})]})})]},f.id)})})]})})}function JM({minutes:t}){const e=Number(t||0);let s="bg-red-600";const n=e<0,o=Math.abs(e);n?s="bg-red-700":o>=30?s="bg-green-600/60":o>=10&&(s="bg-orange-500");const l=n?`Late ${o} m`:o?o+" m":"";return r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s} text-white font-semibold`,children:l})})}function ZM({region:t,users:e,orderList:s,products:n}){const o=new Set(["pending","accepted","processing"]),l=e.filter(c=>c.role==="store"&&c.region===t).filter(c=>s.some(d=>o.has((d.status||"").toLowerCase())&&(d.store===c.name||(d.items||[]).some(h=>n.find(f=>f.id===h.productId&&f.store===c.name)))));return l.length===0?r.jsx("div",{className:"mt-3 text-slate-400",children:"No stores in this region with pending orders."}):r.jsxs("div",{className:"mt-3",children:[r.jsxs("h4",{className:"text-white font-semibold",children:["Stores in ",t," with pending orders"]}),r.jsx("ul",{className:"list-disc pl-6 mt-2 text-slate-300",children:l.map(c=>r.jsx("li",{children:c.name},c.id))})]})}ur.register(hf,ff,cf,lf,uf,df);function eT(){const t=Pe(),[e,s]=C.useState("All"),n=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}],o={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[1200,1900,3e3,2500,3800,4200],borderColor:"#10b981",backgroundColor:"#10b98133",tension:.4}]},[l,c]=te.useState(()=>Bh()),[d,h]=C.useState(!1),[f,p]=C.useState(""),[g,y]=C.useState(!1);te.useEffect(()=>{const L=Cs(M=>{(M.type==="tick"||M.type==="order")&&c({...M.stats})});return()=>L()},[]);const b=(l.totalOrders?l.totalRevenue/l.totalOrders:0).toFixed(2);function j(L){try{const M=Math.max(0,Math.floor(Number(L)||0));if(M<1e3)return M.toLocaleString();const R=String(M),Z=R.length,re=Number(R.slice(0,3)),ee=Z-3;return(re*Math.pow(10,ee)).toLocaleString()}catch{return L}}const N=()=>{try{const L=`
        <html>
          <head>
            <title>Revenue Report</title>
            <meta charset="utf-8" />
            <style>
              body{ font-family: Arial, Helvetica, sans-serif; padding:24px; color:#111 }
              h1{ font-size:24px; margin-bottom:8px }
              .meta{ margin-bottom:16px; color:#444 }
              table{ width:100%; border-collapse:collapse; margin-top:12px }
              th,td{ padding:8px; border:1px solid #ddd; text-align:left }
              th{ background:#f4f4f4 }
              .big{ font-size:20px; font-weight:700 }
            </style>
          </head>
          <body>
            <h1>Revenue Report</h1>
            <div class="meta">Generated: ${new Date().toLocaleString()}</div>

            <div>
              <p class="big">Total Revenue: $${Number(l.totalRevenue||0).toLocaleString()}</p>
              <p class="big">Total Orders: ${Number(l.totalOrders||0).toLocaleString()}</p>
              <p class="big">Avg Order Value: $${b}</p>
            </div>

            <h3 style="margin-top:18px">Top Summary</h3>
            <table>
              <thead>
                <tr><th>Metric</th><th>Value</th></tr>
              </thead>
              <tbody>
                <tr><td>Orders / Day (est.)</td><td>${(l.totalOrders/30).toFixed(1)}</td></tr>
                <tr><td>Revenue / Day (est.)</td><td>$${(l.totalRevenue/30).toFixed(2)}</td></tr>
                <tr><td>Active Stores</td><td>${l.activeStores}</td></tr>
                <tr><td>Active Users</td><td>${l.activeUsers}</td></tr>
              </tbody>
            </table>

          </body>
        </html>
      `,M=window.open("","_blank","noopener,noreferrer");if(!M){alert("Unable to open print window  please allow popups for this site.");return}M.document.open(),M.document.write(L),M.document.close(),setTimeout(()=>{try{M.focus(),M.print()}catch(R){console.warn("print failed",R)}},300)}catch(L){console.error(L),alert("Failed to generate report")}},w=L=>{s(L)};function S(L){p(L),h(!0)}function _(){h(!1),p("")}function T(){y(!0)}function O(){y(!1)}const E=l.totalOrders?l.totalRevenue/Math.max(1,l.totalOrders):parseFloat(b)||100,$=o.labels.map((L,M)=>{const R=Number(o.datasets[0].data[M]||0),Z=Math.max(1,Math.round(R/(E||100))),re=Z?R/Z:0;return{month:L,revenue:R,orders:Z,avg:re}}),z=e==="All"?$:$.filter(L=>L.month===e);return r.jsxs(tt,{sideItems:n,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Revenue Analytics"}),r.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-600 rounded text-white hover:bg-green-700 font-bold",children:" Export Report"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("button",{onClick:()=>S("revenue"),className:"bg-slate-800 p-6 rounded text-left hover:shadow-lg transition",children:[r.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Total Revenue"}),r.jsxs("p",{className:"text-4xl font-bold text-green-400",children:["$",j(l.totalRevenue)]})]}),r.jsxs("button",{onClick:()=>S("orders"),className:"bg-slate-800 p-6 rounded text-left hover:shadow-lg transition",children:[r.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Total Orders"}),r.jsx("p",{className:"text-4xl font-bold text-blue-400",children:l.totalOrders})]}),r.jsxs("button",{onClick:()=>S("avg"),className:"bg-slate-800 p-6 rounded text-left hover:shadow-lg transition",children:[r.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Avg Order Value"}),r.jsxs("p",{className:"text-4xl font-bold text-yellow-400",children:["$",b]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-white font-bold mb-2 block",children:"Filter by Month:"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["All","Jan","Feb","Mar","Apr","May","Jun"].map(L=>r.jsx("button",{onClick:()=>w(L),className:`px-4 py-2 rounded font-bold transition ${e===L?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:L},L))})]}),r.jsxs("div",{className:"bg-slate-800 p-6 rounded mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Revenue Trend"}),r.jsx(Ub,{data:o,options:{responsive:!0,maintainAspectRatio:!0}}),r.jsxs("div",{className:"mt-4 bg-slate-900 rounded p-3",children:[r.jsx("h4",{className:"text-white font-bold mb-2",children:"Monthly Statistics"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-slate-300",children:[r.jsx("th",{className:"py-2",children:"Month"}),r.jsx("th",{className:"py-2",children:"Revenue"}),r.jsx("th",{className:"py-2",children:"Orders"}),r.jsx("th",{className:"py-2",children:"Avg Order"})]})}),r.jsx("tbody",{children:z.map(L=>r.jsxs("tr",{className:"border-t border-slate-700",children:[r.jsx("td",{className:"py-2 text-white",children:L.month}),r.jsxs("td",{className:"py-2 text-green-300",children:["$",L.revenue.toLocaleString()]}),r.jsx("td",{className:"py-2 text-white",children:L.orders}),r.jsxs("td",{className:"py-2 text-yellow-300",children:["$",L.avg.toFixed(2)]})]},L.month))})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Top Stats"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Orders per Day:"}),r.jsx("span",{className:"text-white font-bold",children:(l.totalOrders/30).toFixed(1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Revenue per Day:"}),r.jsxs("span",{className:"text-white font-bold",children:["$",(l.totalRevenue/30).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Active Stores:"}),r.jsx("span",{className:"text-white font-bold",children:l.activeStores})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Active Users:"}),r.jsx("span",{className:"text-white font-bold",children:l.activeUsers})]})]})]}),r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Growth Analysis"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400 mb-1",children:"Month-over-Month Growth"}),r.jsx("div",{className:"bg-slate-900 rounded p-2",children:r.jsx("p",{className:"text-green-400 font-bold",children:" 12.5%"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400 mb-1",children:"Customer Satisfaction"}),r.jsx("div",{className:"bg-slate-900 rounded p-2",children:r.jsx("p",{className:"text-blue-400 font-bold",children:" (4.8/5)"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400 mb-1",children:"Delivery Success Rate"}),r.jsx("div",{className:"bg-slate-900 rounded p-2",children:r.jsx("p",{className:"text-yellow-400 font-bold",children:"98.2%"})})]}),r.jsx("button",{onClick:T,className:"w-full mt-3 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700 font-bold transition",children:" View Detailed Report"})]})]})]}),g&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:r.jsxs("div",{className:"bg-white text-black max-w-4xl w-full mx-4 rounded p-6 shadow-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Detailed Revenue Report"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>window.print(),className:"px-3 py-1 bg-green-600 text-white rounded",children:"Print"}),r.jsx("button",{onClick:O,className:"px-3 py-1 bg-slate-700 text-white rounded",children:"Close"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-slate-600",children:[r.jsx("th",{className:"py-2",children:"Month"}),r.jsx("th",{className:"py-2",children:"Revenue"}),r.jsx("th",{className:"py-2",children:"Orders"}),r.jsx("th",{className:"py-2",children:"Avg Order"})]})}),r.jsx("tbody",{children:$.map(L=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"py-2",children:L.month}),r.jsxs("td",{className:"py-2",children:["$",L.revenue.toLocaleString()]}),r.jsx("td",{className:"py-2",children:L.orders}),r.jsxs("td",{className:"py-2",children:["$",L.avg.toFixed(2)]})]},L.month))})]})})]})}),d&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:r.jsxs("div",{className:"bg-white text-black max-w-2xl w-full mx-4 rounded p-6 shadow-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:f==="revenue"?"Revenue Details":f==="orders"?"Orders Details":"Avg Order Value Details"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{window.print()},className:"px-3 py-1 bg-green-600 text-white rounded",children:"Print"}),r.jsx("button",{onClick:_,className:"px-3 py-1 bg-slate-700 text-white rounded",children:"Close"})]})]}),r.jsxs("div",{children:[f==="revenue"&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Total revenue for the selected period and summary breakdown."}),r.jsxs("p",{className:"font-bold text-lg",children:["$",Number(l.totalRevenue||0).toLocaleString()]}),r.jsxs("table",{className:"w-full mt-4 border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left",children:"Metric"}),r.jsx("th",{className:"text-left",children:"Value"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1",children:"Revenue / Day (est.)"}),r.jsxs("td",{className:"py-1",children:["$",(l.totalRevenue/30).toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1",children:"Top Month (sample)"}),r.jsx("td",{className:"py-1",children:"June"})]})]})]})]}),f==="orders"&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Total orders and per-day estimate."}),r.jsx("p",{className:"font-bold text-lg",children:l.totalOrders}),r.jsxs("ul",{className:"list-disc ml-5 mt-3 text-sm text-slate-700",children:[r.jsxs("li",{children:["Orders / Day (est.): ",(l.totalOrders/30).toFixed(1)]}),r.jsxs("li",{children:["Pending Orders: ",l.pendingOrders||0]})]})]}),f==="avg"&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Average order value across all orders."}),r.jsxs("p",{className:"font-bold text-lg",children:["$",b]}),r.jsx("p",{className:"mt-3 text-sm",children:"This is total revenue divided by total orders."})]})]})]})})]})}function K0(){const t=Pe(),[e,s]=C.useState(Be),[n,o]=C.useState(null),l=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}],c=y=>{const b=Be.findIndex(j=>j.id===y);if(b!==-1){Be[b].status=Be[b].status==="active"?"blocked":"active";try{Dn()}catch{}s([...Be])}},d=y=>{const b=Be.findIndex(j=>j.id===y);if(b!==-1){Be.splice(b,1);try{Dn()}catch{}s([...Be])}},h=e.filter(y=>y.role==="customer"),f=e.filter(y=>y.role==="store"),p=e.filter(y=>y.role==="driver");e.filter(y=>y.role==="admin");const g=({user:y})=>r.jsxs("div",{className:`p-4 rounded transition ${y.status==="blocked"?"bg-red-900 opacity-75":"bg-slate-900 hover:bg-slate-800"}`,children:[r.jsx("p",{className:"text-white font-semibold",children:y.name}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["@",y.username]}),y.email&&r.jsx("p",{className:"text-slate-400 text-xs",children:y.email}),y.phone&&r.jsx("p",{className:"text-slate-400 text-xs",children:y.phone}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{onClick:()=>c(y.id),className:`flex-1 px-2 py-1 rounded text-xs font-bold ${y.status==="active"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:y.status==="active"?"":" "}),r.jsx("button",{onClick:()=>o(y),className:"flex-1 px-2 py-1 bg-indigo-600 hover:bg-indigo-700 rounded text-xs font-bold text-white",children:" "}),r.jsx("button",{onClick:()=>d(y.id),className:"flex-1 px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs font-bold text-white",children:" "})]}),r.jsx("p",{className:`text-xs mt-2 font-bold ${y.status==="active"?"text-green-400":"text-red-400"}`,children:(y.status||"unknown").toString().toUpperCase()})]});return r.jsxs(tt,{sideItems:l,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"All Users"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Customers"}),r.jsx("p",{className:"text-3xl font-bold text-blue-400",children:h.length})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Stores"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:f.length})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Drivers"}),r.jsx("p",{className:"text-3xl font-bold text-orange-400",children:p.length})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-purple-400",children:e.length})]})]}),r.jsxs("div",{className:"space-y-6",children:[h.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""})," Customers (",h.length,")"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:h.map(y=>r.jsx(g,{user:y},y.id))})]}),f.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""})," Stores (",f.length,")"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:f.map(y=>r.jsx(g,{user:y},y.id))})]}),p.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""})," Drivers (",p.length,")"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:p.map(y=>r.jsx(g,{user:y},y.id))})]})]})]})}function tT(){const t=Pe(),[e,s]=C.useState(Lt),[n,o]=te.useState(()=>Bh()),[l,c]=C.useState(!1),[d,h]=C.useState({name:{en:"",ar:""},price:"",sku:"",store:"",image:"",stock:0,region:""});te.useEffect(()=>{const w=Cs(S=>{(S.type==="tick"||S.type==="order")&&o({...S.stats})});return()=>w()},[]);const f=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}],[p,g]=te.useState(()=>{try{return JSON.parse(localStorage.getItem("pending_offers")||"[]")}catch{return[]}});te.useEffect(()=>{const w=setInterval(()=>{try{g(JSON.parse(localStorage.getItem("pending_offers")||"[]"))}catch{}},1500);return()=>clearInterval(w)},[]);const y=w=>{alert(`Edit product ${w} - Feature coming soon`)},b=w=>{s(e.filter(S=>S.id!==w))},j=w=>{s(e.map(S=>S.id===w?{...S,stock:Math.max(0,S.stock-1)}:S))},N=e.reduce((w,S)=>w+S.price*(S.stock||10),0);return r.jsxs(tt,{sideItems:f,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsx("button",{onClick:()=>c(!0),className:"mb-4 ml-3 px-4 py-2 bg-green-600 rounded text-white hover:bg-green-700",children:"Product Catalog"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"All Products"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Total Products"}),r.jsx("p",{className:"text-3xl font-bold text-blue-400",children:e.length})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Active Stores"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:n.activeStores})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Avg Price"}),r.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:["$",(e.reduce((w,S)=>w+S.price,0)/e.length).toFixed(2)]})]}),r.jsxs("div",{className:"bg-slate-800 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Inventory Value"}),r.jsxs("p",{className:"text-3xl font-bold text-purple-400",children:["$",N.toFixed(2)]})]})]}),r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Product Catalog"}),p.length>0&&r.jsxs("div",{className:"mb-4 p-3 bg-slate-900 rounded",children:[r.jsx("h4",{className:"text-white font-semibold mb-2",children:"Pending Offers"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.map(w=>r.jsxs("div",{className:"p-3 bg-slate-800 rounded flex gap-3 items-start",children:[r.jsx("img",{src:w.image,alt:"offer",className:"w-24 h-20 object-cover rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"font-semibold text-white",children:[w.productName,"  ",w.store]}),r.jsxs("div",{className:"text-slate-400 text-sm",children:["Offer: $",w.offerPrice,"  Original: $",w.originalPrice]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{onClick:()=>{try{const S=JSON.parse(localStorage.getItem("approved_offers")||"[]");S.push({...w,status:"approved",approvedAt:Date.now()}),localStorage.setItem("approved_offers",JSON.stringify(S));const _=JSON.parse(localStorage.getItem("pending_offers")||"[]").filter(T=>T.id!==w.id);localStorage.setItem("pending_offers",JSON.stringify(_)),g(_),alert("Offer approved and published")}catch(S){console.error(S),alert("Could not approve")}},className:"px-3 py-1 bg-green-600 text-white rounded",children:""}),r.jsx("button",{onClick:()=>{try{const S=JSON.parse(localStorage.getItem("pending_offers")||"[]").filter(_=>_.id!==w.id);localStorage.setItem("pending_offers",JSON.stringify(S)),g(S),alert("Offer rejected")}catch(S){console.error(S),alert("Could not reject")}},className:"px-3 py-1 bg-red-600 text-white rounded",children:""})]})]})]},w.id))})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(w=>r.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 hover:bg-slate-850 transition border-l-4 border-indigo-600",children:[r.jsx("img",{src:w.image,alt:w.name.en,className:"w-full h-32 object-cover rounded-lg mb-3"}),r.jsx("h4",{className:"text-white font-semibold text-sm mb-1",children:w.name.en}),r.jsx("p",{className:"text-slate-400 text-xs mb-2",children:w.name.ar}),r.jsx("div",{className:"bg-slate-800 p-2 rounded mb-2",children:r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",w.price.toFixed(2)]})}),r.jsxs("div",{className:"space-y-1 text-xs text-slate-400 mb-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Stock:"}),r.jsxs("span",{className:`font-bold ${(w.stock||10)>50?"text-green-400":(w.stock||10)>10?"text-yellow-400":"text-red-400"}`,children:[w.stock||10," units"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"SKU:"}),r.jsx("span",{className:"text-white",children:w.sku})]})]}),r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsx("button",{onClick:()=>y(w.id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-1 rounded font-semibold transition",children:" Edit"}),r.jsx("button",{onClick:()=>j(w.id),className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white py-1 rounded font-semibold transition",title:"Decrease stock by 1",children:""}),r.jsx("button",{onClick:()=>b(w.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-1 rounded font-semibold transition",children:""})]})]},w.id))})]}),e.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-400 text-lg",children:"No products added yet"}),r.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:"+ Add New Product"})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-11/12 max-w-2xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Add Product"}),r.jsx("button",{onClick:()=>c(!1),className:"px-2 py-1 text-sm text-slate-600",children:"Close"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{value:d.name.en,onChange:w=>h({...d,name:{...d.name,en:w.target.value}}),placeholder:"Name (EN)",className:"px-3 py-2 rounded bg-slate-100"}),r.jsx("input",{value:d.name.ar,onChange:w=>h({...d,name:{...d.name,ar:w.target.value}}),placeholder:" (AR)",className:"px-3 py-2 rounded bg-slate-100"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx("input",{value:d.price,onChange:w=>h({...d,price:w.target.value}),placeholder:"Price",className:"px-3 py-2 rounded bg-slate-100"}),r.jsx("input",{value:d.sku,onChange:w=>h({...d,sku:w.target.value}),placeholder:"SKU",className:"px-3 py-2 rounded bg-slate-100"}),r.jsx("input",{value:d.stock,onChange:w=>h({...d,stock:w.target.value}),placeholder:"Stock",className:"px-3 py-2 rounded bg-slate-100"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{value:d.store,onChange:w=>h({...d,store:w.target.value}),placeholder:"Store (optional)",className:"px-3 py-2 rounded bg-slate-100"}),r.jsx("select",{value:d.region,onChange:w=>h({...d,region:w.target.value}),className:"px-3 py-2 rounded bg-slate-100",children:r.jsx("option",{value:"",children:"Select region (optional)"})})]}),r.jsx("input",{value:d.image,onChange:w=>h({...d,image:w.target.value}),placeholder:"Image URL (optional)",className:"w-full px-3 py-2 rounded bg-slate-100"}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>c(!1),className:"px-3 py-2 bg-slate-300 rounded",children:"Cancel"}),r.jsx("button",{onClick:()=>{try{const S={id:(Lt.reduce((_,T)=>Math.max(_,T.id||0),0)||0)+1,name:{en:String(d.name.en||"").trim(),ar:String(d.name.ar||"").trim()},price:Number(d.price)||0,sku:String(d.sku||"").trim(),store:String(d.store||"").trim(),image:String(d.image||"").trim(),stock:Number(d.stock)||0};Lt.push(S),h({name:{en:"",ar:""},price:"",sku:"",store:"",image:"",stock:0,region:""}),c(!1),s([...Lt])}catch(w){console.error("add product failed",w),c(!1)}},className:"px-3 py-2 bg-green-600 text-white rounded",children:"Add Product"})]})]})]})})]})}function Ks(t){return"$"+(Math.round((t||0)*100)/100).toFixed(2)}function sT(){const t=Pe(),[e,s]=C.useState(null),n=te.useMemo(()=>Ae(),[]),o=te.useMemo(()=>Oe(),[]),l=te.useMemo(()=>mt(),[]),c=n.length,d=n.filter(M=>M.status!=="delivered"&&M.estimatedReadyAt&&M.estimatedReadyAt<Date.now()).length,h=n.filter(M=>M.status!=="delivered"&&M.estimatedReadyAt&&M.estimatedReadyAt<Date.now()).map(M=>({id:M.id,store:M.store,userId:M.userId,lateMinutes:Math.ceil((Date.now()-M.estimatedReadyAt)/6e4)})),f=n.filter(M=>(M.items||[]).some(R=>{const Z=o.find(re=>re.id===R.productId);return Z?(R.qty||R.quantity||1)>(Z.stock||0):!1})).length,p=n.length?n.reduce((M,R)=>M+(R.total||0),0)/n.length:0,g=n.length?n.reduce((M,R)=>M+(R.prepMinutes||0),0)/n.length:0,y=new Date;y.setHours(0,0,0,0);const b=new Date;b.setHours(23,59,59,999);const j=n.filter(M=>M.date&&new Date(M.date)>=y&&new Date(M.date)<=b),N=j.reduce((M,R)=>M+(R.total||0),0),w={};for(const M of n)M.userId&&(w[M.userId]=(w[M.userId]||0)+(M.total||0));const S=Object.entries(w).sort((M,R)=>R[1]-M[1]).slice(0,5).map(([M,R])=>({user:l.find(Z=>Z.id==M)||{name:"Unknown"},total:R})),_=n.filter(M=>M.discountAmount||M.discountValue||M.discount),T=_.length,O=_.reduce((M,R)=>M+(R.discountAmount||R.discountValue||R.discount&&R.discount.amount||0),0),E=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}];function $(M=14){const R=[],Z=new Date;Z.setHours(0,0,0,0);for(let ee=M-1;ee>=0;ee--){const de=new Date(Z);de.setDate(de.getDate()-ee),R.push({date:new Date(de),label:`${de.getMonth()+1}/${de.getDate()}`,value:0})}const re=ee=>{const de=new Date(ee);return de.setHours(0,0,0,0),Math.floor((de-R[0].date)/(1440*60*1e3))};for(const ee of n){if(!ee.date||(ee.status||"").toLowerCase()==="cancelled")continue;const de=re(ee.date);de>=0&&de<R.length&&(R[de].value+=ee.total||0)}return R}const z=te.useMemo(()=>$(14),[n]);function L(M,R){return M.getFullYear()===R.getFullYear()&&M.getMonth()===R.getMonth()&&M.getDate()===R.getDate()}return n.filter(M=>M.date&&L(new Date(M.date),new Date)),n.filter(M=>(M.status||"").toLowerCase()==="cancelled"),n.filter(M=>M.status!=="delivered"&&M.estimatedReadyAt&&M.estimatedReadyAt<Date.now()),n.filter(M=>(M.items||[]).some(R=>{const Z=Oe().find(re=>re.id===R.productId);return Z?(R.qty||R.quantity||1)>(Z.stock||0):!1})),n.filter(M=>(M.status||"").toLowerCase()!=="cancelled"),r.jsxs(tt,{sideItems:E,children:[r.jsx("div",{className:"mb-6",children:r.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Statistics"})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{onClick:()=>t("/admin/orders?stat=total"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Total Orders"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:c})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=revenue"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Today's Revenue"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:Ks(N)}),r.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Orders today: ",j.length]})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=today"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Orders Today"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:j.length})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=late"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Late Orders"}),r.jsx("p",{className:"text-3xl font-bold text-red-400",children:d})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=outOfStock"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Out-of-Stock Orders"}),r.jsx("p",{className:"text-3xl font-bold text-orange-400",children:f})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=avg"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Average Order Value"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:Ks(p)})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=cancelled"),className:"p-4 bg-slate-800 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400",children:"Canceled orders"}),r.jsx("p",{className:"text-3xl font-bold text-red-400",children:n.filter(M=>(M.status||"").toLowerCase()==="cancelled").length})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsx("p",{className:"text-slate-400",children:"Average Prep Time (min)"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:Math.round(g)})]}),r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsx("p",{className:"text-slate-400",children:"Discounts Used"}),r.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:[T," (",Ks(O),")"]})]})]}),r.jsxs("div",{className:"mt-6 bg-slate-800 p-4 rounded",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Top Customers"}),r.jsx("ol",{className:"list-decimal pl-6 text-slate-200",children:S.map((M,R)=>r.jsxs("li",{children:[M.user.name,"  ",Ks(M.total)]},R))})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsx("p",{className:"text-slate-400",children:"Late Orders"}),r.jsx("p",{className:"text-3xl font-bold text-red-400",children:d}),r.jsx("div",{className:"mt-3 text-slate-200 text-sm max-h-40 overflow-auto",children:h.length===0?r.jsx("div",{children:"No late orders"}):r.jsx("ul",{children:h.map(M=>r.jsxs("li",{children:["#",M.id,"  ",M.lateMinutes,"   ",M.store]},M.id))})})]}),r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsx("p",{className:"text-slate-400",children:"Today's Revenue (quick)"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:Ks(N)}),r.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Orders today: ",j.length]})]})]}),r.jsxs("div",{className:"mt-6 bg-slate-800 p-4 rounded",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Statistics Table"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-slate-400 mb-2",children:"Revenue Trend (last 14 days)"}),r.jsx("div",{className:"bg-slate-900 p-3 rounded",children:r.jsx(nT,{series:z})})]}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Total Orders"}),r.jsx("td",{className:"py-2 text-white",children:c})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Late Orders"}),r.jsx("td",{className:"py-2 text-white",children:d})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Out-of-Stock Orders"}),r.jsx("td",{className:"py-2 text-white",children:f})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Average Order Value"}),r.jsx("td",{className:"py-2 text-white",children:Ks(p)})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Average Prep (min)"}),r.jsx("td",{className:"py-2 text-white",children:Math.round(g)})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Discounts (count / sum)"}),r.jsxs("td",{className:"py-2 text-white",children:[T," / ",Ks(O)]})]}),r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 text-slate-300",children:"Today's Revenue"}),r.jsx("td",{className:"py-2 text-white",children:Ks(N)})]})]})})]})]})}function nT({series:t,width:e=640,height:s=140,padding:n=24}){if(!t||t.length===0)return r.jsx("div",{className:"text-slate-400",children:"No data"});const o=t.map(g=>g.value),l=Math.max(...o,1),c=e-n*2,d=s-n*2,h=c/Math.max(1,t.length-1),f=t.map((g,y)=>{const b=n+y*h,j=n+(d-g.value/l*d);return`${b},${j}`}).join(" "),p=(()=>{const g=`M ${n},${n+d}`,y=t.map((b,j)=>{const N=n+j*h,w=n+(d-b.value/l*d);return`${N} ${w}`}).join(" L ");return`${g} L ${y} L ${n+c},${n+d} Z`})();return r.jsxs("div",{className:"w-full overflow-auto",children:[r.jsxs("svg",{viewBox:`0 0 ${e} ${s}`,width:"100%",height:"120",preserveAspectRatio:"xMidYMid meet",children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"revGrad",x1:"0",x2:"0",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.35"}),r.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"}),r.jsx("path",{d:p,fill:"url(#revGrad)",stroke:"none"}),r.jsx("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"2",points:f}),t.map((g,y)=>{const b=n+y*h,j=n+(d-g.value/l*d);return r.jsx("circle",{cx:b,cy:j,r:3,fill:"#10b981"},y)}),t.map((g,y)=>{const b=n+y*h;return r.jsx("text",{x:b,y:s-6,fontSize:"10",fill:"#94a3b8",textAnchor:"middle",children:g.label},"l"+y)})]}),r.jsxs("div",{className:"text-slate-400 text-sm mt-2",children:["Total (last 14 days): ",Ks(t.reduce((g,y)=>g+y.value,0))]})]})}function iT(){const[t,e]=C.useState([]),[s,n]=C.useState([]),[o,l]=C.useState("All");C.useEffect(()=>{const g=JSON.parse(localStorage.getItem("PENDING_OFFERS")||"[]"),y=JSON.parse(localStorage.getItem("APPROVED_OFFERS")||"[]");if(e(g),n(y),g.length===0){const b=[{id:"demo1",title:" 20%  ",subtitle:" ",image:"",discount:20,region:"North",store:"Coffee Bazaar",status:"pending",startDate:new Date("2025-12-28").toISOString(),endDate:new Date("2026-01-04").toISOString()},{id:"demo2",title:" ",subtitle:" $15",image:"",discount:0,region:"All",store:"Bistro 21",status:"pending",startDate:new Date("2025-12-28").toISOString(),endDate:new Date("2025-12-31").toISOString()}];localStorage.setItem("PENDING_OFFERS",JSON.stringify(b)),e(b)}if(y.length===0){const b=[{id:"app1",title:" ",subtitle:" 15%  ",image:"",discount:15,region:"All",store:"Coffee Bazaar",status:"approved",startDate:new Date("2025-12-28").toISOString(),endDate:new Date("2026-01-11").toISOString()}];localStorage.setItem("APPROVED_OFFERS",JSON.stringify(b)),n(b)}},[]);function c(){e(JSON.parse(localStorage.getItem("PENDING_OFFERS")||"[]")),n(JSON.parse(localStorage.getItem("APPROVED_OFFERS")||"[]"))}function d(g){const y=Date.now(),b=JSON.parse(localStorage.getItem("PENDING_OFFERS")||"[]").filter(S=>S.id!==g.id),j=JSON.parse(localStorage.getItem("APPROVED_OFFERS")||"[]"),N={...g,status:"approved",approvedAt:y};j.unshift(N),localStorage.setItem("PENDING_OFFERS",JSON.stringify(b)),localStorage.setItem("APPROVED_OFFERS",JSON.stringify(j));const w=JSON.parse(localStorage.getItem("ADMIN_NOTIFS")||"[]");w.unshift({id:"n"+y,type:"info",title:`   ${g.title}`,ts:y}),localStorage.setItem("ADMIN_NOTIFS",JSON.stringify(w)),c()}function h(g){const y=JSON.parse(localStorage.getItem("PENDING_OFFERS")||"[]").filter(N=>N.id!==g.id);localStorage.setItem("PENDING_OFFERS",JSON.stringify(y));const b=Date.now(),j=JSON.parse(localStorage.getItem("ADMIN_NOTIFS")||"[]");j.unshift({id:"n"+b,type:"info",title:`  ${g.title}`,ts:b}),localStorage.setItem("ADMIN_NOTIFS",JSON.stringify(j)),c()}const f=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Offers",to:"/admin/offers"}],p=t.filter(g=>o==="All"?!0:g.region===o);return r.jsx(tt,{sideItems:f,children:r.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"border px-2 py-1 rounded",children:[r.jsx("option",{value:"All",children:""}),r.jsx("option",{value:"North",children:" "}),r.jsx("option",{value:"South",children:" "}),r.jsx("option",{value:"East",children:" "}),r.jsx("option",{value:"West",children:" "})]}),r.jsx("button",{onClick:c,className:"px-3 py-1 bg-slate-800 text-white rounded",children:""})]})]}),r.jsx("div",{className:"space-y-4",children:p.length===0?r.jsx("div",{className:"p-4 bg-slate-800 rounded text-slate-300",children:"     ."}):p.map(g=>r.jsxs("div",{className:"p-4 bg-black/60 text-white rounded shadow flex items-start gap-4",children:[r.jsx("div",{className:"w-36 h-24 bg-black/30 rounded overflow-hidden border border-white/10",children:r.jsx("img",{src:g.image||"https://via.placeholder.com/160x120",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-lg",children:g.title}),r.jsx("div",{className:"text-sm text-white/80",children:g.subtitle}),r.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Store: ",g.store||"","  Region: ",g.region]}),r.jsxs("div",{className:"text-xs text-white/60 mt-1",children:[": ",g.startDate?new Date(g.startDate).toLocaleDateString():"","  : ",g.endDate?new Date(g.endDate).toLocaleDateString():""]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>d(g),className:"px-3 py-2 bg-green-600 text-white rounded",children:""}),r.jsx("button",{onClick:()=>h(g),className:"px-3 py-2 bg-red-500 text-white rounded",children:""})]})]},g.id))})]})})}function rT(){const{id:t}=hi(),e=Pe(),s=Ae().find(f=>String(f.id)===String(t));if(!s)return r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{children:"Invoice not found"}),r.jsx("button",{onClick:()=>e(-1),className:"mt-4 px-3 py-1 bg-indigo-600 text-white rounded",children:"Back"})]});const o=[...new Set((s.items||[]).map(f=>(Oe().find(p=>p.id===f.productId)||{}).store))][0]||s.storeName||"",l=(s.items||[]).reduce((f,p)=>{const y=(Oe().find(b=>b.id===p.productId)||{}).price??p.price??0;return f+y*(p.qty||p.quantity||0)},0),c=s.tax??+(l*.05).toFixed(2),d=s.total??+(l+c).toFixed(2),h=new Set((s.items||[]).map(f=>f.productId)).size;return r.jsx("div",{className:"min-h-screen bg-white text-black p-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("div",{className:"text-lg font-bold",children:o}),r.jsx("div",{className:"text-sm font-semibold",children:"Fast Cart"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Order #"})," ",s.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Date:"})," ",s.date?new Date(s.date).toLocaleString():"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:" :"})," ",h]})]}),r.jsxs("table",{className:"w-full mb-4 text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"py-2 text-left",children:""}),r.jsx("th",{className:"py-2 text-left",children:""}),r.jsx("th",{className:"py-2",children:"Qty"}),r.jsx("th",{className:"py-2",children:"Price"}),r.jsx("th",{className:"py-2",children:"Total"})]})}),r.jsx("tbody",{children:(s.items||[]).map((f,p)=>{const g=Oe().find(N=>N.id===f.productId)||{},y=g.name?.en||g.name||`#${f.productId}`,b=f.qty||f.quantity||0,j=g.price??f.price??0;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2",children:g.image?r.jsx("img",{src:g.image,alt:y,className:"w-16 h-12 object-cover rounded"}):null}),r.jsx("td",{className:"py-2",children:y}),r.jsx("td",{className:"py-2 text-center",children:b}),r.jsxs("td",{className:"py-2 text-right",children:["$",j]}),r.jsxs("td",{className:"py-2 text-right",children:["$",(j*b).toFixed(2)]})]},p)})})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Subtotal:"})," $",l.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tax:"})," $",c]}),r.jsxs("p",{className:"text-xl font-bold",children:["Total: $",d]})]}),r.jsxs("div",{className:"mt-6 text-right",children:[r.jsx("button",{onClick:()=>window.print(),className:"px-3 py-1 bg-indigo-600 text-white rounded mr-2",children:"Print"}),r.jsx("button",{onClick:()=>e(-1),className:"px-3 py-1 bg-slate-700 text-white rounded",children:"Close"})]})]})})}var oT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const aT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lt=(t,e)=>{const s=C.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:d,...h},f)=>C.createElement("svg",{ref:f,...oT,width:o,height:o,stroke:n,strokeWidth:c?Number(l)*24/Number(o):l,className:`lucide lucide-${aT(t)}`,...h},[...e.map(([p,g])=>C.createElement(p,g)),...(Array.isArray(d)?d:[d])||[]]));return s.displayName=`${t}`,s},lT=lt("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]),cT=lt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),dT=lt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),uT=lt("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),pu=lt("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),hT=lt("Donut",[["path",{d:"M20.5 10a2.5 2.5 0 0 1-2.4-3H18a2.95 2.95 0 0 1-2.6-4.4 10 10 0 1 0 6.3 7.1c-.3.2-.8.3-1.2.3",key:"19sr3x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fT=lt("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),mT=lt("Egg",[["path",{d:"M12 22c6.23-.05 7.87-5.57 7.5-10-.36-4.34-3.95-9.96-7.5-10-3.55.04-7.14 5.66-7.5 10-.37 4.43 1.27 9.95 7.5 10z",key:"1c39pg"}]]),pT=lt("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]),Hb=lt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),gT=lt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),xT=lt("IceCream",[["path",{d:"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11",key:"1v6356"}],["path",{d:"M17 7A5 5 0 0 0 7 7",key:"151p3v"}],["path",{d:"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4",key:"1sdaij"}]]),yT=lt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),vT=lt("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]),bT=lt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),wT=lt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),jT=lt("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),NT=lt("ToyBrick",[["rect",{width:"18",height:"12",x:"3",y:"8",rx:"1",key:"158fvp"}],["path",{d:"M10 8V5c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v3",key:"s0042v"}],["path",{d:"M19 8V5c0-.6-.4-1-1-1h-3a1 1 0 0 0-1 1v3",key:"9wmeh2"}]]),ST=lt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kT=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CT=lt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),mf="app_cart_v2",qb=C.createContext(null);function _T(){try{return JSON.parse(localStorage.getItem(mf)||"[]")}catch{return[]}}function PT(t){try{localStorage.setItem(mf,JSON.stringify(t))}catch{}}function MT({children:t}){const[e,s]=C.useState(()=>_T());C.useEffect(()=>{PT(e)},[e]),C.useEffect(()=>{function p(g){g.key===mf&&s(g.newValue?JSON.parse(g.newValue):[])}return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[]);const n=C.useCallback((p,g=1)=>{s(y=>{const b=y.findIndex(j=>j.id===p.id);if(b!==-1){const j=[...y];return j[b]={...j[b],qty:(j[b].qty||0)+g},j}return[{id:p.id,productId:p.id,name:p.name&&typeof p.name=="object"&&p.name.en||p.name,price:p.price||0,store:p.store,image:p.image,qty:g},...y]});try{typeof window<"u"&&window.dispatchEvent(new CustomEvent("app:toast",{detail:{message:"   ",timeout:1e3}}))}catch{}},[]),o=C.useCallback((p,g)=>{s(y=>{const b=y.findIndex(N=>N.id===p);if(b===-1)return y;const j=[...y];return g<=0?j.splice(b,1):j[b]={...j[b],qty:g},j})},[]),l=C.useCallback(p=>{s(g=>g.filter(y=>y.id!==p))},[]),c=C.useCallback(()=>s([]),[]),d=C.useMemo(()=>e.reduce((p,g)=>p+(g.qty||0),0),[e]),h=C.useMemo(()=>e.reduce((p,g)=>p+(g.qty||0)*(g.price||0),0),[e]),f=C.useMemo(()=>({items:e,addItem:n,changeQty:o,removeItem:l,clearCart:c,itemCount:d,total:h}),[e,n,o,l,c,d,h]);return r.jsx(qb.Provider,{value:f,children:t})}function mi(){const t=C.useContext(qb);if(!t)throw new Error("useCart must be used within CartProvider");return t}function TT({product:t,lang:e="en",onAdd:s,onToggleWishlist:n,wished:o}){const{items:l,addItem:c,changeQty:d,removeItem:h}=mi(),f=l.find(g=>g.id===t.id);function p(){c(t,1),s&&s(t)}return r.jsxs(Zt.div,{layout:!0,whileHover:{scale:1.02},className:"bg-[rgba(0,0,0,0.5)] rounded-lg overflow-hidden shadow text-white",children:[r.jsx("div",{className:"h-40 bg-black/20 flex items-center justify-center",children:r.jsx("img",{src:t.image,alt:t.name&&t.name[e],className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold",children:t.name?.[e]||t.name}),r.jsx("div",{className:"text-xs text-slate-300",children:t.store})]}),r.jsx("button",{onClick:()=>n&&n(t),className:"p-1 text-rose-400 hover:text-rose-300",children:r.jsx(Hb,{size:18,fill:o?"currentColor":"none"})})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("div",{className:"text-lg font-bold",children:["$",t.price]}),f?r.jsxs("div",{className:"bg-black/60 text-white rounded-lg px-3 py-2 flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:t.name?.[e]||t.name}),r.jsx("div",{className:"text-sm",children:t.name?.[e]||t.name}),r.jsxs("div",{className:"text-sm mt-1",children:["$",Number(t.price).toFixed(2)]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:g=>{g.stopPropagation(),d(t.id,(f.qty||1)-1)},className:"px-2 py-1 bg-black/30 rounded",children:""}),r.jsx("div",{className:"w-6 text-center",children:f.qty}),r.jsx("button",{onClick:g=>{g.stopPropagation(),d(t.id,(f.qty||1)+1)},className:"px-2 py-1 bg-black/30 rounded",children:"+"})]}),r.jsx("button",{onClick:g=>{g.stopPropagation(),h(t.id)},className:"ml-2 text-white bg-black/30 rounded px-2 py-1",children:""})]}):r.jsx("button",{onClick:p,className:"inline-flex items-center gap-2 px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500",children:"Add"})]})]})]})}te.memo(TT);function ET(){const t=Pe(),[e]=my(),{user:s}=pt()||{},[n,o]=C.useState(()=>e.get("q")||""),[l,c]=C.useState(()=>mt()),[d,h]=C.useState(()=>Ae()),[f,p]=C.useState(()=>Oe()),[g,y]=C.useState(null),[b,j]=C.useState(null),[N,w]=C.useState(!1),[S,_]=C.useState(!1),[T,O]=C.useState(!1),[E,$]=C.useState(null);C.useEffect(()=>{const K=e.get("q");K&&o(K)},[e]),te.useEffect(()=>{const K=Cs(F=>{(F.type==="tick"||F.type==="order")&&(c(mt()),h(Ae()),p(Oe()))});return()=>K()},[]);const z=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Create",to:"/admin/create-store"}],[L,M]=C.useState("online"),R=C.useMemo(()=>{const K=(n||"").toLowerCase().trim();if(!K)return{users:[],products:[],orders:[],stores:[]};const F=l.filter(J=>(J.name||"").toLowerCase().includes(K)||(J.username||"").toLowerCase().includes(K)||(J.email||"").toLowerCase().includes(K)),ne=f.filter(J=>(J.name?.en||J.name||"").toString().toLowerCase().includes(K)||(J.sku||"").toLowerCase().includes(K)),Q=d.filter(J=>(""+J.id).includes(K)||J.total&&(""+J.total).includes(K)),W=l.filter(J=>J.role==="store"&&((J.name||"").toLowerCase().includes(K)||(J.email||"").toLowerCase().includes(K)));if(s?.role==="store"){const J=s.name,ie=ne.filter(ke=>ke.store===J||ke.storeName===J),ue=Q.filter(ke=>(ke.items||[]).some(ye=>f.find(Re=>Re.id===ye.productId&&(Re.store===J||Re.storeName===J))));return{users:[],products:ie,orders:ue,stores:[]}}return{users:F,products:ne,orders:Q,stores:W}},[n,s,l,f,d]),Z=C.useMemo(()=>L==="all"?l:l.filter(K=>K.status==="active"||K.online),[l,L]),re=R.orders.length+R.users.length+R.products.length+R.stores.length,ee=d.filter(K=>K.status==="cancelled"),de=C.useMemo(()=>{const K=d.filter(ne=>ne.status!=="cancelled");return!K||K.length===0?0:K.reduce((ne,Q)=>ne+(Number(Q.total)||0),0)/K.length},[d]),he=d.length,V=(K,F)=>K.getFullYear()===F.getFullYear()&&K.getMonth()===F.getMonth()&&K.getDate()===F.getDate(),X=d.filter(K=>K.date&&V(new Date(K.date),new Date)),B=X.reduce((K,F)=>K+(F.status==="cancelled"?0:Number(F.total)||0),0),q=d.filter(K=>K.status!=="delivered"&&K.status!=="cancelled"&&K.estimatedReadyAt&&Date.now()>K.estimatedReadyAt),se=d.filter(K=>(K.items||[]).some(F=>{const ne=f.find(Q=>Q.id===F.productId);return!ne||(ne.stock??0)<=0}));function D(){y(null),_(!1)}function G(K){const F=Be.findIndex(ne=>ne.id===K);if(F===-1)return alert("User not found");Be[F].status="banned";try{Dn()}catch{}c(mt()),alert("  ")}function xe(K){j(K),w(!0)}function ge(){if(!g)return null;const{type:K,item:F}=g;return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-11/12 max-w-3xl max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:K==="order"?`Order #${F.id}`:K==="product"&&F.name?.en||F.name}),r.jsx("button",{onClick:D,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsxs("div",{className:"prose prose-invert text-sm",children:[K==="order"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"ID:"})," ",F.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"User:"})," ",(l.find(ne=>ne.id===F.userId)||{}).name||F.userId]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Store:"})," ",(l.find(ne=>ne.id===F.storeId)||{}).name||F.storeName||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Status:"})," ",F.status]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total:"})," $",F.total]}),r.jsx("div",{className:"mt-3",children:r.jsx("button",{onClick:()=>t(`/admin/invoice/${F.id}`),className:"px-3 py-1 bg-yellow-500 text-black rounded",children:""})}),r.jsx("h4",{className:"mt-3",children:"Items"}),r.jsx("ul",{className:"list-disc pl-6",children:(F.items||[]).map((ne,Q)=>{const W=f.find(ke=>ke.id===ne.productId)||{},J=W.name?.en||W.name||ne.name||ne.title||`#${ne.productId}`,ie=ne.quantity||ne.qty||0,ue=W.price??ne.price??0;return r.jsxs("li",{children:[J,"  ",ie," x $",ue," = $",(ue*ie).toFixed(2)]},Q)})})]}),K==="user"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",F.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Username:"})," @",F.username]}),F.email&&r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," ",F.email]}),F.phone&&r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",F.phone]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Role:"})," ",F.role]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("button",{onClick:()=>G(F.id),className:"px-3 py-1 bg-red-600 text-white rounded",children:""}),r.jsx("button",{onClick:()=>xe(F),className:"px-3 py-1 bg-indigo-600 text-white rounded",children:"  "})]})]}),K==="store"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",F.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Category:"})," ",F.category]}),F.image&&r.jsx("img",{src:F.image,alt:F.name,className:"w-full h-48 object-cover rounded my-3"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Contact:"})," ",F.email||F.phone||"N/A"]})]}),K==="product"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name (EN):"})," ",F.name?.en||F.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"SKU:"})," ",F.sku]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Price:"})," $",F.price]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Stock:"})," ",F.stock??"N/A"]}),F.image&&r.jsx("img",{src:F.image,alt:F.name?.en,className:"w-full h-48 object-cover rounded my-3"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",F.description||""]})]})]})]})})}function Se(){const K=d.filter(F=>F.status==="cancelled");return T?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-11/12 max-w-4xl max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:["Cancelled Orders (",K.length,")"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>O(!1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})})]}),K.length===0&&r.jsx("p",{className:"text-slate-400",children:"      ."}),r.jsx("div",{className:"space-y-4",children:K.map(F=>{const ne=l.find(J=>J.id===F.userId)||{},Q=l.find(J=>J.name===F.store||J.username===F.store)||{},W=l.find(J=>J.id===F.cancelledBy)||null;return r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-semibold",children:["Order #",F.id,"  $",F.total]}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["User: ",ne.name||F.userId,"  Store: ",Q.name||F.store]}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["Status: ",F.status]})]}),r.jsxs("div",{className:"text-right text-sm text-slate-400",children:[F.cancelledAt&&r.jsxs("p",{children:["Cancelled: ",new Date(F.cancelledAt).toLocaleString()]}),r.jsxs("p",{children:["Prep time (min): ",F.timeToPrepareMinutes??F.prepMinutes]}),F.cancelReason&&r.jsxs("p",{children:["Reason: ",F.cancelReason]}),F.cancelledBy&&r.jsxs("p",{children:["Cancelled by: ",W?W.name:F.cancelledBy]})]})]}),r.jsx("div",{className:"mt-2 text-sm text-slate-300",children:r.jsx("button",{onClick:()=>{y({type:"order",item:F}),O(!1)},className:"px-3 py-1 bg-indigo-600 rounded text-white",children:" "})})]},F.id)})})]})}):null}function we(){if(!N||!b)return null;const K=d.filter(ne=>ne.userId===b.id),F=K.filter(ne=>ne.status==="cancelled");return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-11/12 max-w-4xl max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:["   ",b.name]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>{w(!1),j(null)},className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"mb-3",children:["Total orders: ",K.length,"  Cancelled: ",F.length]}),r.jsx("div",{className:"space-y-3",children:K.map(ne=>r.jsx("div",{className:"p-3 bg-slate-100 rounded",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold",children:["Order #",ne.id,"  $",ne.total]}),r.jsxs("p",{className:"text-sm",children:["Status: ",ne.status]}),ne.cancelReason&&r.jsxs("p",{className:"text-sm text-red-600",children:["Cancelled reason: ",ne.cancelReason]})]}),r.jsxs("div",{className:"text-right text-sm",children:[r.jsxs("p",{children:["Payment: ",ne.payment?.method||"N/A"]}),r.jsxs("p",{children:["Paid: ",ne.payment&&ne.payment.method||ne.status==="delivered"?"Yes":"No"]})]})]})},ne.id))})]})]})})}return r.jsxs(tt,{sideItems:z,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:" Search System"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("input",{type:"text",placeholder:"      ...",value:n,onChange:K=>o(K.target.value),className:"w-full px-4 py-3 bg-slate-800 text-white border border-indigo-600 rounded text-lg focus:outline-none focus:border-indigo-500"})}),n.trim()&&r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400 mb-6",children:re>0?`Found ${re} result(s)`:" No results found"}),R.orders.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[" Orders (",R.orders.length,")"]}),r.jsx("div",{className:"space-y-2",children:R.orders.map(K=>r.jsxs("div",{onClick:()=>y({type:"order",item:K}),className:"bg-slate-900 p-3 rounded hover:bg-slate-850 cursor-pointer transition",children:[r.jsxs("p",{className:"text-white font-semibold",children:["Order #",K.id]}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["$",K.total," - Status: ",K.status]})]},K.id))})]}),R.users.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-white",children:[" Users (",R.users.length,")"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-slate-400",children:":"}),r.jsxs("select",{value:L,onChange:K=>M(K.target.value),className:"bg-slate-900 text-white px-2 py-1 rounded",children:[r.jsx("option",{value:"online",children:"Users online"}),r.jsx("option",{value:"all",children:"All Users"})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Z.filter(K=>R.users.find(F=>F.id===K.id)).map(K=>r.jsxs("div",{onClick:()=>y({type:"user",item:K}),className:"bg-slate-900 p-3 rounded hover:bg-slate-850 transition cursor-pointer",children:[r.jsx("p",{className:"text-white font-semibold",children:K.name}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["@",K.username]})]},K.id))})]}),R.stores.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[" Stores (",R.stores.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.stores.map(K=>r.jsxs("div",{onClick:()=>y({type:"store",item:K}),className:"bg-slate-900 p-3 rounded hover:bg-slate-850 transition cursor-pointer",children:[K.image&&r.jsx("img",{src:K.image,alt:K.name,className:"w-full h-24 object-cover rounded mb-2"}),r.jsx("p",{className:"text-white font-semibold text-sm",children:K.name})]},K.id))})]}),R.products.length>0&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:[" Products (",R.products.length,")"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:R.products.map(K=>r.jsxs("div",{onClick:()=>y({type:"product",item:K}),className:"bg-slate-900 p-3 rounded hover:bg-slate-850 transition cursor-pointer",children:[K.image&&r.jsx("img",{src:K.image,alt:K.name?.en,className:"w-full h-24 object-cover rounded mb-2"}),r.jsx("p",{className:"text-white font-semibold text-sm",children:K.name?.en||K.name}),r.jsxs("p",{className:"text-green-400 font-bold",children:["$",(K.price||0).toFixed(2)]})]},K.id))})]}),re===0&&r.jsxs("div",{className:"bg-slate-800 p-12 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-lg",children:"    "}),r.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"   "})]})]}),!n.trim()&&r.jsxs("div",{className:"bg-slate-800 p-6 rounded",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" Active Users"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{onClick:()=>t("/admin/orders?stat=total"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:he})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=revenue"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Today's Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",B.toFixed(2)]}),r.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:["Orders today: ",X.length]})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=today"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Orders Today"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:X.length})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=late"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Late Orders"}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:q.length})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=outOfStock"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Out-of-Stock Orders"}),r.jsx("p",{className:"text-2xl font-bold text-orange-400",children:se.length})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=avg"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Average Order Value"}),r.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:["$",de.toFixed(2)]})]}),r.jsxs("div",{onClick:()=>t("/admin/orders?stat=cancelled"),className:"bg-slate-900 p-4 rounded cursor-pointer",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Canceled orders"}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:ee.length})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-slate-900 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Active Customers"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:l.filter(K=>K.role==="customer"&&K.status==="active").length})]}),r.jsxs("div",{className:"bg-slate-900 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Active Stores"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:HC().length})]}),r.jsxs("div",{className:"bg-slate-900 p-4 rounded text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"Active Drivers"}),r.jsx("p",{className:"text-2xl font-bold text-orange-400",children:l.filter(K=>K.role==="driver"&&K.status==="active").length})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-bold text-white",children:" Users"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-slate-400",children:":"}),r.jsxs("select",{value:L,onChange:K=>M(K.target.value),className:"bg-slate-900 text-white px-2 py-1 rounded",children:[r.jsx("option",{value:"online",children:"Users online"}),r.jsx("option",{value:"all",children:"All Users"})]})]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:Z.map(K=>r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("p",{className:"text-white font-semibold",children:K.name}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["@",K.username]})]},K.id))})]})]}),Se(),ge(),we()]})}function OT(){const t=Pe(),[e,s]=C.useState({username:"",password:"",type:"store",region:"",storeName:"",storeCategory:"",storeImage:"",driverPhoto:""}),n=[{key:"offers",label:"Offers & Discounts",emoji:""},{key:"restaurants",label:"Restaurants",emoji:""},{key:"accessories",label:"Accessories & Gifts",emoji:""},{key:"home",label:"Home Supplies",emoji:""},{key:"stationery",label:"Stationery",emoji:""},{key:"bakery",label:"Bakery",emoji:""},{key:"delivery",label:"Delivery Service",emoji:""},{key:"sweets",label:"Sweets & Desserts",emoji:""},{key:"grocery",label:"Grocery",emoji:""},{key:"produce",label:"Produce (Fruits & Vegetables)",emoji:""},{key:"cafes",label:"Cafs",emoji:""},{key:"pharmacy",label:"Pharmacy",emoji:""},{key:"water",label:"Water",emoji:""}],o=$h,l=[{label:"Dashboard",to:"/admin"},{label:"Orders",to:"/admin/orders"},{label:"Revenue",to:"/admin/revenue"},{label:"statistics",to:"/admin/stats"},{label:"Users online",to:"/admin/users"},{label:"Products",to:"/admin/products"},{label:"Search",to:"/admin/search"},{label:"Create",to:"/admin/create-store"}],c=f=>{const{name:p,value:g}=f.target;s(y=>({...y,[p]:g}))},d=f=>{const p=f.target.files&&f.target.files[0];if(!p)return;const g=new FileReader;g.onload=()=>{const y=f.target.name||"storeImage";s(b=>({...b,[y]:g.result}))},g.readAsDataURL(p)},h=f=>{if(f.preventDefault(),!e.username||!e.password){alert("     ");return}if(e.type==="store"&&(!e.storeName||!e.storeCategory||!e.region)){alert("    :    ");return}if(e.type==="driver"&&(!e.storeName||!e.region)){alert("    ");return}const p=Math.max(...Be.map(y=>y.id))+1,g={id:p,username:e.username,password:e.password,role:e.type,name:e.storeName,category:e.storeCategory,region:e.region,image:e.type==="driver"?e.driverPhoto||`https://picsum.photos/seed/newdriver${p}/200/200`:e.storeImage||`https://picsum.photos/seed/newstore${p}/400/300`,status:"active",email:`${e.username}@example.com`,phone:"0790000000"};console.log("New account created:",g),alert(` ${e.type==="store"?"Store":"Driver"} account created successfully!

Username: ${e.username}
Password: ${e.password}`),Be.push(g);try{Dn()}catch{}s({username:"",password:"",type:"store",storeName:"",storeCategory:"",region:"",storeImage:"",driverPhoto:""})};return r.jsxs(tt,{sideItems:l,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>t("/admin"),className:"mb-4 px-4 py-2 bg-indigo-600 rounded text-white hover:bg-indigo-700",children:" Back to Dashboard"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:" Create Store / Driver Account"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsx("div",{className:"bg-slate-800 p-8 rounded",children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-bold mb-2",children:"Account Type"}),r.jsxs("select",{name:"type",value:e.type,onChange:c,className:"w-full px-3 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"store",children:" Store"}),r.jsx("option",{value:"driver",children:" Driver"})]})]}),e.type==="store"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:""}),r.jsxs("select",{name:"storeCategory",value:e.storeCategory,onChange:c,className:"w-full px-2 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"",children:" "}),n.map(f=>r.jsx("option",{value:f.label,children:`${f.emoji} ${f.label}`},f.key))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:""}),r.jsxs("select",{name:"region",value:e.region,onChange:c,className:"w-full px-2 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"",children:" "}),o.map(f=>r.jsx("option",{value:f,children:f},f))]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{}),r.jsx("div",{})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:"Username"}),r.jsx("input",{type:"text",name:"username",value:e.username,onChange:c,placeholder:"Enter username",className:"w-full px-3 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:e.password,onChange:c,placeholder:"Enter password",className:"w-full px-3 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none"})]})]}),e.type==="store"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-bold mb-2",children:"Store Name"}),r.jsx("input",{type:"text",name:"storeName",value:e.storeName,onChange:c,placeholder:"Enter store name",className:"w-full px-4 py-2 bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-bold mb-2",children:"Store Image"}),r.jsx("input",{type:"file",accept:"image/*",name:"storeImage",onChange:d,className:"w-full text-sm text-slate-400"})]})]}),e.type==="driver"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-bold mb-2",children:"Driver Name"}),r.jsx("input",{type:"text",name:"storeName",value:e.storeName,onChange:c,placeholder:"Enter driver name",className:"w-full px-4 py-2 bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none"})]}),e.type==="driver"&&r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:""}),r.jsxs("select",{name:"region",value:e.region,onChange:c,className:"w-full px-2 py-2 text-sm bg-slate-900 text-white border border-slate-700 rounded focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),o.map(f=>r.jsx("option",{value:f,children:f},f))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-white font-medium text-sm mb-1",children:" "}),r.jsx("input",{type:"file",accept:"image/*",name:"driverPhoto",onChange:d,className:"w-full text-sm text-slate-400"})]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded transition mt-6",children:[" Create ",e.type==="store"?"Store":"Driver"," Account"]})]})}),r.jsxs("div",{className:"bg-slate-800 p-8 rounded",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" Preview"}),e.type==="store"&&r.jsxs("div",{className:"bg-slate-900 rounded-lg p-4",children:[r.jsx("img",{src:e.storeImage||"https://via.placeholder.com/400x300?text=Store+Image",alt:"Store",className:"w-full h-40 object-cover rounded-lg mb-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-bold text-lg",children:e.storeName||"Store Name"}),r.jsx("p",{className:"text-slate-400 text-sm",children:e.storeCategory||"Category"}),e.region&&r.jsx("p",{className:"text-slate-400 text-sm",children:e.region}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("p",{className:"text-slate-400 text-xs",children:["Username: ",e.username||"username"]}),r.jsx("p",{className:"text-green-400 text-xs mt-1 font-bold",children:"Status: ACTIVE"})]})]})]}),e.type==="driver"&&r.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 text-center",children:[e.driverPhoto?r.jsx("img",{src:e.driverPhoto,alt:e.storeName||"Driver",className:"w-24 h-24 rounded-full object-cover mx-auto mb-4"}):r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h4",{className:"text-white font-bold text-lg",children:e.storeName||"Driver Name"}),e.region&&r.jsx("p",{className:"text-slate-400 text-sm",children:e.region}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Delivery Driver"}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("p",{className:"text-slate-400 text-xs",children:["Username: ",e.username||"username"]}),r.jsx("p",{className:"text-green-400 text-xs mt-1 font-bold",children:"Status: ACTIVE"})]})]})]})]})]})}function DT({className:t="w-full",compact:e=!1}){const s=Pe(),{user:n}=pt()||{},[o,l]=C.useState(null),c=()=>{try{if(!n)return null;const h=Ae().filter(f=>f.userId===n.id&&f.status!=="delivered"&&f.status!=="cancelled");return!h||h.length===0?null:h.sort((f,p)=>(p.date||0)-(f.date||0))[0]}catch{return null}};C.useEffect(()=>{l(c());const h=es.subscribe(f=>{n&&(f&&f.order&&f.order.userId===n.id&&l(c()),f&&f.type==="app:newOrder"&&f.order&&f.order.userId===n.id&&l(c()),f&&f.type==="app:driverAssigned"&&f.order&&f.order.userId===n.id&&l(c()))});return()=>h&&h()},[n]);const d=C.useMemo(()=>{if(!n)return"U";const h=(n.name||n.username||"").toString().split(" ").filter(Boolean);return h.length===0?"U":h.length===1?h[0].slice(0,1).toUpperCase():(h[0].slice(0,1)+h[h.length-1].slice(0,1)).toUpperCase()},[n]);return r.jsx("div",{className:`bg-white/5 backdrop-blur-md rounded-2xl p-4 shadow ${t}`,children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-800 flex items-center justify-center text-xl text-white font-semibold",children:n&&n.picture?r.jsx("img",{src:n.picture,alt:"avatar",className:"w-20 h-20 rounded-full object-cover"}):d}),r.jsx("div",{className:"flex-1",children:n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[" ",n.name||n.username]}),r.jsx("div",{className:"text-sm text-slate-400",children:n.email||n.phone||""})]}),r.jsx("div",{children:r.jsx("button",{onClick:()=>s("/customer/profile"),className:"text-xs text-indigo-500",children:" "})})]}),o?r.jsxs("div",{className:"mt-3 p-3 bg-white/5 rounded-lg border border-white/5",children:[r.jsx("div",{className:"text-sm text-slate-400",children:" "}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsxs("div",{className:"font-semibold",children:["#",o.id,"  ",o.store]}),r.jsx("div",{className:"text-sm text-slate-500",children:o.status})]}),r.jsxs("div",{className:"text-sm text-slate-400 mt-2",children:[": $",o.total,"   ~",o.prepMinutes||""," "]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("button",{onClick:()=>s("/customer/orders"),className:"px-3 py-1 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>{window.confirm(" ")&&(es.emit({type:"app:cancelRequest",orderId:o.id}),alert("    ()"))},className:"px-3 py-1 bg-slate-100 rounded",children:""})]})]}):r.jsx("div",{className:"mt-3 text-sm text-slate-400",children:"           ."})]}):r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:"   "}),r.jsx("div",{className:"text-sm text-slate-400",children:"    "}),r.jsx("div",{className:"mt-3",children:r.jsx("button",{onClick:()=>s("/login"),className:"px-3 py-1 bg-indigo-600 text-white rounded",children:" "})})]})})]})})}function AT(){return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow animate-pulse",children:[r.jsx("div",{className:"bg-slate-200 h-36 rounded mb-3"}),r.jsx("div",{className:"h-4 bg-slate-200 rounded w-2/3 mb-2"}),r.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/3"})]})}function RT(){const t=Pe(),{user:e,unreadNotifications:s}=pt()||{},{items:n,addItem:o,changeQty:l,removeItem:c,clearCart:d,total:h}=mi(),[f,p]=C.useState(""),[g,y]=C.useState(!!s),[b,j]=C.useState(!1),[N,w]=C.useState(!0),[S,_]=C.useState([]),[T,O]=C.useState([]),[E,$]=C.useState(!1);C.useEffect(()=>{setTimeout(()=>{const ee=Oe();_(ee);const de=Array.from(new Set(ee.map(he=>he.store)));O(de),w(!1)},400)},[]),C.useEffect(()=>{y(!!s)},[s]),C.useMemo(()=>{const ee={};for(const de of S)(de.offer||(de.tags||[]).includes("offer"))&&(ee[de.store]=ee[de.store]||[],ee[de.store].push(de));return ee},[S]);const z=Yv,L=C.useMemo(()=>z.filter(ee=>ee.name.toLowerCase().includes(f.toLowerCase())),[z,f]),M=C.useMemo(()=>e?Ae().filter(ee=>ee.userId===e.id).slice(-3).reverse():[],[e]);function R(){return h.toFixed(2)}async function Z(){if(!e){t("/login");return}if(n.length===0)return alert("Cart is empty");try{const ee=n.map(he=>({productId:he.id,quantity:he.qty})),de=Number(h);w(!0),await es.placeOrder({userId:e.id,items:ee,total:de,payment:{method:"wallet"},store:n[0]?.store||""}),$(!0),setTimeout(()=>{d(),$(!1),w(!1),t("/customer/orders")},1600)}catch(ee){w(!1),alert(ee.message||"Order failed")}}const re=C.useMemo(()=>mt(),[]);return r.jsxs("div",{className:"min-h-screen bg-white text-gray-900 pb-28",children:[r.jsx("div",{className:"sticky top-0 z-30 backdrop-blur-md bg-white/60 border-b border-gray-100",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center text-white font-bold",children:"E"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-500",children:"Delivery to"}),r.jsx("button",{className:"text-sm font-semibold",onClick:()=>alert("Change address (mock)"),children:"Home  23 Elm St "})]})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:`mx-auto max-w-xl transition-all ${b?"scale-100":""}`,children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{value:f,onChange:ee=>p(ee.target.value),onFocus:()=>j(!0),onBlur:()=>setTimeout(()=>j(!1),150),placeholder:"Search for dishes, stores or offers",className:"w-full px-4 py-2 rounded-full border border-gray-200 shadow-sm focus:ring-1 focus:ring-indigo-300"}),b&&r.jsxs("div",{className:"absolute left-0 right-0 mt-2 bg-white border border-gray-100 rounded-lg shadow-lg p-3",children:[r.jsx("div",{className:"text-sm text-slate-500",children:"Recent searches"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{className:"px-3 py-1 bg-slate-100 rounded",children:"Burger"}),r.jsx("button",{className:"px-3 py-1 bg-slate-100 rounded",children:"Pizza"}),r.jsx("button",{className:"px-3 py-1 bg-slate-100 rounded",children:"Sushi"})]})]})]})})}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{className:"relative",onClick:()=>{y(!1),t("/customer/orders")},children:[r.jsx("svg",{className:"w-6 h-6 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),g&&r.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]})})]})}),r.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-6",children:[r.jsx("div",{className:"relative mb-6",style:{marginTop:"-1cm"},children:r.jsx("div",{className:"overflow-hidden rounded-2xl",children:r.jsx("div",{className:"p-4 bg-transparent",children:r.jsx(DT,{})})})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Categories"}),r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:L.map(ee=>r.jsxs("button",{onClick:()=>t(`/customer/category/${ee.id}`),className:"flex-none flex flex-col items-center gap-2 w-20",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white shadow flex items-center justify-center text-2xl hover:scale-105 transition",children:ee.icon}),r.jsx("div",{className:"text-xs text-center",children:ee.name})]},ee.id))})]}),M.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Order Again"}),r.jsx("div",{className:"flex gap-3 overflow-x-auto",children:M.map(ee=>r.jsxs("div",{className:"flex-none bg-white rounded-lg p-3 shadow w-56",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:["#",ee.id]}),r.jsx("div",{className:"font-semibold mt-1",children:ee.store||"Store"}),r.jsx("div",{className:"text-sm text-slate-500 mt-2",children:(ee.items||[]).slice(0,2).map(de=>`${de.quantity||de.qty||1}x`).join(" ")}),r.jsx("div",{className:"mt-3 flex gap-2",children:r.jsx("button",{onClick:()=>{alert("Reorder (mock)")},className:"px-3 py-1 bg-indigo-600 text-white rounded",children:"Reorder"})})]},ee.id))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Nearby Stores"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(N?Array.from({length:6}):T).map((ee,de)=>{if(N)return r.jsx(AT,{},de);const he=S.find(B=>B.store===ee)||{},X=(re.find(B=>B.name===ee||B.username===ee)||{}).status!=="active";return r.jsxs("div",{onClick:()=>t(`/customer/store/${encodeURIComponent(ee)}`),role:"button",tabIndex:0,className:`bg-white rounded-lg shadow overflow-hidden relative ${X?"filter grayscale opacity-70":""} cursor-pointer`,children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:he.image,alt:ee,className:"w-full h-44 object-cover"}),r.jsxs("div",{className:"absolute top-3 left-3 bg-white/90 text-sm rounded-full px-3 py-1 font-semibold",children:[he.prepMinutes||"25"," min"]}),r.jsxs("div",{className:"absolute top-3 right-3 bg-white/90 text-sm rounded-full px-2 py-1 flex items-center gap-1",children:[" ",he.rating||4.5]}),X&&r.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center text-white text-xl font-bold",children:"Closed Now"})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"font-semibold",children:ee}),r.jsx("div",{className:"text-sm text-slate-500",children:mt().find(B=>B.name===ee)?.region||""})]}),r.jsx("div",{className:"mt-2 text-sm text-slate-500",children:he.name?.en||he.name||"Popular items"}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsx("div",{}),r.jsx("div",{})]})]})]},ee)})})]})]}),n.length>0&&r.jsx("div",{className:"fixed bottom-16 left-0 right-0 z-50 flex justify-center",children:r.jsx("div",{className:"max-w-6xl w-full px-4",children:r.jsxs("div",{className:"bg-white rounded-full shadow-lg p-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 text-white rounded-full w-10 h-10 flex items-center justify-center",children:""}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[n.length," items  $",R()]}),r.jsx("div",{className:"text-xs text-slate-500",children:"Quick checkout"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>t("/customer/cart"),className:"px-4 py-2 bg-slate-100 rounded",children:"View Cart"}),r.jsx("button",{onClick:Z,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Place Order"})]})]})})}),E&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:r.jsxs("div",{className:"bg-black/70 p-6 rounded-lg flex flex-col items-center gap-4 text-white",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-3xl",children:""}),r.jsx("div",{className:"font-semibold",children:"Order Confirmed"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Your order is on the way  tracking will appear in Orders."})]})}),r.jsx(In,{})]})}function IT(){const{categoryId:t}=hi(),e=Pe(),{addItem:s}=mi(),n=decodeURIComponent(t||""),o=(n||"").toString().toLowerCase(),l=Yv.find(c=>c.id===t||c.name&&(c.name===n||c.name===decodeURIComponent(t||"")));return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e("/customer/home"),className:"text-2xl hover:opacity-70 transition",children:""}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l&&l.name||n})]})}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 w-full flex-1",children:r.jsxs("div",{className:`${l&&l.color||"bg-white"} rounded-xl p-8 text-center`,children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:Be.filter(c=>{if(c.role!=="store")return!1;const d=(c.category||"").toString().toLowerCase(),h=(c.name||"").toString().toLowerCase();return d.includes(o)||h.includes(o)}).map(c=>r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow hover:shadow-md transition",children:[r.jsx("div",{className:"h-40 rounded-lg mb-2 overflow-hidden",children:r.jsx("img",{src:c.image||"https://via.placeholder.com/400x300",alt:c.name,className:"w-full h-full object-cover"})}),r.jsx("h3",{className:"font-semibold text-gray-800",children:c.name}),r.jsx("p",{className:"text-gray-600 text-sm",children:c.email||c.phone}),r.jsx("div",{className:"mt-3 flex gap-2",children:r.jsx("button",{onClick:()=>e(`/customer/store/${encodeURIComponent(c.name)}`),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Visit Store"})})]},c.id))}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:" /  "}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Oe().filter(c=>{const d=c.name&&typeof c.name=="object"?c.name.ar||c.name.en||"":c.name||"",h=((c.category||"")+"").toString().toLowerCase(),f=(d||"").toString().toLowerCase();return h.includes(o)||f.includes(o)}).map(c=>r.jsxs("div",{className:"bg-white rounded-lg p-3 shadow",children:[r.jsx("img",{src:c.image||`https://source.unsplash.com/400x300/?${encodeURIComponent(c.name||c.title||"product")}`,className:"w-full h-36 object-cover rounded mb-2"}),r.jsx("div",{className:"font-semibold text-black",children:c.name&&c.name.ar||c.name&&c.name.en||c.name||c.title}),r.jsxs("div",{className:"text-sm text-slate-500",children:["$",c.price||0]}),r.jsx("div",{className:"mt-2",children:r.jsx("button",{onClick:()=>{s(c,1)},className:"px-3 py-1 rounded bg-indigo-600 text-white",children:" "})})]},c.id))})]}),Oe().filter(c=>{const d=((c.category||"")+"").toString().toLowerCase(),h=c.name&&typeof c.name=="object"?c.name.ar||c.name.en||"":c.name||"";return d.includes(o)||(h||"").toString().toLowerCase().includes(o)}).length===0&&r.jsx("div",{className:"mt-6 text-center text-slate-600",children:"     ."})]})}),r.jsx(In,{})]})}function LT(){const t=Pe(),[e,s]=te.useState(()=>Ae()),[n,o]=te.useState(null);te.useEffect(()=>{const c=Cs(d=>{(d.type==="tick"||d.type==="order"||d.type==="app:newOrder"||d.type==="app:order:update")&&s([...Ae()])});return()=>c()},[]);function l(){o(null)}return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24 text-black",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:r.jsx("h1",{className:"text-2xl font-bold text-black",children:"My Orders"})})}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6 w-full flex-1",children:e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg",children:"No orders yet"}),r.jsx("button",{onClick:()=>t("/customer/home"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue Shopping"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Active Orders"}),r.jsx("div",{className:"space-y-3",children:e.filter(c=>!["delivered","cancelled"].includes(c.status)).map(c=>r.jsx("button",{onClick:()=>o(c),className:"w-full text-left bg-white p-4 rounded-lg shadow hover:shadow-md transition",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Order #",c.id]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[c.items.length," items"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-black",children:["$",c.total]}),r.jsx("p",{className:`text-xs font-medium ${c.status==="delivered"?"text-green-600":"text-orange-600"}`,children:c.status.toUpperCase()})]})]})},c.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Past Orders"}),r.jsx("div",{className:"space-y-3",children:e.filter(c=>["delivered","cancelled"].includes(c.status)).map(c=>r.jsx("button",{onClick:()=>o(c),className:"w-full text-left bg-white p-4 rounded-lg shadow hover:shadow-md transition",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Order #",c.id]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[c.items.length," items"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-black",children:["$",c.total]}),r.jsx("p",{className:`text-xs font-medium ${c.status==="delivered"?"text-green-600":"text-red-600"}`,children:c.status.toUpperCase()})]})]})},c.id))})]})]})}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-11/12 max-w-3xl max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:["Order #",n.id]}),r.jsx("button",{onClick:l,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsxs("div",{className:"prose text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Status:"})," ",n.status]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total:"})," $",n.total]}),r.jsx("h4",{className:"mt-3",children:"Items"}),r.jsx("ul",{className:"list-disc pl-6",children:(n.items||[]).map((c,d)=>r.jsxs("li",{children:[c.productId?`Product #${c.productId}`:c.name,"  qty: ",c.qty||c.quantity||1]},d))})]})]})}),r.jsx(In,{})]})}function FT(){const t=Pe(),[e,s]=C.useState(!1),n=[{id:1,title:" Get up to 50% off on selected items",discount:"Up to 50% OFF",category:"Selected",icon:""},{id:2,title:"Free Delivery over $20",discount:"Free Delivery",category:"Delivery",icon:""},{id:3,title:"Buy 2 Get 1 Free",discount:"Buy 2 Get 1",category:"Bakery",icon:""}],o=["Coffee Bazaar","Fashion Hub","Books Gallery","Tech Store","Electronics","Home Dcor"],l=mt().filter(c=>c.role==="store");return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24 text-black",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-black",children:" Special Offers"}),r.jsx("button",{onClick:()=>s(!0),className:"ml-auto px-4 py-2 bg-yellow-400 text-black rounded shadow",children:"Offers"})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 w-full flex-1",children:[r.jsx("div",{className:"mb-4 bg-white rounded p-4 shadow",children:r.jsx("p",{className:"font-semibold",children:'Get up to 50% off on selected items. Tap "Offers" to explore deals!'})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(c=>r.jsxs("button",{onClick:()=>alert(`${c.title}  ${c.discount}`),className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white shadow hover:shadow-lg transition",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"text-3xl",children:c.icon}),r.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:"HOT"})]}),r.jsx("h3",{className:"text-lg font-bold mb-1",children:c.title}),r.jsx("p",{className:"text-sm opacity-90",children:c.discount})]},c.id))}),r.jsxs("div",{className:"mt-6 bg-white rounded p-4 shadow",children:[r.jsx("h3",{className:"font-semibold mb-3",children:""}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map((c,d)=>r.jsxs("div",{className:"bg-slate-100 p-3 rounded flex items-center justify-between cursor-pointer",onClick:()=>t("/customer/home"),children:[r.jsx("div",{className:"font-semibold text-red-900",children:c}),r.jsx("div",{className:"text-sm text-slate-500",children:l[d]&&l[d].category||""})]},c))})]})]}),e&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-black/70 p-6 rounded w-11/12 max-w-lg text-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:" Active Offers"}),r.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsx("div",{className:"space-y-3",children:n.map(c=>r.jsxs("div",{className:"p-3 border rounded bg-black/50",children:[r.jsx("p",{className:"font-semibold",children:c.title}),r.jsxs("p",{className:"text-sm text-slate-300",children:[c.discount,"  ",c.category]})]},c.id))})]})}),r.jsx(In,{})]})}function VT(){const t=Pe(),{lang:e}=cr(),{items:s,changeQty:n,removeItem:o,clearCart:l}=mi(),c=s.reduce((S,_)=>S+_.price*_.qty,0),[d,h]=C.useState(""),[f,p]=C.useState(!1),[g,y]=C.useState(""),j=Math.max(0,c-(f?3:0)),N=S=>{o(S)},w=(S,_)=>{n(S,_)};return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Shopping Cart"})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6 w-full flex-1",children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Your cart is empty"}),r.jsx("button",{onClick:()=>t("/customer/home"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue Shopping"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 mb-6",children:s.map(S=>r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-16 rounded overflow-hidden bg-gray-100",children:r.jsx("img",{src:S.image||"https://picsum.photos/seed/p2/200/150",alt:typeof S.name=="object"?S.name[e]||S.name.en:S.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:typeof S.name=="object"?S.name[e]||S.name.en||JSON.stringify(S.name):S.name}),r.jsxs("p",{className:"text-black font-bold",children:["$",Number(S.price).toFixed(2)]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[" : ",S.qty]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(S.id,S.qty-1),className:"px-2 py-1 bg-black text-white rounded hover:bg-gray-800",children:""}),r.jsx("span",{className:"w-8 text-center font-semibold",children:S.qty}),r.jsx("button",{onClick:()=>w(S.id,S.qty+1),className:"px-2 py-1 bg-black text-white rounded hover:bg-gray-800",children:"+"})]}),r.jsx("button",{onClick:()=>N(S.id),className:"ml-2 bg-black text-white rounded px-2 py-1 hover:bg-gray-800",children:""})]},S.id))}),r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow mb-4",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{value:d,onChange:S=>{h(S.target.value),y("")},placeholder:" ",className:"flex-1 border rounded px-3 py-2"}),r.jsx("button",{onClick:()=>{if(d==="123123"){p(!0),y("");try{localStorage.setItem("coupon",JSON.stringify({code:d,applied:!0}))}catch{}alert("  : 3 ")}else p(!1),y("  ")},className:"px-4 py-2 bg-green-600 text-white rounded",children:""})]}),g&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:g}),f&&r.jsx("div",{className:"text-green-600 text-sm mt-1",children:"  :  3 "})]}),r.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-gray-900 mb-2",children:[r.jsx("span",{children:" :"}),r.jsxs("span",{className:"text-gray-700",children:["$",c.toFixed(2)]})]}),f&&r.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-gray-900 mb-2",children:[r.jsx("span",{children:":"}),r.jsx("span",{className:"text-red-600",children:"- 3 "})]}),r.jsxs("div",{className:"flex justify-between items-center text-xl font-extrabold text-gray-900 mb-4",children:[r.jsx("span",{children:":"}),r.jsxs("span",{className:"text-black",children:["$",j.toFixed(2)]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{try{localStorage.setItem("coupon",JSON.stringify({code:d,applied:f}))}catch{}t("/customer/checkout")},className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold transition",children:"Proceed to Checkout"}),r.jsx("button",{onClick:async()=>{try{const S=s;if(!S||S.length===0)return alert("Cart is empty");const _=S.map($=>({productId:$.productId||$.id,quantity:$.qty})),T=S.reduce(($,z)=>$+(z.price||0)*(z.qty||1),0),O=null,E=(function(){try{const $=JSON.parse(localStorage.getItem("ecom_users")||"[]");return null}catch{return null}})();try{const $=window.__CURRENT_USER_ID__||E&&E.id||0;es.placeOrder({userId:$,items:_,total:T,payment:{method:"wallet"},store:S[0]?.store||""})}catch{}l(),alert("Order placed (demo). Cart cleared.")}catch(S){alert("Order failed: "+(S.message||S))}},className:"flex-1 border rounded-lg py-3",children:"Place Order (simulate)"})]})]})]})}),r.jsx(In,{})]})}const zT=[{id:"C10",title:"10% off",discount:"10%",stores:["Coffee Bazaar","Fashion Hub"],expires:"2026-01-31"},{id:"F5",title:"5 JD off",discount:"5 JOD",stores:["Grocery Plus",""],expires:"2026-02-15"},{id:"FREEDEL",title:"Free Delivery",discount:"Free delivery",stores:["All stores"],expires:"2026-03-01"}];function BT(){return r.jsx(tt,{children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Coupons"}),r.jsx("div",{className:"space-y-3",children:zT.map(t=>r.jsxs("div",{className:"p-4 border rounded flex justify-between items-center bg-white/5",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[t.title," ",r.jsxs("span",{className:"text-sm text-slate-400",children:["(",t.id,")"]})]}),r.jsxs("div",{className:"text-sm text-slate-300",children:["Discount: ",t.discount]}),r.jsxs("div",{className:"text-sm text-slate-300",children:["Stores: ",t.stores.join(", ")]}),r.jsxs("div",{className:"text-sm text-slate-400",children:["Expires: ",t.expires]})]}),r.jsx("div",{children:r.jsx("button",{className:"px-3 py-2 bg-indigo-600 rounded text-white",children:"View"})})]},t.id))})]})})}const G0="password_reset_tokens_v1";function $T(t){try{const e=JSON.parse(localStorage.getItem(G0)||"{}");e[t.token]=t,localStorage.setItem(G0,JSON.stringify(e))}catch{}}function UT(){const[t,e]=C.useState(""),[s,n]=C.useState(!1),[o,l]=C.useState(""),c=Pe();function d(h){h.preventDefault();const p=mt().find(j=>(j.email||"").toLowerCase()===(t||"").toLowerCase());if(!p)return alert("No account found for that email");const g=Math.random().toString(36).slice(2,9),y={token:g,email:p.email,userId:p.id,createdAt:Date.now(),expiresAt:Date.now()+1e3*60*30};$T(y);const b=`${location.origin}/reset-password/${g}`;l(b),n(!0),setTimeout(()=>{},800)}return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:r.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-center mb-2",children:"Reset your password"}),r.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"Enter the email for your account and we'll send a reset link (simulated)."}),s?r.jsxs("div",{className:"text-center py-6",children:[r.jsx("div",{className:"text-green-600 font-medium mb-2",children:"Reset link generated"}),r.jsx("div",{className:"text-sm text-gray-500 mb-3",children:"Use the link below to reset your password (demo)."}),r.jsx("div",{className:"bg-slate-100 p-3 rounded text-sm break-all",children:o}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsx("button",{onClick:()=>navigator.clipboard&&o?navigator.clipboard.writeText(o):alert(o),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Copy"}),r.jsx("button",{onClick:()=>c("/login"),className:"px-3 py-2 border rounded",children:"Done"})]})]}):r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Email"}),r.jsx("input",{type:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"mt-1 block w-full rounded-lg border-gray-200 shadow-sm p-2"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg",children:"Send reset"}),r.jsx("button",{type:"button",onClick:()=>c("/login"),className:"flex-1 border border-gray-200 py-2 rounded-lg",children:"Cancel"})]})]})]})})}const nh="password_reset_tokens_v1";function WT(t){try{return JSON.parse(localStorage.getItem(nh)||"{}")[t]}catch{return null}}function HT(){const{token:t}=hi(),e=Pe(),[s,n]=C.useState(!1),[o,l]=C.useState(""),[c,d]=C.useState("");C.useEffect(()=>{const f=WT(t);if(!f||f.expiresAt&&Date.now()>f.expiresAt)return n(!1);n(!0),l(f.email||"")},[t]);function h(f){if(f.preventDefault(),!s)return alert("Invalid or expired token");const p=Be.findIndex(g=>(g.email||"").toLowerCase()===(o||"").toLowerCase());if(p===-1)return alert("User not found");Be[p].password=c;try{Dn()}catch{}try{const g=JSON.parse(localStorage.getItem(nh)||"{}");delete g[t],localStorage.setItem(nh,JSON.stringify(g))}catch{}alert("Password reset  you can now login"),e("/login")}return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:r.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-center mb-2",children:"Set a new password"}),s?r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Resetting for: ",r.jsx("strong",{children:o})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"New Password"}),r.jsx("input",{type:"password",required:!0,value:c,onChange:f=>d(f.target.value),className:"mt-1 block w-full rounded-lg border-gray-200 shadow-sm p-2"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg",children:"Set Password"}),r.jsx("button",{type:"button",onClick:()=>e("/login"),className:"flex-1 border border-gray-200 py-2 rounded-lg",children:"Cancel"})]})]}):r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Invalid or expired reset link."})]})})}function qT({open:t,product:e,onClose:s}){return!t||!e?null:r.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/60",children:r.jsxs(Zt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-[90%] max-w-2xl bg-slate-900 glass-card rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("img",{src:e.image,alt:e.name?.en,className:"w-36 h-36 object-cover rounded-lg"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:e.name?.en||e.name}),r.jsx("div",{className:"text-sm text-slate-300 mt-2",children:e.description||"No description available."}),r.jsxs("div",{className:"mt-3 text-lg font-bold text-orange-400",children:["$",e.price]})]})]}),r.jsx("button",{onClick:s,className:"p-2",children:r.jsx(kT,{})})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("div",{className:"text-sm text-slate-400",children:["Roast: ",e.roast||"Medium","  Origin: ",e.origin||"Unknown"]})})]})})}function YT({open:t,total:e,items:s,user:n,onClose:o,onSuccess:l}){const[c,d]=C.useState("wallet"),[h,f]=C.useState({number:"",name:"",exp:"",cvv:""}),[p,g]=C.useState(!1);if(!t)return null;async function y(){g(!0);try{if(c==="wallet"){if(!Dx.deduct(e))return alert("Insufficient wallet balance")}else if(c==="credit"&&(!h.number||!h.name))return alert("Enter mock card details");const b=es.placeOrder({userId:n?.id||2,items:s.map(j=>({productId:j.productId,qty:j.qty})),total:e,payment:{method:c},store:s[0]?.store||""});l&&l(b),o&&o()}catch(b){alert(b.message||"Payment failed")}g(!1)}return r.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/40",children:r.jsxs(Zt.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"w-11/12 max-w-md bg-white rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Choose Payment"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"radio",checked:c==="wallet",onChange:()=>d("wallet")}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:"Wallet"}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Balance: $",Dx.getBalance()]})]})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"radio",checked:c==="credit",onChange:()=>d("credit")}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:"Credit Card"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Enter mock card details"})]})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"radio",checked:c==="cash",onChange:()=>d("cash")}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:"Cash on Delivery"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Pay when the courier arrives"})]})]}),c==="credit"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{placeholder:"Card number",value:h.number,onChange:b=>f({...h,number:b.target.value}),className:"w-full border p-2 rounded"}),r.jsx("input",{placeholder:"Name on card",value:h.name,onChange:b=>f({...h,name:b.target.value}),className:"w-full border p-2 rounded"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{placeholder:"MM/YY",value:h.exp,onChange:b=>f({...h,exp:b.target.value}),className:"flex-1 border p-2 rounded"}),r.jsx("input",{placeholder:"CVV",value:h.cvv,onChange:b=>f({...h,cvv:b.target.value}),className:"w-24 border p-2 rounded"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[r.jsx("button",{onClick:o,className:"px-3 py-2 bg-gray-200 rounded",children:"Cancel"}),r.jsxs("button",{onClick:y,disabled:p,className:"px-4 py-2 bg-emerald-600 text-white rounded",children:["Confirm $",e.toFixed(2)]})]})]})]})})}function KT({product:t,lang:e="en",onQuickView:s,onAdd:n,wobble:o}){const{items:l,addItem:c,changeQty:d,removeItem:h}=mi(),f=l.find(g=>g.id===t.id);function p(g){g.stopPropagation(),c(t,1),n&&n(t)}return r.jsxs(Zt.div,{layout:!0,initial:{opacity:0,y:8},animate:{opacity:1,y:0},whileHover:{scale:1.03},transition:{duration:.2},className:"relative bg-[rgba(0,0,0,0.5)] rounded-2xl overflow-hidden p-3 cursor-pointer text-white",style:{border:"1px solid rgba(0,0,0,0.06)"},onClick:()=>s&&s(t),role:"button",tabIndex:0,children:[r.jsx("div",{className:"h-40 w-full rounded-lg overflow-hidden mb-3",children:r.jsx("img",{src:t?.image,alt:t?.name?.en,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold",children:t?.name?.[e]||t?.name}),r.jsx("div",{className:"text-xs opacity-90",children:t?.store})]}),r.jsxs("div",{className:"text-lg font-bold",children:["$",(t?.price||0).toFixed(2)]})]}),r.jsx("div",{className:"mt-3",children:f?r.jsxs("div",{className:"bg-black/60 p-2 rounded flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm",children:[" : ",f.qty]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:g=>{g.stopPropagation(),d(t.id,Math.max(0,(f.qty||1)-1))},className:"px-2 py-1 bg-black/30 rounded",children:""}),r.jsx("div",{className:"w-6 text-center",children:f.qty}),r.jsx("button",{onClick:g=>{g.stopPropagation(),d(t.id,(f.qty||1)+1)},className:"px-2 py-1 bg-black/30 rounded",children:"+"}),r.jsx("button",{onClick:g=>{g.stopPropagation(),h(t.id)},className:"ml-2 px-2 py-1 bg-black/30 rounded",children:""})]})]}):r.jsx("button",{onClick:p,className:"w-full px-3 py-2 bg-indigo-600 rounded",children:"Add"})})]})}const Q0=te.memo(KT);function GT({storeName:t,onClose:e,onSubmitted:s}){const[n,o]=C.useState(""),[l,c]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(""),[g,y]=C.useState("All"),[b,j]=C.useState(""),[N,w]=C.useState("");C.useEffect(()=>{t&&o(`  ${decodeURIComponent(t)}`)},[t]);function S(_){_&&_.preventDefault();const T=Date.now(),O={id:"offer-"+T,title:n.trim(),subtitle:l.trim(),image:d.trim()||null,discount:Number(f||0),region:g||"All",store:t?decodeURIComponent(t):null,status:"approved",createdAt:T,startDate:b||null,endDate:N||null};try{const E=JSON.parse(localStorage.getItem("APPROVED_OFFERS")||"[]");E.unshift(O),localStorage.setItem("APPROVED_OFFERS",JSON.stringify(E))}catch(E){console.error("Failed to save offer",E)}s&&s(O),e&&e()}return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:e}),r.jsxs("form",{onSubmit:S,className:"bg-white rounded-lg p-6 z-10 w-full max-w-xl",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"         "}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{value:n,onChange:_=>o(_.target.value),placeholder:"  Coffee Bazaar",className:"w-full border px-3 py-2 rounded",required:!0}),r.jsx("input",{value:l,onChange:_=>c(_.target.value),placeholder:" ",className:"w-full border px-3 py-2 rounded"}),r.jsx("input",{value:d,onChange:_=>h(_.target.value),placeholder:"  ()",className:"w-full border px-3 py-2 rounded"}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{value:f,onChange:_=>p(_.target.value),placeholder:" ",type:"number",min:"0",max:"100",className:"w-1/3 border px-3 py-2 rounded",required:!0}),r.jsx("select",{value:g,onChange:_=>y(_.target.value),className:"flex-1 border px-3 py-2 rounded",children:r.jsx("option",{value:"All",children:""})})]}),r.jsxs("div",{className:"flex gap-2 mt-2 items-center",children:[r.jsx("label",{className:"text-sm",children:":"}),r.jsx("input",{value:b,onChange:_=>j(_.target.value),type:"date",className:"border px-3 py-2 rounded"}),r.jsx("label",{className:"text-sm",children:":"}),r.jsx("input",{value:N,onChange:_=>w(_.target.value),type:"date",className:"border px-3 py-2 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:e,className:"px-3 py-2 rounded bg-slate-100",children:""}),r.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-indigo-600 text-white",children:" "})]})]})]})]})}function QT({storeName:t,onCustomerClick:e}){const[s,n]=C.useState(null),[o,l]=C.useState(!1),{user:c}=pt()||{},d=Pe();C.useEffect(()=>{try{const g=JSON.parse(localStorage.getItem("APPROVED_OFFERS")||"[]").filter(y=>t?!y.store||y.store===decodeURIComponent(t):!0);n(g.length?g[0]:null)}catch{n(null)}},[t]);const h="linear-gradient(90deg, #d63384 0%, #7c3aed 50%, #f97316 100%)";function f(){if(c&&c.role==="store"&&(decodeURIComponent(t||"")===c.username||decodeURIComponent(t||"")===c.name)){l(!0);return}if(typeof e=="function")return e(s);if(s&&s.category){d(`/customer/category/${encodeURIComponent(s.category)}`);return}d("/customer")}return r.jsxs("div",{className:"max-w-6xl mx-auto mb-6 px-4",children:[r.jsxs("div",{onClick:f,className:"rounded-2xl overflow-hidden shadow-lg cursor-pointer",style:{background:h},children:[r.jsxs("div",{className:"flex items-center gap-4 p-6",children:[r.jsx("div",{className:"w-28 h-28 bg-white/20 rounded-lg flex-shrink-0 overflow-hidden border border-white/20",children:r.jsx("img",{src:s?.image||"https://via.placeholder.com/160x160/ffffff/000000?text=Image",alt:"offer",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 text-white",children:[r.jsx("div",{className:"text-2xl font-extrabold",children:s?.title||"Hot Offer #2"}),r.jsx("div",{className:"mt-2 text-sm opacity-90",children:s?.subtitle||"Free delivery on orders above $20. Limited time only."})]})]}),r.jsx("div",{className:"h-12 flex items-center justify-center",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-white/60"}),r.jsx("span",{className:"w-2 h-2 rounded-full bg-white/40"}),r.jsx("span",{className:"w-2 h-2 rounded-full bg-white/30"})]})})]}),o&&r.jsx(GT,{storeName:t,onClose:()=>l(!1),onSubmitted:()=>{}})]})}const X0={tech:["Laptops","Smartphones","Accessories","Gaming","PC Components","Offers"],supermarket:["Snacks","Dairy","Frozen","Beverages","Personal Care"],restaurant:["Main Meals","Sides","Drinks","Desserts"]};function XT(t,e,s){const n=t&&t.category||"",o=(e||"").toLowerCase();if(/tech|electronics|computer|gadget/.test(n)||/tech|electronics|computer|gadget/.test(o))return"tech";if(/groc|supermarket|grocery|market/.test(n)||/grocery|supermarket|market/.test(o))return"supermarket";if(/restaur|restaurant|cafe|food/.test(n)||/restaurant|cafe|bistro/.test(o))return"restaurant";const l=(s||[]).map(c=>(c.name?.en||c.name||"")+" "+(c.description||"")).join(" ").toLowerCase();return l.includes("laptop")||l.includes("smartphone")||l.includes("gpu")?"tech":l.includes("milk")||l.includes("snack")||l.includes("frozen")?"supermarket":"restaurant"}function JT(t,e,s){const n=(e||"").toLowerCase(),o={primary:"#f97316",accent:"#06b6d4",bg:"rgba(15,23,42,0.55)",text:"#ffffff"};return t&&/caf/.test((t.category||"").toLowerCase())||/coffee|cafe|espresso/.test(n)||s==="restaurant"?{primary:"#2D1B13",accent:"#d4a373",bg:"rgba(45,27,19,0.6)",text:"#f8efe6"}:s==="tech"?{primary:"#0ea5e9",accent:"#8b5cf6",bg:"rgba(6,8,17,0.6)",text:"#e6f7ff"}:s==="supermarket"?{primary:"#16a34a",accent:"#f59e0b",bg:"rgba(6,17,10,0.6)",text:"#f3fff4"}:o}function ZT(){const{storeName:t}=hi(),e=Pe(),{lang:s}=cr(),{user:n}=pt()||{},[o,l]=C.useState(!0),[c,d]=C.useState(()=>Oe()),[h,f]=C.useState(null),[p,g]=C.useState("preparing"),[y,b]=C.useState(null);C.useMemo(()=>({name:n&&n.name||" ",phone:"0912345678",location:"  12"}),[n]);const{items:j,addItem:N,changeQty:w}=mi(),[S,_]=C.useState(null),[T,O]=C.useState(""),[E,$]=C.useState(null),z=C.useRef({}),[L,M]=C.useState(null),[R,Z]=C.useState(!1),[re,ee]=C.useState(!1),[de,he]=C.useState(!1);C.useEffect(()=>{l(!0);const W=decodeURIComponent(t||""),ie=(Oe().filter(ye=>ye.store===W&&ye.active!==!1)||[]).map(ye=>({...ye,id:typeof ye.id>"u"||ye.id===null?`generated-${Math.random().toString(36).slice(2,9)}`:ye.id}));d(ie),f(mt().find(ye=>ye.role==="store"&&(ye.name===W||ye.username===W))||null),setTimeout(()=>l(!1),120);function ue(){try{const ye=new(window.AudioContext||window.webkitAudioContext),Re=ye.createOscillator(),Ke=ye.createGain();Re.type="sine",Re.frequency.value=880,Ke.gain.value=.05,Re.connect(Ke),Ke.connect(ye.destination),Re.start(),setTimeout(()=>{Re.stop(),ye.close().catch(()=>{})},120)}catch{}}const ke=Cs(ye=>{if(ye&&(ye.type==="order"&&ue(),ye&&(ye.type==="update"||ye.type==="order"||ye.type==="tick"))){const Re=Oe().filter(Ke=>Ke.store===W&&Ke.active!==!1);d(Re)}});return()=>ke()},[t]),C.useEffect(()=>{Array.isArray(c)||d([])},[c]);const V=decodeURIComponent(t||h&&h.name||"Store"),X=C.useMemo(()=>XT(h,V,c),[h,V,c]);let B=X0[X]||X0.restaurant;C.useMemo(()=>JT(h,V,X),[h,V,X]);const q=["  ",""," "," ",""," "," "," ",""," ","  ","",""," ","  "," ","  ","  "," "," "," "," "," "," "," "],se={"  ":pT,:void 0," ":yT," ":lT,:cT," ":wT," ":Hb," ":gT,:CT," ":uT,"  ":mT,:vT,:pu," ":pu,"  ":fT," ":NT,"  ":bT,"  ":hT," ":pu," ":ST," ":jT," ":xT," ":void 0," ":void 0," ":dT},D={"  ":[{id:"sample-meat",name:{ar:" ",en:"Chicken Breast"},price:7.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Meat"}],:[{id:"sample-bakery",name:{ar:" ",en:"Fresh Bread"},price:1.2,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Bakery"}]," ":[{id:"sample-fresh",name:{ar:" ",en:"Fresh Salad"},price:3.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Fresh"}]," ":[{id:"sample-fruit",name:{ar:" ",en:"Apple"},price:.9,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Fruits"}],:[{id:"sample-canned",name:{ar:" ",en:"Canned Vegetables"},price:2.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Canned"}]," ":[{id:"sample-personal",name:{ar:"",en:"Shampoo"},price:4.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Personal"}]," ":[{id:"sample-beauty",name:{ar:" ",en:"Moisturizer"},price:9.9,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Beauty"}]," ":[{id:"sample-home",name:{ar:" ",en:"Multi Cleaner"},price:5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Home"}],:[{id:"sample-tobacco",name:{ar:"",en:"Tobacco"},price:6,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Tobacco"}]," ":[{id:"sample-cook",name:{ar:" ",en:"Baking Flour"},price:2.2,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Cooking"}],"  ":[{id:"sample-dairy",name:{ar:"",en:"Cheese"},price:3.75,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Dairy"}],:[{id:"sample-milk",name:{ar:"  ",en:"Whole Milk"},price:1.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Milk"}],:[{id:"sample-drink",name:{ar:" ",en:"Orange Juice"},price:2.8,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Drinks"}]," ":[{id:"sample-breakfast",name:{ar:" ",en:"Cereal"},price:3.2,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Breakfast"}],"  ":[{id:"sample-protein",name:{ar:" ",en:"Protein Powder"},price:19.99,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Protein"}]," ":[{id:"sample-kids",name:{ar:" ",en:"Baby Milk"},price:6.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Kids"}],"  ":[{id:"sample-office",name:{ar:" ",en:"Notebook"},price:1.1,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Office"}],"  ":[{id:"sample-snack",name:{ar:"",en:"Chocolate"},price:1.75,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Snacks"}]," ":[{id:"sample-coffee",name:{ar:" ",en:"Coffee"},price:5.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Coffee"}]," ":[{id:"sample-disposable",name:{ar:"",en:"Disposable Plates"},price:2,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Disposable"}]," ":[{id:"sample-frozen",name:{ar:" ",en:"Frozen Sausages"},price:4.5,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Frozen"}]," ":[{id:"sample-icecream",name:{ar:"  ",en:"Vanilla Ice Cream"},price:2.99,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=IceCream"}]," ":[{id:"sample-spice",name:{ar:" ",en:"Mixed Spices"},price:1.8,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Spices"}]," ":[{id:"sample-clean",name:{ar:" ",en:"Laundry Detergent"},price:6,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Cleaning"}]," ":[{id:"sample-ready",name:{ar:" ",en:"Ready Sandwich"},price:3.99,image:"https://via.placeholder.com/400x300/FFFFFF/000000?text=Ready"}]},G=C.useMemo(()=>{const W=(T||"").toLowerCase().trim();return W?q.filter(J=>J.toLowerCase().includes(W)):q},[q,T]),xe={"  ":["chicken","meat","fish","poultry","","",""],:["bread","bakery","muffin","","bakery"]," ":["fresh","fresh food",""]," ":["fruit","vegetable","apple","banana","",""],:["canned","can",""]," ":["shampoo","soap","toothpaste","personal",""]," ":["beauty","cosmetic","skincare","makeup",""]," ":["home","cleaner","kitchen","household",""],:["tobacco","cigarette",""]," ":["cook","cooking","baking","flour","bakery","",""],"  ":["dairy","cheese","yogurt","egg","",""],:["milk",""],:["drink","beverage","juice","soda","coffee","tea","",""]," ":["breakfast","cereal","granola",""],"  ":["protein","protein powder","diet","protein"]," ":["baby","kids","",""],"  ":["office","stationery","pen","toy","game"],"  ":["snack","chips","cookie","chocolate","sweet"]," ":["coffee","tea","",""]," ":["disposable","single-use","",""]," ":["frozen","","frozen food"]," ":["ice cream"," "]," ":["spice","sauce","salt","pepper","",""]," ":["detergent","cleaner","laundry","soap","",""]," ":["ready","ready meal","meal","","pack"]},ge=C.useMemo(()=>{const W={};for(const ie of q)W[ie]=[];const J=[];for(const ie of c){const ue=`${ie.name&&typeof ie.name=="object"?ie.name.ar||ie.name.en:ie.name||""} ${ie.description||""} ${ie.category||""} ${(ie.tags||[]).join(" ")}`.toLowerCase();let ke=!1;for(const ye of q){const Re=xe[ye]||[];for(const Ke of Re)if(Ke&&ue.includes(Ke)){W[ye].push(ie),ke=!0;break}if(ke)break}ke||J.push(ie)}J.length&&W[" "]&&(W[" "]=W[" "].concat(J));for(const ie of q)(W[ie]||[]).length===0&&D[ie]&&D[ie].length&&(W[ie]=(W[ie]||[]).concat(D[ie]));return W},[c]);function Se(W){const J=(T||"").toLowerCase().trim(),ie=ge[W]||[];return J?ie.filter(ue=>(ue.name&&typeof ue.name=="object"?ue.name[s]||ue.name.en||"":ue.name||"").toString().toLowerCase().includes(J)||(ue.description||"").toLowerCase().includes(J)):ie}function we(W){N(W,1)}function K(W,J){const ie=j.find(ke=>ke.id===W),ue=ie?Math.max(0,(ie.qty||0)+J):Math.max(0,J);w(W,ue)}function F(W){e(`/customer/category/${encodeURIComponent(W)}`)}C.useMemo(()=>{const W=(T||"").toLowerCase().trim();return W?c.filter(J=>(J.name&&typeof J.name=="object"?J.name[s]||J.name.en:J.name||"").toString().toLowerCase().includes(W)):c},[c,T,s]);const ne=j.reduce((W,J)=>W+(J.qty||0),0),Q=j.reduce((W,J)=>W+(J.qty||0)*(J.price||0),0);return r.jsxs("div",{className:"min-h-screen bg-white pb-28",children:[r.jsx("div",{className:"sticky top-0 z-30 bg-white border-b py-3 px-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e(-1),className:"px-2 py-1 rounded bg-slate-100",children:""}),r.jsx("div",{className:"font-black text-black",children:V})]}),r.jsx("div",{className:"flex-1 px-4",children:r.jsx("input",{value:T,onChange:W=>O(W.target.value),placeholder:"Search",className:"w-full border-2 border-black rounded-2xl px-4 py-2 font-black text-black"})}),r.jsx("div",{})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[r.jsx(QT,{storeName:t,onCustomerClick:W=>{const J=c.find(ie=>{const ue=ie.name&&typeof ie.name=="object"?ie.name[s]||ie.name.en||"":ie.name||"";return W&&W.title&&ue.toString().toLowerCase().includes((W.title||"").toLowerCase())})||c[0];J&&_(J)}}),S&&r.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 shadow flex items-center gap-4",children:[r.jsx("div",{className:"w-24 h-20 rounded overflow-hidden bg-gray-100",children:r.jsx("img",{src:S.image||"https://via.placeholder.com/160x120",alt:typeof S.name=="object"?S.name.en||S.name.ar:S.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-lg",children:typeof S.name=="object"?S.name[s]||S.name.en||S.name.ar||"":S.name}),r.jsxs("div",{className:"text-sm text-slate-500",children:["$",(S.price||0).toFixed(2)]})]}),r.jsx("div",{children:(()=>{const W=j.find(ie=>ie.productId===S.id),J=W&&W.qty||0;return!W||J===0?r.jsx("button",{onClick:()=>we(S),className:"px-4 py-2 bg-green-600 text-white rounded",children:" "}):r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>K(S.id,-1),className:"px-3 py-2 bg-slate-100 rounded",children:""}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center font-bold",children:J}),r.jsx("button",{onClick:()=>K(S.id,1),className:"px-3 py-2 bg-slate-100 rounded",children:"+"})]})})()})]}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-2xl font-black text-black",children:" "}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>he(!0),className:"px-3 py-2 rounded bg-black text-white font-black",children:"  "})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:G.map((W,J)=>{const ie=se[W];return r.jsx("div",{onClick:()=>F(W),role:"button",tabIndex:0,className:"bg-white rounded-lg p-3 cursor-pointer",style:{border:"2px solid #000"},children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[ie?r.jsx(ie,{size:18,className:"text-black"}):null,r.jsx("div",{className:"font-black text-black text-sm",children:W})]})})},J)})}),r.jsx("div",{className:"mt-6 space-y-8",children:B.map(W=>r.jsxs("section",{ref:J=>z.current[W]=J,children:[r.jsx("h3",{className:"text-xl font-black text-black mb-3",children:W}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:(o?Array.from({length:6}):Se(W)).map((J,ie)=>r.jsx(Q0,{product:J,lang:s,onQuickView:ue=>{M(ue),Z(!0)}},J?.id??`p-${ie}`))})]},W))})]}),r.jsx(qT,{open:R,product:L,onClose:()=>Z(!1)}),ne>0&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:r.jsxs("button",{onClick:()=>e("/customer/cart"),className:"w-full rounded-lg bg-black text-white font-black py-3",children:["Checkout  $",Q.toFixed(2)," (",ne,")"]})})}),de&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-start justify-center p-6 overflow-auto",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-2xl font-black",children:" "}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("button",{onClick:()=>he(!1),className:"px-3 py-2 rounded bg-slate-100",children:""})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:c.filter(W=>W.offer).map((W,J)=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute -top-2 left-2 bg-red-600 text-white px-2 py-1 rounded text-xs font-black",children:[W.discount||0,"%"]}),r.jsx(Q0,{product:{...W,price:(W.price||0)*(1-(W.discount||0)/100)},lang:s,onQuickView:ie=>{M(ie),Z(!0)}})]},W?.id??`offer-${J}`))})]})}),r.jsx(YT,{open:re,total:Math.round(Q*100)/100,items:j,user:n,onClose:()=>ee(!1),onSuccess:()=>{setCartItems([]),e("/customer/orders")}})]})}const eE="modulepreload",tE=function(t){return"/"+t},J0={},sE=function(e,s,n){let o=Promise.resolve();if(s&&s.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=h(s.map(f=>{if(f=tE(f),f in J0)return;J0[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":eE,p||(y.as="script"),y.crossOrigin="",y.href=f,d&&y.setAttribute("nonce",d),document.head.appendChild(y),p)return new Promise((b,j)=>{y.addEventListener("load",b),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};async function nE(t={enableHighAccuracy:!0,timeout:1e4}){try{const e=await sE(()=>import("./index-CLCdlU5a.js").then(s=>s.i),[]);if(e&&e.Geolocation&&typeof e.Geolocation.getCurrentPosition=="function"){const s=await e.Geolocation.getCurrentPosition(t);return{lat:s.coords.latitude,lng:s.coords.longitude}}}catch{}return new Promise((e,s)=>{if(!navigator.geolocation)return s(new Error("Geolocation not available"));navigator.geolocation.getCurrentPosition(n=>e({lat:n.coords.latitude,lng:n.coords.longitude}),n=>s(n),t)})}function iE({onDone:t}){return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:r.jsxs(Zt.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.6,opacity:0},transition:{type:"spring",stiffness:300,damping:20},className:"bg-black/70 p-6 rounded-xl shadow-lg w-80 max-w-full text-center text-white",children:[r.jsx(Zt.div,{animate:{y:[0,-18,0],rotate:[0,-8,0]},transition:{repeat:1/0,duration:1.6},className:"mx-auto w-40 h-40",children:r.jsxs("svg",{viewBox:"0 0 128 128",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"g1",x1:"0",x2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#00a1d6"}),r.jsx("stop",{offset:"100%",stopColor:"#0077be"})]})}),r.jsx("path",{fill:"url(#g1)",d:"M14 70c12-18 36-30 52-28s36 12 46 26c-8-2-18-6-30-6-14 0-26 6-36 12-8 6-20 8-32-4z"}),r.jsx("path",{fill:"#fff",d:"M64 36c8 0 18 6 24 12-12 0-22-2-34 6 2-10 6-18 10-18z",opacity:"0.9"})]})}),r.jsx("h2",{className:"font-bold text-lg mt-2",children:"  !"}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"      ."}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded",children:""})})]})})}function rE(){const t=Pe(),{items:e,clearCart:s,total:n}=mi(),[o,l]=C.useState(""),[c,d]=C.useState(null),[h,f]=C.useState("cash"),[p,g]=C.useState({number:"",exp:"",cvv:""}),[y,b]=C.useState({code:"",applied:!1}),[j,N]=C.useState(null),[w,S]=C.useState(!1),[_,T]=C.useState(!1),O=C.useRef(null),E=C.useRef(null),$=C.useRef(null),z=C.useRef(!1);C.useEffect(()=>{try{const V=JSON.parse(localStorage.getItem("coupon")||"null");V&&b(V)}catch{}},[]);async function L(){S(!0);try{const V=await nE();d(V);try{await M(),R(V.lat,V.lng)}catch{}try{const X=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${V.lat}&lon=${V.lng}`,q=await(await fetch(X,{headers:{"User-Agent":"dolphin-app"}})).json(),se=q.address||{},D=[se.neighbourhood,se.suburb,se.village,se.town,se.city].filter(Boolean)[0];D?(N({suggested:D,formatted:q.display_name}),l(G=>G||`${D}`)):l(`lat:${V.lat.toFixed(4)}, lng:${V.lng.toFixed(4)}`)}catch{l(`lat:${V.lat.toFixed(4)}, lng:${V.lng.toFixed(4)}`)}}catch{alert("    ")}finally{S(!1)}}async function M(){if(z.current)return;const V="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css";if(!document.querySelector(`link[href="${V}"]`)){const X=document.createElement("link");X.rel="stylesheet",X.href=V,document.head.appendChild(X)}window.L||await new Promise((X,B)=>{const q=document.createElement("script");q.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",q.async=!0,q.onload=()=>X(),q.onerror=se=>B(se),document.body.appendChild(q)}),z.current=!0}function R(V,X){if(!z.current||!O.current)return;const B=window.L;E.current?E.current.setView([V,X],15):(E.current=B.map(O.current,{zoomControl:!1}).setView([V,X],15),B.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(E.current),E.current.on("click",async q=>{const{lat:se,lng:D}=q.latlng;Z(se,D);try{const G=await re(se,D);G&&(l(G.suggested||G.formatted||`lat:${se.toFixed(4)}, lng:${D.toFixed(4)}`),N(G.suggested?{suggested:G.suggested,formatted:G.formatted}:null))}catch{}})),Z(V,X)}function Z(V,X){const B=window.L;!B||!E.current||($.current?$.current.setLatLng([V,X]):($.current=B.marker([V,X],{draggable:!0}).addTo(E.current),$.current.on("dragend",async q=>{const se=q.target.getLatLng();try{const D=await re(se.lat,se.lng);D&&(l(D.suggested||D.formatted||`lat:${se.lat.toFixed(4)}, lng:${se.lng.toFixed(4)}`),N(D.suggested?{suggested:D.suggested,formatted:D.formatted}:null))}catch{}})))}async function re(V,X){try{const B=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${V}&lon=${X}`,se=await(await fetch(B,{headers:{"User-Agent":"dolphin-app"}})).json(),D=se.address||{};return{suggested:[D.neighbourhood,D.suburb,D.village,D.town,D.city].filter(Boolean)[0],formatted:se.display_name}}catch{return null}}function ee(){j&&(l(j.suggested),N(null))}async function de(){if(e.length===0)return alert(" ");if(!o)return alert("     ");const V=e.reduce((q,se)=>((q[se.store]=q[se.store]||[]).push(se),q),{});let B=y&&y.applied?3:0;try{Object.keys(V).forEach((q,se)=>{const D=V[q],G=D.reduce((W,J)=>W+J.price*J.qty,0),xe=D.reduce((W,J)=>W+(J.qty||0),0),ge=Math.min(60,Math.max(10,xe*10)),we=((mt&&mt().find?mt().find(W=>W.role==="store"&&(W.name===q||W.username===q)):null)||{}).region||"",K=Date.now()+ge*6e4;let F=0;B>0&&(F=Math.min(B,G),B-=F);const ne=Math.max(0,G-F),Q={method:h,...h==="card"?{card:p}:{}};es.placeOrder({userId:999,items:D.map(W=>({productId:W.id,qty:W.qty})),total:ne,store:q,location:o,prepMinutes:ge,region:we,estimatedReadyAt:K,payment:Q})});try{s(),localStorage.removeItem("coupon")}catch{}T(!0)}catch(q){console.error("placeOrder error",q),alert("   : "+(q.message||""))}}function he(){T(!1),t("/customer/orders")}return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-32 text-black",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:r.jsx("h1",{className:"text-2xl font-bold text-black",children:"  - Dolphin Store"})})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 w-full",children:[r.jsxs("div",{className:"bg-white rounded p-4 shadow grid md:grid-cols-[1fr_320px] gap-6",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold mb-2",children:" "}),r.jsx("div",{ref:O,className:"w-full h-64 rounded mb-2 border"}),r.jsx("div",{className:"flex gap-2 items-center mb-2",children:r.jsx("button",{onClick:async()=>{await M(),await L()},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:w?"...":" "})}),r.jsx("input",{value:o,onChange:V=>l(V.target.value),placeholder:"  ",className:"w-full border rounded p-2 mb-2"}),j&&r.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border rounded flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm",children:[" : ",r.jsx("strong",{children:j.suggested})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:ee,className:"px-2 py-1 bg-blue-600 text-white rounded text-sm",children:""}),r.jsx("button",{onClick:()=>N(null),className:"px-2 py-1 border rounded text-sm",children:""})]})]}),r.jsx("h3",{className:"font-semibold mb-2 mt-4",children:" "}),r.jsxs("div",{className:"flex gap-4 mb-3",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",checked:h==="cash",onChange:()=>f("cash")})," "]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",checked:h==="card",onChange:()=>f("card")})," "]})]}),h==="card"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{placeholder:" ",value:p.number,onChange:V=>g({...p,number:V.target.value}),className:"w-full border rounded p-2"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{placeholder:"MM/YY",value:p.exp,onChange:V=>g({...p,exp:V.target.value}),className:"flex-1 border rounded p-2"}),r.jsx("input",{placeholder:"CVV",value:p.cvv,onChange:V=>g({...p,cvv:V.target.value}),className:"w-24 border rounded p-2"})]})]})]}),r.jsxs("div",{className:"w-full md:w-80 min-w-[260px] flex flex-col gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:" "}),r.jsxs("div",{className:"mt-3 space-y-3",children:[e.length===0&&r.jsx("div",{className:"text-sm text-slate-500",children:" "}),e.map(V=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:V.image||"/food-illustration.jpg",alt:"thumb",className:"w-14 h-14 object-cover rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium",children:typeof V.name=="object"?V.name.en||V.name.ar||Object.values(V.name)[0]:V.name}),r.jsxs("div",{className:"text-xs text-slate-500",children:["x",V.qty]})]}),r.jsxs("div",{className:"text-sm font-semibold",children:["$",(V.price*V.qty).toFixed(2)]})]},V.id))]})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("div",{children:""}),r.jsxs("div",{className:"font-bold",children:["$",n.toFixed(2)]})]}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"   ( )"})]}),r.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white border p-2 rounded shadow-sm",children:[r.jsx("div",{className:"text-lg",children:""}),r.jsx("div",{className:"text-xs",children:" "})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white border p-2 rounded shadow-sm",children:[r.jsx("div",{className:"text-lg",children:""}),r.jsx("div",{className:"text-xs",children:" "})]})]})]})]}),r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsx("button",{onClick:de,style:{boxShadow:"0 6px 24px rgba(0,119,190,0.45)"},className:"px-6 py-4 rounded-full text-white font-bold text-lg bg-[#0077be]",children:"Confirm Order"})})]}),_&&r.jsx(iE,{onDone:he}),r.jsx(In,{})]})}function oE(){const t=Pe(),{logout:e,user:s}=pt(),[n,o]=te.useState(null),l=[{id:"profile",label:"My Profile",icon:"",action:()=>o("profile")},{id:"wallet",label:"Wallet",icon:"",action:()=>o("wallet")},{id:"addresses",label:"Saved Addresses",icon:"",action:()=>o("addresses")},{id:"favorites",label:"Favorite Stores",icon:"",action:()=>o("favorites")},{id:"help",label:"Help & Support",icon:"",action:()=>o("help")},{id:"settings",label:"Settings",icon:"",action:()=>o("settings")}],c=()=>{e(),t("/login")};function d(){o(null)}return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 pb-24 text-black",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:r.jsx("h1",{className:"text-2xl font-bold text-black",children:"More"})})}),r.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 w-full flex-1",children:[r.jsx("div",{className:"bg-white rounded-lg p-6 shadow mb-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-5xl",children:""}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s?.name||"Guest"}),r.jsx("p",{className:"text-gray-600",children:s?.username||"Not logged in"})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.map((h,f)=>r.jsxs("button",{onClick:h.action,className:`w-full flex items-center gap-4 px-6 py-4 hover:bg-gray-50 transition ${f!==l.length-1?"border-b border-gray-200":""}`,children:[r.jsx("span",{className:"text-2xl",children:h.icon}),r.jsx("span",{className:"flex-1 text-left font-medium text-gray-900",children:h.label}),r.jsx("span",{className:"text-gray-400",children:""})]},h.id))}),r.jsx("button",{onClick:c,className:"w-full mt-6 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 font-semibold transition",children:"Logout"})]}),r.jsx(In,{}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-black/70 p-6 rounded w-11/12 max-w-md text-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:n==="profile"?"Profile":n==="addresses"?"Saved Addresses":n==="favorites"?"Favorite Stores":n==="help"?"Help & Support":"Settings"}),r.jsx("button",{onClick:d,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Close"})]}),r.jsxs("div",{className:"prose text-white",children:[n==="profile"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",s?.name||"Guest"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Username:"})," ",s?.username||"-"]})]}),n==="wallet"&&r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Wallet Balance:"})," ",Number(localStorage.getItem("app_wallet_balance_v1")||0).toFixed(2)," USD"]}),r.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Top up via card or cash at delivery (demo)."})]}),n==="addresses"&&r.jsxs("div",{children:[r.jsx("p",{children:"No saved addresses yet."}),r.jsx("button",{className:"mt-3 px-3 py-2 bg-blue-600 text-white rounded",onClick:()=>alert("Add address flow (demo)"),children:"Add Address"})]}),n==="favorites"&&r.jsx("div",{children:r.jsx("p",{children:"You have not added favorite stores."})}),n==="help"&&r.jsx("div",{children:r.jsx("p",{children:"For help, email support@example.com or call 079-XXXXXXX."})}),n==="settings"&&r.jsx("div",{children:r.jsx("p",{children:"Settings are not configurable in this demo."})})]})]})})]})}let gu=null;function Yb(){try{return gu||(gu=new(window.AudioContext||window.webkitAudioContext)),gu}catch{return null}}function Xi(t,e=200,s="sine",n=0,o=.08){const l=Yb();if(!l)return;const c=l.currentTime+n/1e3,d=l.createOscillator(),h=l.createGain();d.type=s,d.frequency.setValueAtTime(t,c),h.gain.setValueAtTime(0,c),h.gain.linearRampToValueAtTime(o,c+.01),h.gain.linearRampToValueAtTime(1e-4,c+e/1e3),d.connect(h),h.connect(l.destination),d.start(c),d.stop(c+e/1e3+.02)}function Kb(){Xi(660,120,"sine",0,.06),Xi(880,160,"sine",120,.08)}function aE(){Xi(880,220,"sine",0,.09)}function lE(){Xi(880,90,"sine",0,.08),Xi(740,90,"sine",100,.08),Xi(660,140,"sine",200,.08)}function Gb(){const t=Yb();if(t&&t.state==="suspended")try{t.resume()}catch{}}function cE(){const{t,lang:e}=cr(),{user:s}=pt(),n=[{label:t("dashboard"),to:"/store"},{label:t("products"),to:"/store/products"},{label:t("orders"),to:"/store/orders"},{label:" ",to:"/store/prepared"}],[o,l]=C.useState(()=>Oe().filter(Q=>!s||Q.store===s.name)),[c,d]=C.useState(!0),[h,f]=C.useState(()=>Ae().filter(Q=>!s||Q.store===s.name)),[p,g]=C.useState("pending"),[y,b]=C.useState(Date.now()),[j,N]=C.useState({title:"",image:"",barcode:"",sku:"",price:"",description:"",unitType:"piece",categories:[],subcategory:""}),w=Pe(),[S,_]=C.useState(null),[T,O]=C.useState(!1),[E,$]=C.useState(!1),[z,L]=C.useState(!1),[M,R]=C.useState({productName:"",image:"",discountImage:"",originalPrice:"",offerPrice:"",discountValue:"",platformMargin:""}),Z=[...n,{label:"Add Product",action:()=>$(!0)},{label:" ",action:()=>L(!0)}];function re(Q){N({...j,[Q.target.name]:Q.target.value})}function ee(Q){const W=Q.target.files&&Q.target.files[0];if(!W)return;const J=new FileReader;J.onload=ie=>{N(ue=>({...ue,image:ie.target.result}))},J.readAsDataURL(W)}const de=["  ",""," "," ",""," "," "," ",""," ","  ","",""," ","  "," ","  ","  "," "," "," "," "," "," "," "],he={"  ":[" "," "," "," "," "," "," ",""," "," "," "," "],:["  ","",""," ","",""," ","",""," ",""," "," ",""," ",""," ","  ",""," ",""]," ":[" ","",""," ",""]," ":[""," ","","","  ",""," ",""],:[" ","","","","",""," "," ","","","",""," "," ",""]," ":[" "," "," "," "," ","","  "," "," "," ","  "," "," "," ","  "," "," "," "," "," ","  "," "," ","",""," ","  ","  ","  "]," ":[" "," "," "," "," "," "," ","",""," "," ","","  "," "," "," "],:["","","","","",""," ",""," ",""," "]," ":["","   ","   "," "," ","  ","  "," ",""," "," ","",""," ","","",""," ",""],"  ":["","","",""," "," "," "," ",""," "," "," "," ","","","",""," "],:[" "," "," ","  ","  "],:[" "," "," "," "," "," "," "," "," "," "," "," ","  "],"  ":[" ","  "," "," ",""," ",""]," ":[" ","  "," "," ","","","",""," "," "],"  ":[""," ","","","",""," "],"  ":["","","","","","","","",""]," ":["",""," ","",""," ","",""]," ":[""," ",""," "," "," "," "," "," "," "]," ":[" "," "," "," "," "," "," ","","",""," "," "," "]," ":["  "," ","",""," ","  "]," ":["","","","",""," "," ","",""]," ":[" "," "," "," "," "," ","  "," "," "," "," ",""," "," "," "]," ":[" "," ","  ","  ","","",""]};function V(Q){N(W=>{const J=new Set(W.categories||[]);return J.has(Q)?J.delete(Q):J.add(Q),{...W,categories:Array.from(J)}})}function X(Q){N(W=>({...W,subcategory:Q}))}function B(Q){Q.preventDefault();const W=Date.now();if(j.barcode&&Lt.some(ie=>ie.barcode&&ie.barcode===j.barcode)){alert("Barcode already exists  choose a unique barcode");return}const J={id:W,name:{en:j.title||"Untitled",ar:j.title||""},price:parseFloat(j.price)||0,image:j.image||"https://picsum.photos/seed/"+W+"/200/150",barcode:j.barcode||"",sku:j.sku||"",description:j.description||"",unitType:j.unitType||"piece",categories:j.categories||[],subcategory:j.subcategory||"",store:s?.name||"Unknown",storeId:s?.id,active:!0};Lt.push(J);try{Nl()}catch{}l(Oe().filter(ie=>ie.store===s?.name)),N({title:"",image:"",barcode:"",sku:"",price:"",description:"",unitType:"piece",categories:[],subcategory:""}),alert("Product added"),$(!1)}function q(Q){R(W=>({...W,[Q.target.name]:Q.target.value}))}function se(Q){const W=Q.target.files&&Q.target.files[0];if(!W)return;const J=new FileReader;J.onload=ie=>{R(ue=>({...ue,image:ie.target.result}))},J.readAsDataURL(W)}function D(Q){const W=Q.target.files&&Q.target.files[0];if(!W)return;const J=new FileReader;J.onload=ie=>{R(ue=>({...ue,discountImage:ie.target.result}))},J.readAsDataURL(W)}function G(Q){Q.preventDefault();try{const W=JSON.parse(localStorage.getItem("pending_offers")||"[]"),ie={id:Date.now(),store:s?.name||"Unknown",productName:M.productName,image:M.image,discountImage:M.discountImage,originalPrice:Number(M.originalPrice)||0,offerPrice:Number(M.offerPrice)||0,discountValue:M.discountValue||"",platformMargin:M.platformMargin||"",status:"pending_approval",createdAt:Date.now()};W.push(ie),localStorage.setItem("pending_offers",JSON.stringify(W)),alert("      "),R({productName:"",image:"",discountImage:"",originalPrice:"",offerPrice:"",discountValue:"",platformMargin:""}),L(!1)}catch(W){console.error(W),alert("    ")}}te.useEffect(()=>{const Q=Cs(W=>{if(W.type==="tick"){const J=Oe().filter(ie=>!s||ie.store===s.name);l(J.filter(ie=>c?ie.active!==!1:ie.active===!1)),f(Ae().filter(ie=>!s||ie.store===s.name));try{Gb()}catch{}}else if(W.type==="order"){f(J=>[W.order,...J].filter(ie=>!s||ie.store===s.name));try{s&&W.order&&W.order.store===s.name&&Kb()}catch{}}});return()=>Q()},[s,c]),te.useEffect(()=>{const Q=setInterval(()=>b(Date.now()),1e3);return()=>clearInterval(Q)},[]);const xe=te.useMemo(()=>mt(),[]);function ge(){_(null),O(!1)}function Se(){ge(),w("/store")}function we(){S&&(ge(),w(`/store/orders/${S.id}`))}function K(Q){if(!(!Q||!Q.id)&&confirm("Cancel this order?"))try{XC(Q.id,{by:s?.name||null,reason:"Cancelled by store"}),alert("Order cancelled")}catch(W){console.error(W),alert("Could not cancel order")}}function F(Q=1e3){if(!s)return alert("No store user");if(!confirm(`Create ${Q} demo Jordan products for store ${s.name}? This may take a moment.`))return;const W=Date.now(),J=Date.now();for(let ie=0;ie<Q;ie++){const ue=J+ie,ke=Math.round((Math.random()*50+1)*100)/100,ye=`JOR-${String(ue).slice(-6)}`,Re=`JOR${String(1e5+ie%9e5)}`,Ke=`Jordan Product ${ie+1}`,Yt=`  ${ie+1}`,Kt=`https://picsum.photos/seed/jor${ue}/200/150`,ps={id:ue,name:{en:Ke,ar:Yt},price:ke,image:Kt,stock:100+Math.floor(Math.random()*200),sku:ye,barcode:Re,store:s.name};Lt.push(ps)}try{Nl()}catch(ie){console.error("saveProducts failed",ie)}l(Oe().filter(ie=>!s||ie.store===s.name)),alert(`Created ${Q} products in ${(Date.now()-W)/1e3}s`)}te.useEffect(()=>{if(s)try{const Q=`demo_orders_sent_${s.name}`;if(s.role!=="store")return;const W=Oe().filter(ke=>ke.store===s?.name),J=W.length?W:Oe();if(Ae().filter(ke=>ke.store===s?.name).length>0){typeof localStorage<"u"&&localStorage.setItem(Q,"1");return}if(typeof localStorage<"u"&&localStorage.getItem(Q))return;const ue=mt().filter(ke=>ke.role==="customer");for(let ke=0;ke<3&&J.length!==0;ke++){const ye=1+Math.floor(Math.random()*3),Re=[];let Ke=0;for(let Kt=0;Kt<ye;Kt++){const ps=J[Math.floor(Math.random()*J.length)],pi=1+Math.floor(Math.random()*2);Re.push({productId:ps.id,qty:pi}),Ke+=(ps.price||0)*pi}const Yt=ue.length?ue[Math.floor(Math.random()*ue.length)]:null;es.placeOrder({userId:Yt?Yt.id:null,items:Re,total:Math.round(Ke*100)/100,status:"pending",store:s?.name})}typeof localStorage<"u"&&localStorage.setItem(Q,"1"),alert("Demo orders created for your store")}catch{}},[s]);function ne(){if(!s)return;const Q=Oe().filter(ie=>ie.store===s?.name),W=Q.length?Q:Oe(),J=mt().filter(ie=>ie.role==="customer");for(let ie=0;ie<3&&W.length!==0;ie++){const ue=1+Math.floor(Math.random()*3),ke=[];let ye=0;for(let Ke=0;Ke<ue;Ke++){const Yt=W[Math.floor(Math.random()*W.length)],Kt=1+Math.floor(Math.random()*2);ke.push({productId:Yt.id,qty:Kt}),ye+=(Yt.price||0)*Kt}const Re=J.length?J[Math.floor(Math.random()*J.length)]:null;es.placeOrder({userId:Re?Re.id:null,items:ke,total:Math.round(ye*100)/100,status:"pending",store:s?.name})}alert("Demo orders created")}return r.jsxs(tt,{sideItems:Z,children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Store Dashboard"}),r.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>d(!0),className:`px-3 py-1 rounded ${c?"bg-green-600 text-white":"bg-slate-700 text-white"}`,children:" "}),r.jsx("button",{onClick:()=>d(!1),className:`px-3 py-1 rounded ${c?"bg-slate-700 text-white":"bg-red-600 text-white"}`,children:" "}),r.jsxs("div",{className:"ml-2 text-sm text-slate-300",children:[o.filter(Q=>Q.active).length," "]}),r.jsx("button",{onClick:()=>F(1e3),className:"ml-2 px-3 py-1 bg-purple-600 text-white rounded text-sm",children:" 1000  "})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-sm text-slate-400",children:[h.length," "]}),r.jsx("button",{onClick:()=>$(!0),className:"px-3 py-1 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1 bg-emerald-500 text-white rounded",children:" "}),r.jsx("button",{onClick:ne,className:"px-3 py-1 bg-amber-500 text-black rounded",children:"Generate Demo Orders"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsxs("h3",{className:"font-semibold mb-2",children:["Welcome, ",s?.name]}),r.jsx("p",{className:"text-slate-400",children:"Quick overview and actions for your store."})]}),r.jsx("div",{className:"p-4 bg-slate-800 rounded",children:"Sales stats"})]}),T&&S&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-96",children:[r.jsxs("h3",{className:"text-lg font-bold mb-2",children:["Order #",S.id]}),r.jsxs("p",{className:"text-slate-400 mb-4",children:["Customer: ",(xe.find(Q=>Q.id===S.userId)||{}).name||"Guest"]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:we,className:"px-3 py-1 bg-green-600 text-white rounded",children:"Accept"}),r.jsx("button",{onClick:Se,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Cancel"})]})]})}),E&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-96",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Add Product"}),r.jsxs("form",{onSubmit:B,className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"Title"}),r.jsx("input",{name:"title",value:j.title,onChange:re,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:" (   )"}),r.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 max-h-40 overflow-auto",children:de.map(Q=>r.jsx("button",{type:"button",onClick:()=>V(Q),className:`px-2 py-1 border rounded text-sm ${(j.categories||[]).includes(Q)?"bg-blue-600 text-white":"bg-slate-700 text-white"}`,children:Q},Q))})]}),j.categories&&j.categories.length===1&&he[j.categories[0]]&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm mt-2",children:["  ",j.categories[0]]}),r.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 max-h-40 overflow-auto",children:he[j.categories[0]].map(Q=>r.jsx("button",{type:"button",onClick:()=>X(Q),className:`px-2 py-1 border rounded text-sm ${j.subcategory===Q?"bg-green-600 text-white":"bg-slate-700 text-white"}`,children:Q},Q))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"Price"}),r.jsx("input",{name:"price",value:j.price,onChange:re,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"Unit Type"}),r.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"unitType",value:"piece",checked:j.unitType==="piece",onChange:re})," Piece"]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"unitType",value:"weightable",checked:j.unitType==="weightable",onChange:re})," Weightable"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"Barcode"}),r.jsx("input",{name:"barcode",value:j.barcode,onChange:re,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"Image"}),r.jsx("input",{type:"file",accept:"image/*",onChange:ee,className:"w-full"})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[r.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-3 py-1 bg-slate-400 rounded",children:"Close"}),r.jsx("button",{type:"submit",className:"px-3 py-1 bg-green-600 text-white rounded",children:"Save"})]})]})]})}),z&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-96",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:" "}),r.jsxs("form",{onSubmit:G,className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:" "}),r.jsx("input",{name:"productName",value:M.productName,onChange:q,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"  "}),r.jsx("input",{name:"originalPrice",value:M.originalPrice,onChange:q,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:" "}),r.jsx("input",{name:"offerPrice",value:M.offerPrice,onChange:q,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"  ()"}),r.jsx("input",{name:"discountValue",value:M.discountValue,onChange:q,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"   () ()"}),r.jsx("input",{name:"platformMargin",value:M.platformMargin,onChange:q,className:"w-full p-2 rounded bg-slate-100 dark:bg-slate-700"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:" "}),r.jsx("input",{type:"file",accept:"image/*",onChange:se,className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm",children:"  ()"}),r.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"w-full"})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[r.jsx("button",{type:"button",onClick:()=>L(!1),className:"px-3 py-1 bg-slate-400 rounded",children:""}),r.jsx("button",{type:"submit",className:"px-3 py-1 bg-green-600 text-white rounded",children:" "})]})]})]})}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Orders"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>g("pending"),className:`px-3 py-1 rounded ${p==="pending"?"bg-indigo-600 text-white":"bg-slate-700 text-white"}`,children:" "}),r.jsx("button",{onClick:()=>g("active"),className:`px-3 py-1 rounded ${p==="active"?"bg-indigo-600 text-white":"bg-slate-700 text-white"}`,children:""}),r.jsx("button",{onClick:()=>g("completed"),className:`px-3 py-1 rounded ${p==="completed"?"bg-indigo-600 text-white":"bg-slate-700 text-white"}`,children:""})]})]}),h.length===0?r.jsx("div",{className:"text-slate-400",children:"No orders yet"}):(()=>{const Q=h.filter(ue=>!["preparing","ready_for_pickup","picked_up","fulfilled","cancelled"].includes(ue.status)),W=h.filter(ue=>["preparing","partial_picked","fulfilled"].includes(ue.status)),J=h.filter(ue=>["ready_for_pickup","picked_up"].includes(ue.status)),ie=p==="pending"?Q:p==="active"?W:J;return ie.length===0?r.jsx("div",{className:"p-4 bg-slate-800 rounded text-slate-300",children:"     "}):r.jsx("div",{className:"space-y-2",children:ie.map(ue=>{let ke="";if(ue.status==="ready_for_pickup"){const ye=ue.readyAt||ue.readyAt===0?ue.readyAt:null,Re=ye?Math.max(0,Math.floor((Date.now()-ye)/1e3)):0,Ke=Math.floor(Re/60),Yt=Re%60;ke=`${Ke}m ${Yt}s`}else if(ue.status==="picked_up")ke=" ";else{const ye=ue.estimatedReadyAt?Math.max(0,Math.ceil((ue.estimatedReadyAt-y)/1e3)):(ue.prepMinutes||0)*60,Re=Math.floor(ye/60),Ke=ye%60;ke=ye>0?`${Re}m ${Ke}s`:"Ready"}return r.jsxs("div",{className:"bg-slate-900 p-3 rounded flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:(xe.find(ye=>ye.id===ue.userId)||{}).name||"Guest"}),r.jsxs("div",{className:"text-slate-400 text-sm",children:["#",ue.id,"  $",ue.total,"  ",(ue.items||[]).filter(ye=>!ye.preparing&&!(ye.pickedQty&&ye.pickedQty>=(ye.qty||ye.quantity||1))).length," items"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"px-3 py-1 bg-amber-400 text-black rounded font-medium",children:[ue.status==="ready_for_pickup"?" :":ue.status==="picked_up"?"":"ETA:"," ",ke]}),r.jsxs("div",{className:"flex gap-2",children:[p==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{try{ot(ue.id,{status:"preparing",preparingAt:Date.now()})}catch(ye){console.error(ye)}try{w(`/store/orders/${ue.id}`)}catch{}},className:"px-3 py-1 bg-green-600 text-white rounded",children:"Accept"}),r.jsx("button",{onClick:()=>K(ue),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Cancel"})]}),p==="active"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{try{ot(ue.id,{status:"ready_for_pickup",readyAt:Date.now()})}catch(ye){console.error(ye)}},className:"px-3 py-1 bg-amber-500 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>w(`/store/orders/${ue.id}`),className:"px-3 py-1 bg-slate-700 text-white rounded",children:""})]}),p==="completed"&&r.jsx("button",{onClick:()=>w(`/store/orders/${ue.id}`),className:"px-3 py-1 bg-slate-700 text-white rounded",children:""})]})]})]},ue.id)})})})()]})]})}function dE(){const{user:t}=pt(),e=[{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"}],[s,n]=te.useState(()=>Ae().filter(l=>!t||l.store===t.name));te.useMemo(()=>Oe(),[]);const o=Pe();return te.useEffect(()=>{const l=Cs(c=>{if(c.type==="tick")try{Gb()}catch{}if((c.type==="order"||c.type==="update"||c.type==="tick")&&n(Ae().filter(d=>!t||d.store===t.name)),t&&c.order&&(c.type==="order"||c.type==="update"))try{c.type==="order"&&c.order.store===t.name&&Kb(),c.type==="update"&&c.order.store===t.name&&(c.order.status==="ready_for_pickup"&&aE(),c.order.status==="picked_up"&&lE())}catch{}});return()=>l()},[t]),r.jsxs(tt,{sideItems:e,children:[(()=>{const l=["preparing","ready_for_pickup","picked_up"],c=h=>{if(!h)return!1;const f=new Date(h),p=new Date;return f.getFullYear()===p.getFullYear()&&f.getMonth()===p.getMonth()&&f.getDate()===p.getDate()},d=s.filter(h=>l.includes(h.status)&&(c(h.readyAt)||c(h.date))).length;return r.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["  ",d>0?`(${d}  )`:""]})})(),s.length===0?r.jsx("div",{className:"p-6 bg-slate-800 rounded text-slate-300",children:"   "}):(()=>{const l=s.filter(c=>c.status==="cancelled"||["preparing","ready_for_pickup","picked_up"].includes(c.status));return l.length===0?r.jsx("div",{className:"p-6 bg-slate-800 rounded text-slate-300",children:"     "}):r.jsx("div",{className:"space-y-3",children:l.map(c=>r.jsx("div",{onClick:()=>o(`/store/orders/${c.id}`),className:"cursor-pointer bg-slate-800 p-4 rounded",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[" #",c.id]}),r.jsxs("div",{className:"text-sm text-slate-400",children:[(c.items||[]).length,"   $",c.total]})]}),r.jsx("div",{className:"text-sm text-slate-300",children:c.status})]})},c.id))})})()]})}const ih=["  ",""," "," ",""," "," "," ","  ","","  "," "," "," "," "," "],rh={"  ":[" "," "," "," "],:["","",""]," ":["","",""]};function uE(t=12){try{for(let e=0;e<t;e++){const s="demo-"+Date.now()+"-"+e,n=ih[e%ih.length],o=(rh[n]||[])[0]||"";Lt.push({id:s,name:{ar:`  ${e+1}`,en:`Demo ${e+1}`},image:"https://via.placeholder.com/400x300",price:Number((Math.random()*20+1).toFixed(2)),store:"Demo Store",categories:[n],subcategory:o,active:!0,sku:"DEM-"+e})}try{Nl()}catch{}try{window.dispatchEvent(new Event("storage"))}catch{}}catch(e){console.error(e)}}function hE(){const{user:t}=pt()||{},e=Pe(),s=ms(),[n,o]=C.useState(()=>Oe().filter(w=>w.store===(t?.name||"Demo Store"))),[l,c]=C.useState(!0),[d,h]=C.useState({}),[f,p]=C.useState({});C.useEffect(()=>{const w=Cs(()=>o(Oe().filter(S=>S.store===(t?.name||"Demo Store"))));return()=>w&&w()},[t]);function g(w){const S=Lt.findIndex(_=>_.id===w.id);if(S!==-1){Lt[S].active=!Lt[S].active;try{Nl()}catch{}}}const y=[{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"}],b=new URLSearchParams(s.search),j=b.get("cat"),N=b.get("sub");if(j&&N){const w=(n||[]).filter(S=>(S.categories||[]).includes(j)&&S.subcategory===N&&(l?S.active!==!1:S.active===!1));return r.jsxs(tt,{sideItems:y,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"flex items-center rounded overflow-hidden border border-slate-700",children:[r.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1 text-sm ${l?"bg-green-600 text-white":"bg-slate-800 text-white"}`,children:""}),r.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1 text-sm ${l?"bg-slate-800 text-white":"bg-red-600 text-white"}`,children:""})]})})}),r.jsx("div",{children:w.length===0?r.jsx("div",{className:"text-slate-400",children:"      "}):r.jsx("div",{className:"flex flex-col gap-4",children:w.map(S=>r.jsxs("div",{className:"flex items-center justify-between bg-black/60 p-2 rounded-md",children:[r.jsxs("div",{onClick:()=>e(`/store/product/${S.id}`),className:"flex items-center gap-2 cursor-pointer flex-1",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:S.image,alt:S.name?.ar||S.name?.en||S.name,className:"w-28 h-20 object-cover rounded-md"}),r.jsx("button",{onClick:_=>{_.stopPropagation(),e(`/store/product/${S.id}?edit=true`)},className:"absolute top-1 left-1 bg-white/20 text-white rounded p-0.5 text-xs",children:""})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-white truncate text-sm",children:" "}),r.jsxs("div",{className:"text-slate-400 text-xs",children:[" : ",r.jsx("span",{className:"text-white text-sm",children:S.weight??"-"})]}),r.jsx("div",{className:"text-slate-300 text-xs mt-1",children:"SKU: -"})]})]}),r.jsxs("div",{className:"flex flex-col items-end justify-center gap-1",children:[r.jsx("div",{className:"text-green-400 text-base font-bold",children:"$1"}),r.jsx("button",{onClick:()=>g(S),className:`px-2 py-0.5 rounded text-white text-sm ${S.active===!1?"bg-green-600":"bg-red-600"}`,children:S.active===!1?"":""})]})]},S.id))})})]})}return r.jsxs(tt,{sideItems:y,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-xl font-semibold",children:["Products  ",t?.name||"Demo Store"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1 rounded ${l?"bg-green-600 text-white":"bg-slate-700 text-white"}`,children:""}),r.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1 rounded ${l?"bg-slate-700 text-white":"bg-red-600 text-white"}`,children:""}),r.jsxs("div",{className:"flex items-center rounded overflow-hidden border border-slate-700",children:[r.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1 text-sm ${l?"bg-green-600 text-white":"bg-slate-800 text-white"}`,children:""}),r.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1 text-sm ${l?"bg-slate-800 text-white":"bg-red-600 text-white"}`,children:""})]})]}),r.jsx("button",{onClick:()=>{uE(12),o(Oe().filter(w=>w.store===(t?.name||"Demo Store")))},className:"px-3 py-2 bg-yellow-500 text-black rounded",children:"Generate Demo Products"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-sm text-slate-300 mb-2",children:""}),r.jsx("div",{className:"flex flex-col gap-2",children:(ih||[]).map(w=>{const S=(n||[]).filter(_=>(_.categories||[]).includes(w)&&(l?_.active!==!1:_.active===!1));return r.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[r.jsxs("button",{onClick:()=>h(_=>({..._,[w]:!_[w]})),className:"w-full text-right p-3 flex justify-between items-center",children:[r.jsx("div",{className:"text-white font-semibold",children:w}),r.jsxs("div",{className:"text-slate-300 text-sm",children:[S.length," "]})]}),d[w]&&r.jsx("div",{className:"p-3 border-t border-slate-700",children:(rh[w]||[]).length>0?r.jsx("div",{className:"mb-3 flex flex-col gap-2",children:(rh[w]||[]).map(_=>{const T=S.filter(E=>(E.subcategory||"")===_).length,O=f[w]&&f[w][_];return r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>e(`/store/products?cat=${encodeURIComponent(w)}&sub=${encodeURIComponent(_)}`),className:`flex-1 text-right px-3 py-2 rounded text-sm ${O?"bg-indigo-600 text-white":"bg-slate-700 text-white"}`,children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"truncate",children:_}),r.jsxs("div",{className:"text-slate-300 text-sm",children:[T," "]})]})}),r.jsx("button",{onClick:()=>p(E=>({...E,[w]:{...E[w]||{},[_]:!(E[w]||{})[_]}})),className:`px-2 py-2 rounded ${O?"bg-indigo-500 text-white":"bg-slate-700 text-white"}`,children:O?"":"+"})]}),O&&r.jsx("div",{className:"mt-2 ml-4 border-l border-slate-700 pl-3",children:T===0?r.jsx("div",{className:"text-slate-400 text-sm",children:"  "}):r.jsx("div",{className:"flex flex-col gap-2",children:S.filter(E=>(E.subcategory||"")===_).map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-900 p-2 rounded",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:E.image,alt:E.name?.ar||E.name?.en||E.name,className:"w-10 h-8 object-cover rounded"}),r.jsx("div",{className:"text-sm text-white truncate",children:" "})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-slate-300 text-sm",children:"$1"}),r.jsx("button",{onClick:()=>g(E),className:`px-2 py-1 rounded text-white text-sm ${E.active===!1?"bg-green-600":"bg-red-600"}`,children:E.active===!1?"":""})]})]},E.id))})})]},_)})}):S.length===0?r.jsx("div",{className:"text-slate-400",children:"     "}):r.jsx("div",{className:"grid grid-cols-3 gap-4",children:S.map(_=>r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("img",{onClick:()=>e(`/store/product/${_.id}`),src:_.image,alt:_.name?.ar||_.name?.en||_.name,className:"w-full h-24 object-cover rounded mb-2 cursor-pointer"}),r.jsx("div",{className:"font-semibold text-white",children:" "}),r.jsx("div",{className:"text-slate-400 text-sm",children:"SKU: -"}),r.jsx("div",{className:"text-green-400 text-lg font-bold",children:"$1"}),r.jsx("div",{className:"mt-2",children:r.jsx("button",{onClick:()=>g(_),className:`px-2 py-1 rounded text-white text-sm ${_.active===!1?"bg-green-600":"bg-red-600"}`,children:_.active===!1?"":""})})]},_.id))})})]},w)})})]})]})}function fE(){const{id:t}=hi(),e=Pe(),{user:s}=pt(),n=te.useMemo(()=>Oe().find(F=>String(F.id)===String(t)),[t]),l=ms().state||{},c=l.maxQty||n?.stock||1,[d,h]=te.useState(Math.min(c,1)),[f,p]=te.useState(c),g=n?Number(n.price||0):0,y=n&&n.unitType==="weightable",[b,j]=te.useState(()=>y?l.weight||1:0),[N,w]=te.useState(()=>{if(y){const F=l.weight||1;return Math.round(g*F*100)/100}return typeof l.price=="number"?l.price:n?n.price:0}),[S,_]=te.useState(!1),[T,O]=te.useState([]),[E,$]=te.useState([]),[z,L]=te.useState(""),[M,R]=te.useState(!1),[Z,re]=te.useState(""),[ee,de]=te.useState(!1),[he,V]=te.useState(!1);if(!n)return r.jsx(tt,{children:r.jsx("div",{children:"Product not found"})});function X(){h(F=>Math.min(f||n.stock||9999,F+1))}function B(){h(F=>Math.max(1,F-1))}function q(F){const ne=Number(F)||0;if(w(ne),y&&g>0){const Q=Math.round(ne/g*1e3)/1e3;j(Q)}}function se(F){const ne=Number(F)||0;j(ne),w(Math.round(ne*g*100)/100)}function D(){console.log("pickup() clicked",{productId:n?.id,qty:d,navState:l});const F=l.orderId;if(F)try{const ne=Ae(),Q=ne.find(W=>String(W.id)===String(F));if(!Q){console.warn("pickup: parent order not found",{navOrderId:F,ordersCount:ne.length}),alert("     .         .");return}if(Q){const W=(Q.items||[]).map(ke=>{if(String(ke.productId)===String(n.id)){const ye=l.requestedQty||ke.qty||ke.quantity||1,Re=l.action==="pickup"?ye:y?b:d;return{...ke,requestedQty:ye,pickedQty:Re}}return ke}),J=W.some(ke=>ke.pickedQty&&ke.pickedQty>0);if(!ot(Q.id,{items:W,status:J?"partial_picked":Q.status})){console.error("pickup: updateOrder returned null",Q.id),alert("    .      .");return}V(!0),setTimeout(()=>V(!1),1400);const ue=`/store/orders/${Q.id}`;console.log("pickup: navigating to",ue);try{e(ue,{replace:!0})}catch(ke){console.error(ke)}return}}catch(ne){console.error("pickup error",ne),alert(" ")}try{const ne=es.placeOrder({userId:null,items:[{productId:n.id,qty:y?b:d}],total:y?Math.round((N||g||0)*100)/100:Math.round((N||n.price||0)*d*100)/100,status:"ready_for_pickup",store:n.store});alert("Marked ready for pickup");const Q=`/store/orders/${ne.id}`;console.log("pickup: fallback navigate to",Q,{orderId:ne.id});try{e(Q,{state:{orderId:ne.id},replace:!0})}catch{e("/store")}}catch(ne){console.error("createOrder error",ne),alert("    ")}}function G(){console.log("openAlternatives clicked",{productId:n?.id});try{const F=Oe().filter(W=>W.id!==n.id),ne=F.filter(W=>W.store===n.store),Q=ne.length?ne:F;Q.sort((W,J)=>Math.abs(W.price-n.price)-Math.abs(J.price-n.price)),O(Q.slice(0,12)),$([]),_(!0)}catch(F){console.error("openAlternatives error",F),alert(" ")}}function xe(F){$(ne=>ne.find(Q=>Q.id===F.id)?ne.filter(Q=>Q.id!==F.id):ne.length>=6?ne:[...ne,F])}function ge(){const F=z.trim();if(!F)return;const ne=Oe().filter(Q=>String(Q.barcode||"")===F);ne.length?O(Q=>[ne[0],...Q.filter(W=>W.id!==ne[0].id)].slice(0,12)):alert("No product with that barcode")}function Se(){if(E.length<6){alert("Select 6 alternatives");return}const F=l.orderId;if(F)try{const W=Ae().find(J=>String(J.id)===String(F));if(W){const J=(W.items||[]).map(ie=>String(ie.productId)===String(n.id)?{...ie,fulfilledFromStock:E.map(ue=>ue.id),fulfilledQty:E.length}:ie);ot(W.id,{items:J,status:"fulfilled_from_stock"}),alert("     "),_(!1),e(-1);return}}catch{}const ne=E.map(Q=>({productId:Q.id,qty:1}));es.placeOrder({userId:null,items:ne,total:Math.round(ne.reduce((Q,W)=>Q+(Lt.find(J=>J.id===W.productId)?.price||0)*W.qty,0)*100)/100,status:"pending",store:n.store}),alert("Alternatives sent to customer"),_(!1),e("/store")}function we(){const F=l.orderId;if(F)try{const Q=Ae().find(W=>String(W.id)===String(F));if(Q){ot(Q.id,{invoice:{html:Z,savedAt:Date.now()}}),de(!0),alert(" ");return}}catch{}}function K(){const F=l.orderId;if(F)try{const Q=Ae().find(W=>String(W.id)===String(F));if(Q){ot(Q.id,{status:"ready_for_pickup",readyAt:Date.now(),driverNotified:!0}),alert("      "),R(!1),e(-1);return}}catch{}}return te.useEffect(()=>{if(l.action==="fulfill"&&G(),l.action==="pickup"&&h(Math.min(l.requestedQty||1,c)),l.action==="pickup_partial"||l.action==="partial_pickup"){const F=Math.max(1,Number(l.requestedQty||1));h(Math.min(c,Math.max(1,F-1)))}if(l.action==="preparing"||l.action==="prepairing"){const F=l.orderId;if(F)try{const Q=Ae().find(W=>String(W.id)===String(F));if(Q){ot(Q.id,{status:"preparing"}),e(-1);return}}catch{}}if(l.action==="picked"){const F=l.orderId;if(F)try{const Q=Ae().find(W=>String(W.id)===String(F));if(Q){const W=(Q.items||[]).map(J=>{if(String(J.productId)===String(n.id)){const ie=l.requestedQty||J.qty||J.quantity||1;return{...J,requestedQty:ie,pickedQty:ie}}return J});ot(Q.id,{items:W,status:"picked_up"}),alert("     "),e(-1);return}}catch{}}},[]),r.jsx(tt,{children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsx("button",{onClick:()=>e(-1),className:"mb-4 text-sm underline",children:"Back"}),r.jsx("div",{className:"bg-slate-800 p-6 rounded",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"col-span-1",children:r.jsx("img",{src:n.image,alt:n.name?.en||n.name,className:"w-full h-48 object-cover rounded"})}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("h2",{className:"text-lg font-semibold",children:n.name?.en||n.name}),r.jsxs("div",{className:"mt-2 flex items-center gap-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-400",children:"Barcode"}),r.jsx("div",{className:"font-mono text-xl",children:n.barcode||n.id})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-400",children:"Price"}),r.jsxs("div",{className:"text-green-400 text-2xl",children:["$",N]})]})]}),r.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:B,className:"px-3 py-1 bg-slate-700 rounded",children:"-"}),r.jsx("div",{className:"px-4 py-2 bg-slate-900 rounded",children:d}),r.jsx("button",{onClick:X,className:"px-3 py-1 bg-slate-700 rounded",children:"+"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Change price"}),r.jsx("input",{value:N,onChange:F=>q(F.target.value),className:"p-2 rounded bg-slate-700"})]}),y&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Weight (kg)"}),r.jsx("input",{value:b,onChange:F=>se(F.target.value),className:"p-2 rounded bg-slate-700 w-28"})]})]})]}),r.jsxs("div",{className:"mt-6 flex gap-3",children:[r.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded",children:""}),r.jsx("button",{onClick:G,className:"px-4 py-2 bg-violet-600 text-white rounded",children:"  "})]})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-4xl",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Select up to 6 alternatives"}),r.jsxs("div",{className:"mb-2 flex gap-2",children:[r.jsx("input",{value:z,onChange:F=>L(F.target.value),placeholder:"Search by barcode",className:"p-2 rounded flex-1"}),r.jsx("button",{onClick:ge,className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Search"})]}),r.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-72 overflow-auto mb-4",children:T.map(F=>r.jsxs("div",{className:`p-3 rounded border ${E.find(ne=>ne.id===F.id)?"border-indigo-500 bg-slate-100":"border-slate-200"}`,children:[r.jsx("img",{src:F.image,className:"w-full h-20 object-cover rounded mb-2"}),r.jsx("div",{className:"text-sm font-semibold",children:F.name?.en||F.name}),r.jsxs("div",{className:"text-sm text-slate-500",children:["$",F.price]}),r.jsx("div",{className:"mt-2 flex gap-2",children:r.jsx("button",{onClick:()=>xe(F),className:"px-2 py-1 bg-indigo-600 text-white rounded",children:E.find(ne=>ne.id===F.id)?"Selected":"Select"})})]},F.id))}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>_(!1),className:"px-3 py-2 bg-slate-400 rounded",children:"Close"}),r.jsxs("button",{onClick:Se,className:"px-3 py-2 bg-green-600 text-white rounded",disabled:E.length!==6,children:["Send (",E.length,"/6)"]})]})]})}),M&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-3xl",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:"   "}),r.jsx("div",{className:"mb-4 overflow-auto max-h-64 p-2 bg-slate-100 dark:bg-slate-700",dangerouslySetInnerHTML:{__html:Z}}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const F=window.open();F&&(F.document.write(Z),F.document.close(),F.print())},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:we,className:"px-3 py-2 bg-green-600 text-white rounded",children:" "}),ee&&r.jsx("button",{onClick:K,className:"px-3 py-2 bg-amber-500 text-white rounded",children:""}),r.jsx("button",{onClick:()=>{R(!1),re("")},className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]})})]})})}var xu={exports:{}},yu,Z0;function mE(){if(Z0)return yu;Z0=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yu=t,yu}var vu,ey;function pE(){if(ey)return vu;ey=1;var t=mE();function e(){}function s(){}return s.resetWarningCache=e,vu=function(){function n(c,d,h,f,p,g){if(g!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function o(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:s,resetWarningCache:e};return l.PropTypes=l,l},vu}var ty;function gE(){return ty||(ty=1,xu.exports=pE()()),xu.exports}var xE=gE();const no=sy(xE);function Qb({item:t,product:e,status:s,onPick:n,onDetails:o}){const l=e&&e.name&&e.name.ar||e.name||"";return r.jsxs(Zt.article,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.36},className:"glass-card rounded-2xl p-4 flex flex-col gap-3 shadow-lux",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-20 h-20 flex-shrink-0 rounded-xl overflow-hidden bg-white/40 flex items-center justify-center",children:r.jsx("img",{src:e.image||"https://via.placeholder.com/160",alt:l,className:"w-full h-full object-cover"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-deep-navy font-semibold text-lg leading-6",children:l}),r.jsx("div",{className:"text-sm text-slate-500 mt-1",children:e&&e.unitType==="weightable"?`Weight: ${t.qty||t.quantity||1} kg`:`Qty: ${t.qty||t.quantity||1}`})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-deep-navy font-bold",children:["$",(e.price||0).toFixed(2)]}),r.jsx("div",{className:`inline-block mt-2 px-3 py-1 rounded-full text-xs text-white ${s==="preparing"?"bg-amber-400 badge-pending":s==="processing"?"bg-ocean-blue badge-processing":"bg-slate-400"}`,children:s==="preparing"||s==="processing"?" ":""})]})]})})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsx("button",{onClick:()=>n&&n(e),className:"btn-shine px-4 py-2 rounded-xl text-white font-semibold",style:{background:"linear-gradient(90deg,#0077be,#00a8ff)",boxShadow:"0 10px 30px rgba(0,119,190,0.18)"},children:" "}),r.jsx("button",{onClick:()=>o&&o(e),className:"px-4 py-2 rounded-xl border border-white/12 text-deep-navy bg-white/10 font-medium hover:scale-105 transition-transform",children:""})]})]})}Qb.propTypes={item:no.object,product:no.object,status:no.string,onPick:no.func,onDetails:no.func};function yE(){const{id:t}=hi(),e=Pe(),{user:s}=pt(),n=te.useMemo(()=>Ae(),[]),o=te.useMemo(()=>Oe(),[]),l=n.find(V=>String(V.id)===String(t)&&(!s||V.store===s.name)),c=l&&(l.status==="preparing"||l.status===" "||l.status===" "),d=l&&(l.status==="ready_for_pickup"||l.status==="picked_up"||l.status==="ready"),[h,f]=te.useState(null),[p,g]=te.useState(null),[y,b]=te.useState(""),[j,N]=te.useState(!1),[w,S]=te.useState(!1),[_,T]=te.useState(!1),[O,E]=te.useState(!1),[$,z]=te.useState("");if(!l)return r.jsx(tt,{sideItems:[{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"}],children:r.jsx("div",{className:"p-6 bg-slate-800 rounded",children:"Order not found."})});function L(V){const X=V.qty||V.quantity||1,B=o.find(q=>q.id===V.productId)||{};e(`/store/product/${V.productId}`,{state:{maxQty:X,price:B.price||0,action:"pickup",orderId:l.id,requestedQty:X}})}function M(V){return V?(V.items||[]).every(X=>X.pickedQty&&X.pickedQty>=(X.qty||X.quantity||1)):!1}te.useEffect(()=>{l&&M(l)&&T(!0)},[l]);function R(V){try{const X=(l.items||[]).map(q=>q.productId===V.id?{...q,requestedQty:q.qty||q.quantity||1,pickedQty:q.qty||q.quantity||1}:q),B=ot(l.id,{items:X});if(S(!0),setTimeout(()=>S(!1),1400),M(B))try{e(`/store/orders/${l.id}/items`)}catch{}}catch(X){console.error(X)}}function Z(V){const X=new Date,B=[];B.push(`<h2>  #${V.id}</h2>`),B.push(`<div>Store: ${V.store||""}</div>`),B.push(`<div>Date: ${X.toLocaleString()}</div>`),B.push("<hr/>"),B.push("<div><strong>Item</strong> - <strong>Qty</strong> - <strong>Price</strong></div>");let q=0;const se=(V.items||[]).filter(D=>!(D.pickedQty&&D.pickedQty>=(D.qty||D.quantity||1)));for(const D of se){const G=o.find(K=>K.id===D.productId)||{},xe=D.requestedQty||D.qty||D.quantity||0,ge=G.price||0,Se=ge*xe;q+=Se;const we=D.fulfilledFromStock&&D.fulfilledFromStock.length;B.push(`<div>${G.name?.en||G.name} - ${xe} - ${ge} ${we?"(  )":""}</div>`)}return B.push("<hr/>"),B.push(`<div><strong>Total: ${q.toFixed(2)}</strong></div>`),B.join("")}function re(){const V=(l.items||[]).find(B=>!(B.pickedQty&&B.pickedQty>=(B.qty||B.quantity||1)));if(!V)return alert("     ");const X=o.find(B=>B.id===V.productId)||{};e(`/store/product/${X.id}`,{state:{action:"pickup_partial",orderId:l.id,requestedQty:V.qty||V.quantity||1}})}function ee(){const V=(l.items||[]).find(B=>!(B.fulfilledFromStock||B.fulfilledQty));if(!V)return alert("      ");const X=o.find(B=>B.id===V.productId)||{};e(`/store/product/${X.id}`,{state:{action:"fulfill",orderId:l.id,requestedQty:V.qty||V.quantity||1}})}function de(){try{ot(l.id,{status:"preparing"})}catch{}e("/store")}function he(){try{e("/store/picked",{state:{orderId:l.id}})}catch{}}return r.jsxs(tt,{sideItems:[{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"}],children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"glass-card p-4 rounded-2xl flex items-center justify-between shadow-lux",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:"/1.png",alt:"Dolphin",className:"w-14 h-14 dolphin-float rounded-full object-cover border border-white/10"}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-deep-navy font-bold text-lg",children:["Order #",l.id]}),r.jsxs("div",{className:"text-slate-500 text-sm",children:[l.userId||"Guest","  ",new Date(l.createdAt||Date.now()).toLocaleString()]})]})]}),r.jsx("div",{children:!c&&!d&&r.jsx("button",{onClick:de,className:"px-4 py-2 rounded-xl text-white font-semibold",style:{background:"linear-gradient(90deg,#0077be,#00a8ff)",boxShadow:"0 10px 30px rgba(0,119,190,0.18)"},children:" "})})]})}),r.jsx("div",{children:r.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[r.jsxs("div",{className:"mb-3 text-slate-400",children:["Customer: ",l.userId||"Guest"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(l.items||[]).filter(V=>!(V.preparing||V.pickedQty&&V.pickedQty>=(V.qty||V.quantity||1))).map((V,X)=>{const B=o.find(q=>q.id===V.productId)||{};return r.jsx(Qb,{item:V,product:B,status:l.status,onPick:()=>R(B),onDetails:()=>L(V)},X)})}),h&&(()=>{const V=l.items.find(q=>String(q.productId)===String(h));if(!V)return null;const X=o.find(q=>q.id===V.productId)||{},B=V.qty||V.quantity||1;return r.jsxs("div",{className:"mt-4 bg-slate-900 p-4 rounded",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:X.image,className:"w-28 h-20 object-cover rounded"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:X.name?.en||X.name}),r.jsxs("div",{className:"text-slate-400",children:["Barcode: ",X.barcode||X.sku||X.id]}),r.jsxs("div",{className:"text-slate-400",children:["Qty: ",B]})]})]}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsx("div",{className:"text-slate-400",children:"   ."}),r.jsx("button",{onClick:()=>f(null),className:"ml-auto px-3 py-2 bg-slate-400 rounded",children:""})]})]})})(),w&&r.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 top-1/4 bg-amber-500 text-white px-6 py-3 rounded shadow-lg z-50",children:"  "}),_&&l.status!=="ready_for_pickup"&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-900 rounded flex items-center gap-4",children:[r.jsx("div",{className:"font-semibold",children:"   "}),r.jsx("button",{onClick:()=>{const V=(function(){const B=new Date,q=[];q.push(`<h2>  #${l.id}</h2>`),q.push(`<div>Date: ${B.toLocaleString()}</div>`),q.push("<hr/>");let se=0;for(const D of l.items||[]){const G=o.find(Se=>Se.id===D.productId)||{},xe=D.pickedQty||D.requestedQty||D.qty||D.quantity||0,ge=(G.price||0)*xe;se+=ge,q.push(`<div>${G.name?.en||G.name} - ${xe} x ${G.price||0} = ${ge.toFixed(2)}</div>`)}return q.push("<hr/>"),q.push(`<div><strong>Total: ${se.toFixed(2)}</strong></div>`),q.join("")})();z(V),E(!0)},className:"px-4 py-2 bg-green-600 text-white rounded",children:" "})]}),O&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-3xl",children:[r.jsxs("h3",{className:"text-lg font-bold mb-2",children:["  - #",l.id]}),r.jsxs("div",{className:"mb-2 text-slate-400",children:[" : ",r.jsx("span",{className:"font-semibold text-white",children:l.status})]}),r.jsx("div",{className:"mb-4 overflow-auto max-h-64 p-2 bg-slate-100 dark:bg-slate-700",children:r.jsx("div",{className:"space-y-2",children:(l.items||[]).filter(V=>!(V.pickedQty&&V.pickedQty>=(V.qty||V.quantity||1))).map((V,X)=>{const B=o.find(D=>D.id===V.productId)||{},q=V.requestedQty||V.qty||V.quantity||0,se=V.fulfilledFromStock&&V.fulfilledFromStock.length||V.fulfilledQty&&V.fulfilledQty>0;return r.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border rounded flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:B.name?.en||B.name}),r.jsxs("div",{className:"text-slate-400",children:["Qty: ",q,"  Price: $",(B.price||0).toFixed(2)]})]}),se?r.jsx("div",{className:"px-2 py-1 bg-red-600 text-white rounded text-sm",children:"  "}):null]},X)})})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const V=Z(l),X=window.open();X&&(X.document.write(V),X.document.close(),X.print())},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>{const V=Z(l);ot(l.id,{invoice:{html:V,savedAt:Date.now()}}),alert(" ")},className:"px-3 py-2 bg-green-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>{ot(l.id,{status:"ready_for_pickup",readyAt:Date.now(),driverNotified:!0}),E(!1),T(!1),alert("      ")},className:"px-3 py-2 bg-amber-500 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>E(!1),className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-3xl",children:[r.jsxs("h3",{className:"text-lg font-bold mb-2",children:[" -  #",l.id]}),r.jsx("div",{className:"mb-4 overflow-auto max-h-64 p-2 bg-slate-100 dark:bg-slate-700",dangerouslySetInnerHTML:{__html:y}}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const V=window.open();V&&(V.document.write(y),V.document.close(),V.print())},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>{ot(l.id,{invoice:{html:y,savedAt:Date.now()}}),N(!0),alert(" ")},className:"px-3 py-2 bg-green-600 text-white rounded",children:" "}),j&&r.jsx("button",{onClick:()=>{ot(l.id,{status:"ready_for_pickup",readyAt:Date.now(),driverNotified:!0}),g(null),alert("      ")},className:"px-3 py-2 bg-amber-500 text-white rounded",children:""}),r.jsx("button",{onClick:()=>{g(null),b("")},className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]})}),c&&!d&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-900 rounded",children:[r.jsx("div",{className:"mb-2 text-slate-300 font-semibold",children:" : pending"}),r.jsxs("div",{className:"flex gap-2",children:[l.status!=="ready_for_pickup"&&r.jsx("button",{onClick:()=>E(!0),className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:" "}),r.jsx("button",{onClick:ee,className:"px-3 py-1 bg-green-700 text-white rounded text-sm",children:"  "}),r.jsx("button",{onClick:re,className:"px-3 py-1 bg-indigo-600 text-white rounded text-sm",children:" "}),r.jsx("button",{onClick:he,className:"px-3 py-1 bg-slate-700 text-white rounded text-sm",children:" "})]})]}),r.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[r.jsxs("div",{className:"text-slate-300",children:[" : ",r.jsx("span",{className:"font-semibold text-white",children:l.status})]}),r.jsx("div",{className:"flex justify-end gap-2",children:r.jsx("button",{onClick:()=>e("/store/orders"),className:"px-3 py-1 bg-slate-600 rounded",children:"Back"})})]})]})})]})}function vE(){const{user:t}=pt(),e=ms(),s=Pe(),n=te.useMemo(()=>Ae(),[]),o=te.useMemo(()=>Oe(),[]),l=e.state||{},c=l.orderId?String(l.orderId):null,d=[];for(const h of n)t&&h.store!==t.name||c&&String(h.id)!==c||(h.items||[]).forEach(f=>{(f.pickedQty&&f.pickedQty>0||f.preparing)&&d.push({orderId:h.id,orderStatus:h.status,item:f,order:h})});return r.jsxs(tt,{sideItems:[{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"},{label:" ",to:"/store/picked"}],children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:":  "}),c&&r.jsx("button",{onClick:()=>s(`/store/orders/${c}`),className:"px-3 py-1 bg-slate-600 rounded text-white",children:" "})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.length===0&&r.jsx("div",{className:"col-span-3 p-4 bg-slate-800 rounded",children:"     ."}),d.map((h,f)=>{const p=o.find(g=>g.id===h.item.productId)||{};return r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("img",{src:p.image,className:"w-full h-28 object-cover rounded mb-2"}),r.jsx("div",{className:"font-semibold text-white",children:p.name?.en||p.name}),r.jsxs("div",{className:"text-slate-400",children:["Order #",h.orderId,"  Status: ",h.orderStatus]}),r.jsxs("div",{className:"text-slate-400",children:["Picked: ",h.item.pickedQty||h.item.requestedQty||h.item.qty||h.item.quantity]})]},f)})]})]})}function bE(){const{user:t}=pt(),e=te.useMemo(()=>Ae().filter(g=>!t||g.store===t.name),[t]),s=te.useMemo(()=>Oe(),[]),[n,o]=te.useState(null),[l,c]=te.useState(!1);Pe();const d=["preparing","ready_for_pickup","picked_up","fulfilled"],h=e.filter(g=>d.includes(g.status));function f(g){o(g)}function p(){o(null)}return r.jsxs(tt,{sideItems:[{label:"Store",to:"/store"},{label:"Dashboard",to:"/store"},{label:"Products",to:"/store/products"},{label:"Orders",to:"/store/orders"},{label:" ",to:"/store/prepared"}],children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"col-span-2",children:h.length===0?r.jsx("div",{className:"p-4 bg-slate-800 rounded text-slate-300",children:"   "}):r.jsx("div",{className:"space-y-2",children:h.map(g=>r.jsx("div",{onClick:()=>f(g),className:"cursor-pointer bg-slate-900 p-3 rounded",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[" #",g.id]}),r.jsxs("div",{className:"text-slate-400",children:[g.items.length,"   $",g.total]})]}),r.jsx("div",{className:"text-sm text-slate-300",children:g.status})]})},g.id))})}),r.jsx("div",{className:"col-span-1",children:n?r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:[r.jsxs("div",{className:"bg-slate-700 p-3 rounded mb-3",children:[r.jsx("div",{className:"font-semibold",children:n.customerName||"Customer #"+(n.userId||"Guest")}),r.jsxs("div",{className:"text-slate-300",children:["Order #",n.id]})]}),r.jsxs("div",{className:"mb-2",children:[" : ",r.jsxs("span",{className:"font-semibold",children:["$",n.total]})]}),r.jsxs("div",{className:"mb-2",children:[" : ",r.jsx("span",{className:"font-semibold",children:n.phone||"-"})]}),r.jsxs("div",{className:"mb-2",children:[": ",r.jsx("span",{className:"font-semibold",children:n.discount||0})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("button",{onClick:()=>c(g=>!g),className:"w-full text-right px-3 py-2 bg-slate-700 rounded text-white",children:" "}),l&&r.jsx("div",{className:"mt-2 bg-slate-900 p-2 rounded",children:(n.items||[]).map((g,y)=>{const b=s.find(w=>w.id===g.productId)||{},j=g.requestedQty||g.qty||g.quantity||0,N=b.unitType==="weightable";return r.jsxs("div",{className:"p-2 border-b last:border-b-0 text-slate-300",children:[b.name?.en||b.name,"  ",N?`Weight: ${j} kg`:`Qty: ${j}`]},y)})})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{className:"px-3 py-2 bg-green-600 text-white rounded",children:"  "}),r.jsx("button",{className:"px-3 py-2 bg-red-600 text-white rounded",children:"  "}),r.jsx("button",{onClick:p,className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]}):r.jsxs("div",{className:"p-4 bg-slate-800 rounded text-slate-400",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("div",{className:"text-slate-400 text-sm",children:"  "}),r.jsx("div",{className:"text-2xl font-bold text-white",children:e.length})]}),r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("div",{className:"text-slate-400 text-sm",children:" "}),r.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(g=>g.status==="cancelled").length})]}),r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[r.jsx("div",{className:"text-slate-400 text-sm",children:" "}),r.jsx("div",{className:"text-2xl font-bold text-white",children:h.length})]})]})]})})]})]})}function wE(){const{id:t}=hi(),e=Pe(),{user:s}=pt()||{};te.useEffect(()=>{try{s===null&&typeof e=="function"&&e("/login")}catch{}},[s,e]);const n=te.useMemo(()=>Ae(),[]),o=te.useMemo(()=>Oe(),[]),l=n.find(O=>String(O.id)===String(t)&&(!s||O.store===s.name)),[c,d]=te.useState(!1),[h,f]=te.useState(!1),[p,g]=te.useState(""),[y,b]=te.useState(!1),[j,N]=te.useState(!1),[w,S]=te.useState(null);if(te.useEffect(()=>{if(!l)return;(l.items||[]).every(E=>E.pickedQty&&E.pickedQty>=(E.qty||E.quantity||1))&&b(!0)},[l]),!l)return r.jsx(tt,{children:r.jsx("div",{className:"p-6 bg-slate-800 rounded",children:"Order not found."})});function _(O){try{const E=(l.items||[]).map(z=>z.productId===O.id?{...z,requestedQty:z.qty||z.quantity||1,pickedQty:z.qty||z.quantity||1}:z),$=ot(l.id,{items:E});d(!0),setTimeout(()=>d(!1),1400),($.items||[]).every(z=>z.pickedQty&&z.pickedQty>=(z.qty||z.quantity||1))&&b(!0)}catch(E){console.error(E)}}function T(){const O=new Date,E=Ae().find(L=>String(L.id)===String(l.id))||l,$=(E.items||[]).length;let z=0;for(const L of E.items||[]){const M=o.find(Z=>Z.id===L.productId)||{},R=L.pickedQty||L.requestedQty||L.qty||L.quantity||0;z+=(M.price||0)*R}S({orderId:l.id,date:O.toLocaleString(),total:z.toFixed(2),itemsCount:$}),N(!0)}return r.jsxs(tt,{children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[" - Order #",l.id]}),!y&&r.jsx("div",{className:"grid grid-cols-3 gap-4",children:(l.items||[]).map((O,E)=>{const $=o.find(L=>L.id===O.productId)||{},z=O.requestedQty||O.qty||O.quantity||1;return r.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[$.image&&r.jsx("img",{src:$.image,className:"w-full h-28 object-cover rounded mb-2"}),r.jsx("div",{className:"font-semibold text-white",children:$.name?.en||$.name}),r.jsx("div",{className:"text-slate-400",children:$&&$.unitType==="weightable"?`Weight: ${z} kg`:`Qty: ${z}`}),r.jsx("div",{className:"mt-3 flex gap-2",children:r.jsx("button",{onClick:()=>_($),className:"px-3 py-1 bg-amber-500 text-white rounded",children:""})})]},E)})}),c&&r.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 top-1/4 bg-amber-500 text-white px-6 py-3 rounded z-50",children:"  "}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-3xl",children:[r.jsxs("h3",{className:"text-lg font-bold mb-2",children:[" -  #",l.id]}),r.jsx("div",{className:"mb-4 overflow-auto max-h-64 p-2 bg-slate-100 dark:bg-slate-700",dangerouslySetInnerHTML:{__html:p}}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const O=window.open();O&&(O.document.write(p),O.document.close(),O.print())},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>{ot(l.id,{invoice:{html:p,savedAt:Date.now()}}),alert(" ")},className:"px-3 py-2 bg-green-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>f(!1),className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]})}),j&&w&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 text-black dark:text-white p-6 rounded w-3/4 max-w-2xl",children:[r.jsxs("div",{className:"mb-4",children:["      ",w.orderId,"  ",w.date,"   ",w.total,"    ",w.itemsCount]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{try{ot(l.id,{status:"ready_for_pickup",readyAt:Date.now(),driverNotified:!0})}catch(O){console.error(O)}N(!1),b(!1),f(!1),d(!1),S(null),e("/store/prepared")},className:"px-3 py-2 bg-amber-500 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>N(!1),className:"px-3 py-2 bg-slate-400 rounded",children:""})]})]})}),y&&r.jsx("div",{className:"mt-6 p-4 bg-slate-800 rounded flex justify-center",children:r.jsx("button",{onClick:T,className:"px-4 py-3 bg-amber-500 text-white rounded-lg",children:" "})})]})}function jE(){const{t}=cr(),e=[{label:t("orders"),to:"/driver"},{label:"Deliveries",to:"/driver/log"}],[s,n]=te.useState(()=>Ae());te.useEffect(()=>{const l=Cs(c=>{(c.type==="tick"||c.type==="order")&&n([...Ae()])});return()=>l()},[]);function o(){const l=Ae().find(c=>c.status==="pending");if(!l)return alert("No pending orders");ot(l.id,{status:"accepted"}),n([...Ae()]),alert("Order "+l.id+" accepted")}return r.jsxs(tt,{sideItems:e,children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Driver Dashboard"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-800 rounded",children:["Available orders list (mock) ",r.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 bg-green-600 rounded",children:t("accept")})]}),r.jsx("div",{className:"p-4 bg-slate-800 rounded",children:"Deliveries log and earnings (mock)"})]})]})}function NE(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Page not found"})}function Ve({children:t,roles:e}){const{user:s,loading:n}=pt();return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading"}):s?e&&!e.includes(s.role)?r.jsx(pl,{to:"/",replace:!0}):t:r.jsx(pl,{to:"/login",replace:!0})}function SE(){const t=ms(),e=Pe(),s=t.pathname.startsWith("/customer"),[n,o]=C.useState(!0);return C.useEffect(()=>{const l=setTimeout(()=>{o(!1);try{e("/login")}catch{}},2e3);return()=>clearTimeout(l)},[]),r.jsxs("div",{className:`min-h-screen ${s?"pb-20":""}`,children:[" ",r.jsx(zC,{}),n&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black flex items-center justify-center",children:r.jsx("img",{src:"/1.png",alt:"splash",className:"w-full h-full object-cover"})}),r.jsxs(Y1,{children:[r.jsx(Te,{path:"/",element:r.jsx(pl,{to:"/login",replace:!0})}),r.jsx(Te,{path:"/login",element:r.jsx(h_,{})}),r.jsx(Te,{path:"/forgot-password",element:r.jsx(UT,{})}),r.jsx(Te,{path:"/reset-password/:token",element:r.jsx(HT,{})}),r.jsx(Te,{path:"/register",element:r.jsx(p_,{})}),r.jsx(Te,{path:"/admin",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(GM,{})})}),r.jsx(Te,{path:"/admin/orders",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(QM,{})})}),r.jsx(Te,{path:"/admin/revenue",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(eT,{})})}),r.jsx(Te,{path:"/admin/stats",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(sT,{})})}),r.jsx(Te,{path:"/admin/users",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(K0,{})})}),r.jsx(Te,{path:"/admin/all-users",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(K0,{})})}),r.jsx(Te,{path:"/admin/products",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(tT,{})})}),r.jsx(Te,{path:"/admin/offers",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(iT,{})})}),r.jsx(Te,{path:"/admin/search",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(ET,{})})}),r.jsx(Te,{path:"/admin/create-store",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(OT,{})})}),r.jsx(Te,{path:"/admin/invoice/:id",element:r.jsx(Ve,{roles:["admin"],children:r.jsx(rT,{})})}),r.jsx(Te,{path:"/customer",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(pl,{to:"/customer/home",replace:!0})})}),r.jsx(Te,{path:"/customer/home",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(RT,{})})}),r.jsx(Te,{path:"/customer/category/:categoryId",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(IT,{})})}),r.jsx(Te,{path:"/customer/orders",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(LT,{})})}),r.jsx(Te,{path:"/customer/offers",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(FT,{})})}),r.jsx(Te,{path:"/customer/coupons",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(BT,{})})}),r.jsx(Te,{path:"/customer/cart",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(VT,{})})}),r.jsx(Te,{path:"/customer/checkout",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(rE,{})})}),r.jsx(Te,{path:"/customer/store/:storeName",element:r.jsx(ZT,{})}),r.jsx(Te,{path:"/customer/more",element:r.jsx(Ve,{roles:["customer"],children:r.jsx(oE,{})})}),r.jsx(Te,{path:"/store",element:r.jsx(Ve,{roles:["store"],children:r.jsx(cE,{})})}),r.jsx(Te,{path:"/store/products",element:r.jsx(Ve,{roles:["store"],children:r.jsx(hE,{})})}),r.jsx(Te,{path:"/store/product/:id",element:r.jsx(Ve,{roles:["store"],children:r.jsx(fE,{})})}),r.jsx(Te,{path:"/store/picked",element:r.jsx(Ve,{roles:["store"],children:r.jsx(vE,{})})}),r.jsx(Te,{path:"/store/prepared",element:r.jsx(Ve,{roles:["store"],children:r.jsx(bE,{})})}),r.jsx(Te,{path:"/store/orders",element:r.jsx(Ve,{roles:["store"],children:r.jsx(dE,{})})}),r.jsx(Te,{path:"/store/orders/:id",element:r.jsx(Ve,{roles:["store"],children:r.jsx(yE,{})})}),r.jsx(Te,{path:"/store/orders/:id/items",element:r.jsx(Ve,{roles:["store"],children:r.jsx(wE,{})})}),r.jsx(Te,{path:"/driver",element:r.jsx(Ve,{roles:["driver"],children:r.jsx(jE,{})})}),r.jsx(Te,{path:"*",element:r.jsx(NE,{})})]}),s&&r.jsx(In,{})]})}class kE extends te.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,s){console.error("ErrorBoundary caught",e,s)}render(){return this.state.error?r.jsxs("div",{style:{padding:20,background:"#0f172a",color:"#fee"},children:[r.jsx("h2",{children:"Runtime error"}),r.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:this.state.error.toString()})]}):this.props.children}}const Xb="cart";function CE(){try{return JSON.parse(localStorage.getItem(Xb)||"[]")}catch{return[]}}function _E(t){try{localStorage.setItem(Xb,JSON.stringify(t||[]))}catch{}window.dispatchEvent(new CustomEvent("cart:updated",{detail:{cart:t}}))}function PE(t){if(!Array.isArray(t))return;const e=CE()||[],s=new Map;for(const o of e){const l=String(o.productId||o.id||o.productId);s.set(l,{...o})}for(const o of t){const l=String(o.productId||o.id||o.productId),c=Number(o.qty||o.quantity||1)||1;s.has(l)?s.get(l).qty=(Number(s.get(l).qty)||0)+c:s.set(l,{productId:Number(l),qty:c})}const n=Array.from(s.values());return _E(n),n}n1.createRoot(document.getElementById("root")).render(r.jsx(te.StrictMode,{children:r.jsx(sN,{children:r.jsx(u_,{children:r.jsx(YM,{children:r.jsx(kE,{children:r.jsx(c_,{children:r.jsx(MT,{children:r.jsx(SE,{})})})})})})})}));if(typeof window<"u"){try{window.AppEngine=es}catch{}window.addEventListener("app:reorder",t=>{try{const s=(t&&t.detail&&t.detail.order?t.detail.order:null)||(function(){try{return JSON.parse(localStorage.getItem("app_last_order_v1"))}catch{return null}})();if(!s||!Array.isArray(s.items)){alert("No items found in the order to reorder");return}PE(s.items),alert("Order items added to cart");try{window.location.href="/customer/cart"}catch{}}catch(e){console.error("reorder handler error",e)}}),window.addEventListener("app:walletUpdated",t=>{try{t&&t.detail&&typeof t.detail.amount<"u"&&Vl(Number(t.detail.amount)||0),t&&t.detail&&t.detail.tx&&Ao(t.detail.tx),window.dispatchEvent(new CustomEvent("wallet:updated"))}catch(e){console.error("walletUpdated handler",e)}})}export{sE as _};
